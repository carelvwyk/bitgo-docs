<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>BitGo APIレファレンス</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="../stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="../stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="../javascripts/all_nosearch.js"></script>
  </head>

  <body class="ja ja_index" data-languages="[&quot;javascript&quot;,&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="../images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="javascript">javascript</a>
              <a href="#" data-language-name="shell">shell</a>
        </div>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href="https://www.bitgo.com/" target="_new">BitGoウェブサイト</a></li>
            <li><a href="https://www.bitgo.com/terms" target="_new">サービス契約</a></li>
            <li><a href="https://www.bitgo.com/settings" target="_new">BitGo 設定 (APIアクセストークンを取得)</a></li>
            <li><a>言語</a></li>
            <li><a href="../index.html">- English　英語</a></li>
            <li><a href="index.html">- Japanese 日本語</a></li>
            <li><a href="../zh-CN/index.html">- Chinese (Simplified) 简体中文</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="getting-started">はじめに Getting Started</h1>

<aside class="info">
私達の開発者プラットフォームが立ち上がりました。インテグレーション支援やアクセストークン、追加情報にサインアップするには<a href="https://www.bitgo.com/platform">BitGoプラットフォームポータル</a>にお越しください。
</aside> 

<h3 id="overview">概要 Overview</h3>

<p>BitGoは、マルチシグ技術を現行のあなたのビットコインアプリケーションやサービスに統合するためのシンプルで堅牢なRESTful API及びシンプルなクライアントサイドjavascriptを提供しています。</p>

<p>BitGo SDKは以下の操作を可能にします：</p>

<ul>
<li>P2SH(マルチシグネチャ) ウォレットの作成</li>
<li>階層的決定性ウォレット管理(BIP32)</li>
<li>トランザクションの作成</li>
<li>トランザクション署名</li>
<li>支出制限</li>
<li>マルチサイナーウォレットフロー</li>
</ul>

<h3 id="multi-signature-wallets">マルチシグネチャウォレット Multi-Signature Wallets</h3>

<p>マルチシグウォレットの主要な利点は、複数のマシンや人々が協働し特定のトランザクションを承認する能力です。 トランザクションのマルチシグネチャがなければ、トランザクションを承認するための全ての証明はマシン上の１人の人間に常に常駐しなければなりません。 その人間またはマシンが攻撃者によって侵入された場合、あなたの持つ全てのビットコインが失われることがあります。</p>

<p>これまで、これらの１人の人間 / シングルマシンのセキュリティを確保するのは非常に困難で、多くのベンダーは単に「コールドストレージ」を用いてビットコインを完全にオフラインに置くことを選んんでいました。</p>

<p>マルチシグウォレットはビットコインをオフラインに置くことなく、あなたがモダンなビットコインアドレスに求める柔軟性を提供します。 BitGo APIは、自分のアプリケーションでマルチシグネチャ機能を利用し、複数ユーザー、連署者、最先端の不正検出サービスが持つ完全な柔軟性を損失や盗難から保護するため活用するのを可能にします</p>

<p>詳細については、<a href="https://www.bitgo.com/p2sh_safe_address" target="_new">BitGoホワイトペーパー</a>をお読みください。</p>

<h3 id="hd-hd-wallets">HDウォレット HD Wallets</h3>

<p>全てのBitGoウォレットは階層的決定性ウォレット（別名HDウォレット）です。 HDウォレットはビットコイン<a href="https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki" target="_new">BIP32規格</a>を用いて実装されています。 よって、BitGo&rsquo; HDウォレットは個別の鍵というより「キーチェーン」から構築されており、2つの特徴的なセキュリティとプライバシー強化の機能を提供します。</p>

<ul>
<li><p>よりセキュアなバックアップ</p>

<p>キーチェーンは単一のシークレットキーでバックアップされているため、ウォレットは単一のバックアップキーで保全される多数のパブリックキーを用いることが出来ます。</p></li>
<li><p>ブロックチェーンプライバシー</p>

<p>HDウォレットなら、どのトランザクションも同一のウォレットから到着したと見えないよう、アプリケーションはトランザクション毎に新たなキーを作成できます。 これにより、ウォレットの本当の大きさが漏洩することからウォレット保持者が保護されます。</p></li>
</ul>

<h2 id="software-development-kit">ソフトウェア開発キット Software Development Kit</h2>

<p>BitGo APIは、開発者にマルチシグウォレットの作成、管理、ポリシーの操作、そしてビットコインネットワークとやり取りする方法を提供します。 ただし、ユーザの秘密鍵やトランザクションの署名など、いくつかセンシティブな操作がクライアントサイドで行われる必要があります。</p>

<p>そのような理由から、私達は<a href="https://github.com/BitGo/BitGoJS" target="_new">ソフトウェア開発キット(SDK)</a>を提供の上、利用をお勧めします。このSDKは、これらのクライアントサイドのウォレット機能を実装し、私達のAPIとインターフェースするものです。 実際には、BitGo APIの利用を検討している開発者は、おそらくBitGoクライアントサイドSDKもBitGo RESTサービスも利用するでしょう。</p>

<p>現在、私達のSDKはjavascriptで利用可能で、node.jsまたはブラウザで実行されます。 サポートされていないプログラミング言語を利用している場合、BitGo Expressの設定方法について「BitGo Express REST API」のドキュメンテーションのセクションを参照いただくか、私達にお問い合わせください。</p>

<p>Javascript SDKのインストール (npmを通じ)</p>

<p><code class="prettyprint">npm install bitgo --save</code></p>

<p>Javascript SDKのインストール (Githubを通じ)</p>

<ul>
<li>Githubにある<a href="https://github.com/BitGo/BitGoJS" target="_new">オープンソースSDKページ</a>をご覧ください。</li>
<li>Gitとnodejs/npmをインストール(例に従うことを推奨)</li>
<li>次のコマンドを実行することにより、ローカルに私達のレポジトリをクローン <code class="prettyprint">git clone git@github.com:BitGo/BitGoJS.git</code></li>
<li>BitGoJSディレクトリで次によって依存関係をインストール：<code class="prettyprint">npm install</code></li>
<li>「例」のディレクトリをチェックして、SDKをどのように利用できるかを参照して、次を実行ください</li>
</ul>

<p><code class="prettyprint">node auth.js &lt;testusername&gt; &lt;testpassword&gt; 0000000</code></p>

<h3 id="importing-and-initializing-the-library">ライブラリのインポートと初期化 Importing and initializing the library</h3>
<pre class="highlight javascript"><code><span class="c1">// パーケージからインポートしている場合</span>
<span class="kd">var</span> <span class="nx">BitGoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'BitGoJS/src/index.js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">bitgo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BitGoJS</span><span class="p">.</span><span class="nx">BitGo</span><span class="p">();</span>

<span class="c1">// npm install bitgoからインストールしている場合</span>
<span class="c1">// var bitgo = require('bitgo');</span>

<span class="nx">bitgo</span><span class="p">.</span><span class="nx">ping</span><span class="p">({},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ここでやりたいことをやる</span>
<span class="p">});</span>
</code></pre>

<p>ライブラリをインポートするには、<code class="prettyprint">src/index.js</code>ファイルが必要なだけです。 そうしたら <code class="prettyprint">BitGoJS.BitGo()</code> を実行することによりSDKを初期化できます。</p>

<table><thead>
<tr>
<th>パラメーター</th>
<th>値</th>
</tr>
</thead><tbody>
<tr>
<td>useproduction</td>
<td>プロダクションに接続するかどうか。デフォルト値は偽。</td>
</tr>
</tbody></table>

<p>Javascript SDKはpromiseとコールバックの両方をサポートしています。コールバックを最後の引数として渡した場合、コールバックスタールで返します。さもなければpromiseが返されます。</p>

<h3 id="important-notes-on-test-environment">テスト環境に関する重要な注意 Important notes on test environment</h3>

<p>私達のSDKと各例は、ビットコインテストネットと接続されているBitGoテスト環境の初期値になっています。 詳細は<a href="#bitgo-api-endpoints">テスト環境</a>のセクションを参照してください。</p>

<h2 id="bitgo-api-bitgo-api-endpoints">BitGo API エンドポイント BitGo API Endpoints</h2>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">BitGoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'BitGoJS/src/index.js'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">useProduction</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">bitgo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BitGoJS</span><span class="p">.</span><span class="nx">BitGo</span><span class="p">(</span><span class="nx">useProduction</span><span class="p">);</span>

<span class="nx">bitgo</span><span class="p">.</span><span class="nx">ping</span><span class="p">({},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">res</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">4</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight shell"><code><span class="nv">TEST_ENDPOINT</span><span class="o">=</span><span class="s1">'https://test.bitgo.com/api/v1'</span>
<span class="nv">PROD_ENDPOINT</span><span class="o">=</span><span class="s1">'https://www.bitgo.com/api/v1'</span>

curl <span class="s2">"</span><span class="nv">$TEST_ENDPOINT</span><span class="s2">/ping"</span>
</code></pre>

<p>BitGoは開発とプロダクション向けに2つの個別の環境を利用可能にしています。</p>

<p>すべての応答は、<code class="prettyprint">application/json</code>コンテンツタイプです</p>

<blockquote>
<p>応答の例</p>
</blockquote>

<p>{
        &ldquo;status&rdquo;: &ldquo;service is ok!&rdquo;,
        &ldquo;environment&rdquo;: &ldquo;BitGo Test&rdquo;
    }</p>

<h3 id="production-environment">プロダクション環境 Production Environment</h3>

<p>BitGo プロダクションエンドポイントは立ち上がっており、提携パートナーとwww.bitgo.com にある弊社独自のウェブアプリケーションにより利用されています。</p>

<ul>
<li>プロダクションサイト: https://www.bitgo.com/</li>
<li>プロダクションAPI: https://www.bitgo.com/api/v1</li>
</ul>

<h3 id="test-environment">テスト環境 Test Environment</h3>

<p>私達の各例とSDKでは、BitGoのテスト環境がデフォルトで利用されています。 BitGoのプロダクション環境とは完全に別個のものであり、データとアカウントにおけるオーバーラップはありません。 <a href="https://test.bitgo.com/" target="_new">test.bitgo.com</a> でアカウントを作成する必要があります。</p>

<ul>
<li>BitGo テスト サイト: https://test.bitgo.com/</li>
<li>テスト環境 API: https://test.bitgo.com/api/v1</li>
</ul>

<p>テスト環境の場合のみ、（自動テストを目的として）BitGoでの認証においてOTPの代わりに<code class="prettyprint">0000000</code>が使えます。</p>

<p>この環境は、ナビゲーションに<a href="http://tbtc.blockr.io/" target="_new">Blockr</a>を利用できるビットコインテストネットに接続されています。 テストコインを取得するには、<a href="http://tpfaucet.appspot.com/" target="_new">フォーセット</a>か、あるいはご連絡ください。</p>

<h2 id="bitgo-express-rest-api">BitGo Express REST API</h2>
<pre class="highlight shell"><code>./bitgo-express --debug --port 3080 --env <span class="nb">test</span> --bind localhost
</code></pre>
<pre class="highlight shell"><code><span class="nv">BITGO_EXPRESS_HOST</span><span class="o">=</span><span class="s1">'localhost'</span>
curl http://<span class="nv">$BITGO_EXPRESS_HOST</span>:3080/api/v1/ping
</code></pre>

<p>BitGo Express REST APIは、BitGoを利用したいがネイティブのBitGo SDKのない言語環境で開発している開発者向けのライトウェイトサービスです。</p>

<p>BitGo Expressはあなたのデータセンターのサービスとして稼働し、BitGoに送信する前の部分的なトランザクションの署名など、あなた自身の鍵を伴うクライアントサイドの操作を処理します。 これにより、あなたの鍵は決してネットワーク外に出ることなく、BitGoの方で表示されることはありません。 BitGo Expressは、標準のBitGo REST APのプロクシとして振舞うことも出来、単一のREST APIを通じBitGoへの統一インターフェースを提供します。</p>

<p>BitGo Expressを利用するには:</p>

<ul>
<li><a href="#software-development-kit">BitGoJS</a> をインストールします</li>
<li>bin ディレクトリで次のコマンドを実行します:</li>
</ul>

<p><code class="prettyprint">./bitgo-express --debug --port 3080 --env test --bind localhost</code></p>

<ul>
<li><strong>全ての</strong>BitGo REST APIの呼び出しを、bitgo-expressを実行しているマシンに対し行う</li>
</ul>

<h2 id="error-handling">エラー処理 Error Handling</h2>

<blockquote>
<p>JSON エラーの例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w">  </span><span class="s2">"400 Bad Request"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"missing user name"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>全てのエラーは一般的なRESTの原則に従います。エラー応答の本文(例えば非200ステータスコード)に含まれるのは次の形式のエラーオブジェクトになります：</p>

<table><thead>
<tr>
<th>パラメーター</th>
<th>値</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>The HTTP error status returned</td>
</tr>
<tr>
<td>error</td>
<td>The detailed description of the error</td>
</tr>
</tbody></table>

<h1 id="user-authentication">ユーザー認証 User Authentication</h1>

<p>BitGoの認証は&quot;Authorization&quot;のヘッダーを通じて行われ、呼び出し元がアクセストークンを指定するのを可能にします。</p>

<p>アクセストークンはセッションを維持するのに利用され、パスワードログイン（ワンタイムパスワード（OTP）が必要）によって作成されます。 典型的なアクセストークンは1時間の間有効で、消費された資金をアンロックするのにOTPを必要とします。</p>

<p>デフォルトで、トークンは単一のIPアドレスに制限され、60分間有効です。それが過ぎたらユーザーは再認証する必要があります。</p>

<p>一部のAPIコールについては、有効なセッショントークンだけでは不十分です。 これらのAPIコールにアクセスするには、セッションはUnlock APIを用いて、追加の2要素コードによって明示的にアンロックされなければなりません。 単一のアンロックコールはユーザーが任意のサイズのトランザクション（ウォレットポリシーの対象）、または内部のBitGoが管理するクォータ以下の、任意の回数のトランザクションを行うことを可能にします。<aside class="info"> アンロックが必要なAPIは、セッションが現在ロックされている場合または現在のアンロックセッションのトランザクションクォータの残りが不十分でない場合、応答にneedsUnlock=trueを含みます。 </aside> </p>

<p>また、API 用に作成されたアクセス トークンは一定の額まで無期限にロックすることができますが、作成時に特定のスコープにバインドされる必要があります。</p>

<h2 id="api-api-access-tokens">APIアクセストークン API Access Tokens</h2>
<pre class="highlight shell"><code><span class="nv">ACCESS_TOKEN</span><span class="o">=</span><span class="s1">'DeveloperAccessToken'</span>
curl -X GET -H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s1">'{}'</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/user/session
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">bitgo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BitGoJS</span><span class="p">.</span><span class="nx">BitGo</span><span class="p">({</span><span class="na">accessToken</span><span class="p">:</span><span class="s1">'DeveloperAccessToken'</span><span class="p">});</span>
<span class="nx">bitgo</span><span class="p">.</span><span class="nx">session</span><span class="p">({},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">session</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// handle error</span>
  <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">session</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<p>自動化の目的で、開発者は、1時間で期限が切れない一定額の資金について、アンロックされた長寿命のアクセストークンをリクエストすることができます。</p>

<ol>
<li>BitGoダッシュボードへアクセスして、「設定」のページへ行く</li>
<li>「開発者」のタブをクリック</li>
<li>長寿命のアクセストークンを作成できるようになりました</li>
</ol>

<p>トークンは、デフォルトでは、あなたが指定した支出制限に基づきロックされていない状態で来ます。アンロックがリセットされるので、再度API経由でトークンをアンロックしようとしないで下さい。</p>

<h3 id="token-parameters">トークンパラメーター Token Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>Label</td>
<td>後で無効にすることを選択できるようトークンを特定するために用いられるラベル</td>
</tr>
<tr>
<td>Duration</td>
<td>トークンが有効であり続ける秒数</td>
</tr>
<tr>
<td>Spending Limit</td>
<td>トークンは、BTC建ての支出制限の額までのアンロックされた状態で来ます。制限がリセットされるので、API経由でトークンをアンロックしようとしないで下さい</td>
</tr>
<tr>
<td>IP アドレス</td>
<td>BitGoが特定のIPアドレスからのみ受け付けるよう、トークンをロックダウンします</td>
</tr>
<tr>
<td>Permissions</td>
<td>トークンが生成される際の認証の範囲</td>
</tr>
</tbody></table>

<h2 id="current-user-profile">現在のユーザープロファイル Current User Profile</h2>
<pre class="highlight shell"><code>curl -X GET -H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/user/me
</code></pre>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">me</span><span class="p">({},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// handle error</span>
  <span class="p">}</span>
  <span class="c1">// etc</span>
<span class="p">});</span>
</code></pre>

<p>現在認証されているユーザーについて情報を得ます。</p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/user/me</code></p>

<blockquote>
<p>ユーザモデルの応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"53532a4b43fd69a42f000005f0a2ed87fd8b020040739beb513524b5"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"isActive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jane"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"full"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jane Doe"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"janedoe@bitgo.com"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="response">応答 Response</h3>

<p>現在認証されているユーザーのユーザモデルのオブジェクトを返す。</p>

<h2 id="login">ログイン Login</h2>

<p>BitGo APIへのファーストパーティアクセスのためのトークンを取得します。 ファーストパーティアクセスは、自身のBitGoアカウントへアクセスしているユーザーのみ向けです。 別のユーザーの代わりでのBitGo APIへサードパーティアクセスの場合、<strong>パートナー認証</strong>を参照下さい。</p>
<pre class="highlight shell"><code><span class="nv">EMAIL</span><span class="o">=</span><span class="s2">"janedoe@bitgo.com"</span>
<span class="nv">PASSWORD</span><span class="o">=</span><span class="s2">"mypassword"</span>
<span class="nv">HMAC</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> -n <span class="s2">"</span><span class="nv">$PASSWORD</span><span class="s2">"</span> | openssl dgst -sha256 -hmac <span class="s2">"</span><span class="nv">$EMAIL</span><span class="s2">"</span> | sed <span class="s1">'s/^.* //'</span> <span class="sb">`</span>

curl -X POST <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s2">"{</span><span class="se">\"</span><span class="s2">email</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$EMAIL</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">password</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$HMAC</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">otp</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">0000000</span><span class="se">\"</span><span class="s2">}"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/user/login

注意 : 以降のシェルの例では、シェル変数ACCESS_TOKENがアクセストークンを含んでいることを前提とします。
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">useTestnet</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">bitgo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Bitgo</span><span class="p">(</span><span class="nx">useTestnet</span><span class="p">);</span>
<span class="nx">bitgo</span><span class="p">.</span><span class="nx">authenticate</span><span class="p">({</span> <span class="na">username</span><span class="p">:</span> <span class="nx">user</span><span class="p">,</span> <span class="na">password</span><span class="p">:</span> <span class="nx">password</span><span class="p">,</span> <span class="na">otp</span><span class="p">:</span> <span class="nx">otp</span> <span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// handle error</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">token</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">token</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">user</span><span class="p">;</span>
  <span class="c1">// etc</span>
<span class="p">});</span>
</code></pre>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">POST /api/v1/user/login</code></p>

<h3 id="body-body-parameters">BODYパラメーター BODY Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>文字列</td>
<td>YES</td>
<td>ユーザのメールアドレス</td>
</tr>
<tr>
<td>password</td>
<td>文字列</td>
<td>YES</td>
<td>ユーザのパスワード</td>
</tr>
<tr>
<td>otp</td>
<td>文字列</td>
<td>YES</td>
<td>2要素認証トークン(Authyトークン)。</td>
</tr>
<tr>
<td>extensible</td>
<td>ブーリアン</td>
<td>NO</td>
<td>セッションが１時間よりも延長可能である場合に真</td>
</tr>
</tbody></table>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3fe0bf671c943af5ee3b739d2b17ffced7fdde62"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="mi">3600</span><span class="p">,</span><span class="w">
    </span><span class="nt">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bearer"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"53532a4b43fd69a42f000005f0a2ed87fd8b020040739beb513524b5"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"isActive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jane"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"full"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jane Doe"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"janedoe@bitgo.com"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="response">応答 Response</h3>

<p>APIで使用するトークンを返す。</p>

<p>トークンはHTTP&quot;Authorization&quot;ヘッダーにある全てのAPIコールへへ、HTTPヘッダーとして追加されなければなりません。</p>

<p><code class="prettyprint">Authorization: Bearer &lt;あなたのトークンはここ&gt;</code></p>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>認証パラメーターが一致しない</td>
</tr>
</tbody></table>

<h2 id="logout">ログアウト Logout</h2>

<p>BitGoサービスからのログアウト。</p>
<pre class="highlight shell"><code>curl -X GET -H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/user/logout
</code></pre>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">logout</span><span class="p">({},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// handle error</span>
  <span class="p">}</span>
  <span class="c1">// the user is now logged out.</span>
<span class="p">});</span>
</code></pre>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/user/logout</code></p>

<h3 id="body-body-parameters">BODYパラメーター BODY Parameters</h3>

<p>なし</p>

<h3 id="response">応答 Response</h3>

<p>なし</p>

<h2 id="session-information">セッション情報 Session Information</h2>

<p>現在のセッションのアクセストークンに関する情報を取得する</p>
<pre class="highlight shell"><code>curl -X GET -H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s1">'{}'</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/user/session
</code></pre>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">session</span><span class="p">({},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">session</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// handle error</span>
  <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">session</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<blockquote>
<p>応答の例</p>
</blockquote>

<p>{ &ldquo;client&rdquo;: &ldquo;bitgo&rdquo;,
      &ldquo;user&rdquo;: &ldquo;5458141599f715232500000530a94fd2&rdquo;,
      &ldquo;scope&rdquo;:
       [ &ldquo;user_manage&rdquo;,
         &ldquo;openid&rdquo;,
         &ldquo;profile&rdquo;,
         &ldquo;wallet_create&rdquo;,
         &ldquo;wallet_manage_all&rdquo;,
         &ldquo;wallet_approve_all&rdquo;,
         &ldquo;wallet_spend_all&rdquo;,
         &ldquo;wallet_edit_all&rdquo;,
         &ldquo;wallet_view_all&rdquo; ],
      &ldquo;expires&rdquo;: &ldquo;2015-01-21T02:18:11.534Z&rdquo;,
      &ldquo;origin&rdquo;: &ldquo;test.bitgo.com&rdquo;,
      &ldquo;unlock&rdquo;:
          { &ldquo;time&rdquo;: &ldquo;2015-01-21T01:20:25.366Z&rdquo;,
            &ldquo;expires&rdquo;: &ldquo;2015-01-21T01:30:25.366Z&rdquo;,
            &ldquo;txCount&rdquo;: 0,
            &ldquo;txValue&rdquo;: 0
          }
    }</p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/user/session</code></p>

<h3 id="response">応答 Response</h3>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>client</td>
<td>ユーザートークンが取得された所のOAuthクライアントID</td>
</tr>
<tr>
<td>user</td>
<td>BitGo ユーザー ID</td>
</tr>
<tr>
<td>expires</td>
<td>ログインセッションがその時間まで有効なタイムスタンプ</td>
</tr>
<tr>
<td>scope</td>
<td>このセッショントークンについて許可されている権限のリスト</td>
</tr>
<tr>
<td>origin</td>
<td>ブラウザでセッションが開始された場合、トークンが作成されたオリジンホスト名</td>
</tr>
<tr>
<td>unlock</td>
<td>セッションがアンロックされた時に利用可能。トランザクションの回数とアンロックの有効期限を示す</td>
</tr>
</tbody></table>

<h2 id="send-otp">ワンタイムパスワードを送信 Send OTP</h2>

<p>ワンタイムパスワード(第二因子認証) トークンをユーザーに送信します。ログイン/アンロックに使用することができます。</p>
<pre class="highlight shell"><code>curl -X POST -H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s1">'{}'</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/user/sendotp
</code></pre>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">sendOTP</span><span class="p">({</span><span class="na">forceSMS</span><span class="p">:</span> <span class="kc">true</span><span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// handle error</span>
  <span class="p">}</span>
  <span class="c1">// etc</span>
<span class="p">});</span>
</code></pre>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">POST /api/v1/user/sendotp</code></p>

<h3 id="body-body-parameters">BODYパラメーター BODY Parameters</h3>

<table><thead>
<tr>
<th>名</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>forceSMS</td>
<td>ブーリアン</td>
<td>NO</td>
<td>Authyが設定されている場合でも、SMSを使ってワンタイムパスワードをユーザに送信する。</td>
</tr>
</tbody></table>

<h3 id="response">応答 Response</h3>

<p>なし</p>

<h2 id="unlock">アンロック Unlock</h2>

<p>現在のセッションをアンロックします。特定の他のセンシティブなAPIコールに必要です。</p>
<pre class="highlight shell"><code>curl -X POST -H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s1">'{"otp": "0000000"}'</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/user/unlock
</code></pre>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">unlock</span><span class="p">({</span><span class="na">otp</span><span class="p">:</span> <span class="nx">otp</span><span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// handle error</span>
  <span class="p">}</span>
  <span class="c1">// etc</span>
<span class="p">});</span>
</code></pre>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">POST /api/v1/user/unlock</code></p>

<h3 id="body-body-parameters">BODYパラメーター BODY Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>otp</td>
<td>文字列</td>
<td>YES</td>
<td>アカウントの Authy OTP コード</td>
</tr>
<tr>
<td>duration</td>
<td>数字</td>
<td>NO</td>
<td>所望のアンロックの秒数(default=600, max=3600)</td>
</tr>
</tbody></table>

<h3 id="response">応答 Response</h3>

<p>なし</p>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>Response 応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>認証パラメーターが一致しない、または OTP コードが正しくなかった</td>
</tr>
</tbody></table>

<h2 id="lock">ロック Lock</h2>

<p>現在のセッションを再ロックします</p>
<pre class="highlight shell"><code>curl -X POST -H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/user/lock
</code></pre>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">lock</span><span class="p">({},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...</span>
<span class="p">});</span>
</code></pre>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">POST /api/v1/user/lock</code></p>

<h3 id="response">応答 Response</h3>

<p>なし</p>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>Response 応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>401 Unauthorized</td>
<td>認証パラメーターが一致しない</td>
</tr>
</tbody></table>

<h2 id="partner-authentication">パートナー認証 Partner Authentication</h2>

<p>BitGO APIを利用するサードパーティアプリケーションはBitGoを通じて認証するのにOAuthを用います。パートナーIDの詳細についてはBitGoまでご連絡ください。</p>

<h1 id="keychains">キーチェーン Keychains</h1>

<p>全てのBitGoウォレットはキーチェーンを使用して作成されます。 キーチェーンとは標準の <a href="https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki" target="_new">BIP32</a> 拡張HDキーです。 これまでの単一の<a href="http://en.wikipedia.org/wiki/Elliptic_Curve_DSA" target="_new">ECDSA</a>キーペアを代表するビットコインキーと違い、一つのキーチェーンは共通秘密鍵から派生する多数のキーペアを代表する事ができます。 これにより、ユーザーは単一の秘密鍵を保持しながら、無数の公開鍵を生成することが可能になります。 BitGoはこれらの拡張された鍵を用いて、あなたのビットコインをよりプライベートでセキュアにします。</p>

<p>ウォレットの生成をシンプルにするため、BitGoは各ユーザーごとのキーチェーンのリストを維持します。各キーチェーンは任意の数のBitGoウォレットで使用することができます。</p>

<p>2つの種類のキーチェーンがあります：</p>

<ul>
<li><p>パブリックキーチェーン</p>

<p>これらは単一のBIP32拡張公開鍵（xpub）で構成されます。</p></li>
<li><p>プライベートキーチェーン</p>

<p>これらは、常に暗号化された形式で格納されている単一のBIP32拡張秘密鍵(xprv) で構成されます。</p></li>
</ul>

<p>全てのキーチェーンはそれらのxpubによって識別されます。便宜のため、各キーチェーンはラベルを持つことがあります。</p>

<p>最初のウォレットを作成する前に、そのウォレットとともに使用するキーチェーンを作成する必要があります。<aside class="success"> プライベートキーチェーン（暗号化され形式であっても) へのアクセスにおいて、必ず2要素認証が必須であることに注意してください。 </aside> </p>

<h2 id="list-keychains">キーチェーンの一覧を取得する List Keychains</h2>
<pre class="highlight shell"><code>curl -X GET -H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/keychain
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">keychains</span> <span class="o">=</span> <span class="nx">bitgo</span><span class="p">.</span><span class="nx">keychains</span><span class="p">();</span>
<span class="nx">keychains</span><span class="p">.</span><span class="nx">list</span><span class="p">({},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">keychains</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// handle error</span>
  <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">keychains</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<p>そのユーザーのパブリックキーチェーンの一覧を取得します<aside class="success"> このAPIは公開鍵だけを提供し、キーチェーンのプライベートデータを決して提供しません。 </aside> </p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/keychain</code></p>

<blockquote>
<p>キーチェーンモデルの応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"keychains"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"xpub"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xpub661MyMwAqRbcEnCqci8PwkTJgBPbfU54z5rS44bBFtm23hudhYaf73e5Jt8e3JhYYizyFpFcXb4Ahd7wBHmoDFqf2GTGZFaHSC1JyJoURpw"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"ethAddress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xcc59479226f57543ae99ca47630275d9c899bed0"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"xpub"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xpub661MyMwAqRbcFHjomRhjJybA7rh75j4Cn9Hz4EPG9FUumurJFVbWVgqeDCkCJtnoB5zBHvqsSoi4ArVUKQszzfzuAk9L3LwLZKKQ4RQe8k3"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"ethAddress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x0ddbe738936e911f0db97bdab76cf731f813b378"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"xpub"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xpub69gHkWcECsrNhcpkPBvvpHq8uX4AwYWcciVZAkvdaKNEj2Cr2mAkUzyQ2X4f9W8fBTt6jp6rvAwUDym4GypkApJZUgKt81vpjyYVs4RDvE8"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"ethAddress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x848ce3d81e017ace770dbc69cf0c752e267a1509"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"isBitGo"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"start"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="query-parameters">クエリ パラメーター QUERY Parameters</h3>

<p>| パラメーター | 種類 | 必須か | 説明                                      |
| &mdash;&mdash; | &ndash; | &mdash; | &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash; |
| skip   | 数字 | NO  | 一覧取得を開始するインデックス番号。既定値は0。                |
| limit  | 数字 | NO  | 単一コール(default=100, max=500) で返す結果の最大の件数 |</p>

<h3 id="response">応答 Response</h3>

<p>キーチェーンモデルオブジェクトの配列を返します。</p>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>認証パラメーターが一致しない</td>
</tr>
</tbody></table>

<h2 id="create-keychain">キーチェーンを作成する Create Keychain</h2>
<pre class="highlight shell"><code>ローカルメソッドとしてのみ利用可能 <span class="o">(</span>BitGo Express<span class="o">)</span>

curl -X POST http://<span class="nv">$BITGO_EXPRESS_HOST</span>:3080/api/v1/keychain/local
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">keychains</span> <span class="o">=</span> <span class="nx">bitgo</span><span class="p">.</span><span class="nx">keychains</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">keychain</span> <span class="o">=</span> <span class="nx">keychains</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">keychain</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"xpub"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xpub661MyMwAqRbcFdEUWdhDhgKKQ9tQzLSuqZzVM2AZf9TiijPMD84tPYmemZcQosg63SZit3jGQpCDsbbeXPv7A3aT1phPaBgAWQWKwFUioPR"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"xprv"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xprv9s21ZrQH143K39A1QcADLYNar83vasj4UM4tYdkx6ovjqw4CfakdqkTAvFrY8BoR8TFTCYShYJ3XjZCicvyuavmYjPLVbmASmHrz144nVCy"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ethAddress"</span><span class="p">:</span><span class="s2">"0x49e03847622a266335e2688be6e71a4975fe9615"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>

<p>新しいキーチェーン作成のためのローカルクライアントサイド関数。</p>

<p>オプションで、キーチェーンを作成するのに決定性シードを用いる単一のパラメーター、&#39;seed&#39;が提供されることができます。 このシードは最低32要素の長さの数字の配列であるべきです。 同じシードでこの関数を呼び出すと、同一のBIP32キーチェーンが生成されます。<aside class="warning"> キーチェーンの作成は、あなたのビットコインを安全に保護するために不可欠のステップです。 新しいキーチェーンを生成する時、このAPIは業界標準に準拠した乱数ジェネレーターをを用います。 自身でシードを提供する場合、作成する際、細心の注意を払わなければいけません。 </aside> </p>

<p>新しいキーチェーンのためのxprvとxpubを含むオブジェクトを返します。作成されたキーチェーンはBitGoサービスに知られません。 BitGoサービスで利用するには、Keychains.Add APIを使用します。</p>

<p>セキュリティ上の理由から、<a href="#encrypt">暗号化</a>の上、盗難を防ぐため元のxprvを即座に破壊することを強く推奨します。</p>

<h2 id="add-keychain">キーチェーンを追加する Add Keychain</h2>
<pre class="highlight shell"><code>curl -X POST <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s1">'{"xpub": "xpub661MyMwAqRbcGn6m3YB7CJ2ToyUJYEsBpCc2UDJP9s3hzFif9dKucLotrJBbLgNqojM4q4Sddweka1WG2NvMccYyo3SpnfRrTvMuXUTpHwC"}'</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/keychain
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"xpub"</span><span class="p">:</span> <span class="s2">"xpub....."</span><span class="p">,</span>
  <span class="s2">"encryptedXprv"</span><span class="p">:</span> <span class="s2">"&lt;encrypted xprv goes here&gt;"</span> <span class="c1">// optional, provide it for the user key</span>
<span class="p">};</span>

<span class="nx">bitgo</span><span class="p">.</span><span class="nx">keychains</span><span class="p">().</span><span class="nx">add</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">keychain</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// handle error</span>
  <span class="p">}</span>
  <span class="c1">// etc</span>
<span class="p">});</span>
</code></pre>

<p>ユーザーの新しいキーチェーンを登録します。少なくとも公開鍵を指定する必要があります。暗号化された秘密鍵はアップロードされることができますが、サーバに対して不透明として扱われます。</p>

<p>アドレスとともに暗号化された秘密鍵を提供する目的は、 BitGoに接続している時ユーザーが、自ら格納する負担なしに彼らの鍵に安全にアクセスできるためです。 ユーザーからの強いパスワードで、サーバに格納された全ての秘密鍵を暗号化することを強くお勧めします。 暗号化はクライアントで実行する必要があります。 便宜のため、BitGoの&rsquo;s<a href="#encrypt">暗号化/復号化関数</a>を使用できますが、あなたの望む任意の暗号化を使用することができます。<aside class="warning"> あながた暗号化されたxprvを提供する場合、このキーチェーンのセキュリティはあなたの暗号化と同程度です。暗号化はあなたの責任です。 </aside> </p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">POST /api/v1/keychain</code></p>

<h3 id="body-body-parameters">BODYパラメーター BODY Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>xpub</td>
<td>文字列</td>
<td>YES</td>
<td>このキーチェーンのBIP32 xpub</td>
</tr>
<tr>
<td>encryptedXprv</td>
<td>文字列</td>
<td>NO</td>
<td>暗号化された、このキーチェーンのBIP32 xpub</td>
</tr>
</tbody></table>

<blockquote>
<p>キーチェーンモデルの応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"xpub"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xpub661MyMwAqRbcGn6m3YB7CJ2ToyUJYEsBpCc2UDJP9s3hzFif9dKucLotrJBbLgNqojM4q4Sddweka1WG2NvMccYyo3SpnfRrTvMuXUTpHwC"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"encryptedXprv"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;encrypted data here&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"ethAddress"</span><span class="p">:</span><span class="s2">"0x49e03847622a266335e2688be6e71a4975fe9615"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="response">応答 Response</h3>

<p>キーチェーンモデルオブジェクトを返します。</p>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>認証パラメーターが一致しない、またはアンロックが必要</td>
</tr>
</tbody></table>

<h2 id="bitgo-create-bitgo-keychain">BitGo キーチェーンを作成する Create BitGo Keychain</h2>
<pre class="highlight shell"><code>curl -X POST <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/keychain/bitgo
</code></pre>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">keychains</span><span class="p">().</span><span class="nx">createBitGo</span><span class="p">({},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">keychain</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// handle error</span>
  <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">keychain</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<p>BitGoのサーバに新しいキーチェーンを作成し、呼び出し元にパブリックキーチェーンを返します。</p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">POST /api/v1/keychain/bitgo</code></p>

<h3 id="body-body-parameters">BODYパラメーター BODY Parameters</h3>

<p>なし。</p>

<blockquote>
<p>キーチェーンモデルの応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"xpub"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xpub661MyMwAqRbcGzVAChrAGb6MYDrAXndUC7h8T7AF8UhfbjS7Au7UKTXmVXaFasQPdfmnUjccreRTMrW7kTmjzwMqVrTHNAFs8M3CXTJpcnL"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"isBitGo"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"ethAddress"</span><span class="p">:</span><span class="s2">"0x49e03847622a266335e2688be6e71a4975fe9615"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="response">応答 Response</h3>

<p>キーチェーンモデルオブジェクトを返します。</p>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>認証パラメーターが一致しない、またはアンロックが必要</td>
</tr>
</tbody></table>

<h2 id="create-backup-keychain">バックアップキーチェーンを作成する Create Backup Keychain</h2>
<pre class="highlight shell"><code>curl -X POST <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s2">"{ </span><span class="se">\"</span><span class="s2">provider</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">lastkeysolutions</span><span class="se">\"</span><span class="s2"> }"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/keychain/backup
</code></pre>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">keychains</span><span class="p">().</span><span class="nx">createBackup</span><span class="p">({</span> <span class="na">provider</span><span class="p">:</span> <span class="s1">'lastkeysolutions'</span> <span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">keychain</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">keychain</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<p>鍵のリカバリーのサービスに特化したサードパーティに、新しいバックアップキーチェーンを作成します。 このキーチェーンはサードパーティサービスに保存され、リカバリーの目的だけで使用されます。</p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">POST /api/v1/keychain/backup</code></p>

<h3 id="body-body-parameters">BODYパラメーター BODY Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>provider</td>
<td>文字列</td>
<td>YES</td>
<td>暗号鍵リカバリーシステム（KRS）の名前または使用するバックアップキープロバイダー</td>
</tr>
</tbody></table>

<blockquote>
<p>キーチェーンモデルの応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"xpub"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xpub661MyMwAqRbcGzVAChrAGb6MYDrAXndUC7h8T7AF8UhfbjS7Au7UKTXmVXaFasQPdfmnUjccreRTMrW7kTmjzwMqVrTHNAFs8M3CXTJpcnL"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"ethAddress"</span><span class="p">:</span><span class="s2">"0x49e03847622a266335e2688be6e71a4975fe9615"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="response">応答 Response</h3>

<p>キーチェーンモデルオブジェクトを返します。</p>

<h2 id="get-keychain">キーチェーンを取得する Get Keychain</h2>
<pre class="highlight shell"><code><span class="nv">XPUB</span><span class="o">=</span>xpub661MyMwAqRbcGn6m3YB7CJ2ToyUJYEsBpCc2UDJP9s3hzFif9dKucLotrJBbLgNqojM4q4Sddweka1WG2NvMccYyo3SpnfRrTvMuXUTpHwC

curl -X POST <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/keychain/<span class="nv">$XPUB</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">keychains</span><span class="p">().</span><span class="nx">get</span><span class="p">({</span><span class="na">xpub</span><span class="p">:</span> <span class="nx">xpub</span><span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">keychain</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">keychain</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<p>xpubでキーチェーンをルックアップする<aside class="info"> この操作では、Unlock APIを使用してセッションをアンロックする必要があります。 </aside> </p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">POST /api/v1/keychain/:xpub</code></p>

<h3 id="url-url-parameters">URLパラメーター URL Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>xpub</td>
<td>文字列</td>
<td>YES</td>
<td>ルックアップするBIP32 xpub</td>
</tr>
</tbody></table>

<blockquote>
<p>キーチェーンモデルの応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"xpub"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xpub661MyMwAqRbcGn6m3YB7CJ2ToyUJYEsBpCc2UDJP9s3hzFif9dKucLotrJBbLgNqojM4q4Sddweka1WG2NvMccYyo3SpnfRrTvMuXUTpHwC"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"ethAddress"</span><span class="p">:</span><span class="s2">"0x49e03847622a266335e2688be6e71a4975fe9615"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"encryptedXprv"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;client-encrypted data here&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="response">応答 Response</h3>

<p>キーチェーンモデルオブジェクトを返します。</p>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>認証パラメーターが一致しない、またはアンロックが必要</td>
</tr>
<tr>
<td>404 Bad Request</td>
<td>Xpub が見つからなかった</td>
</tr>
</tbody></table>

<h2 id="update-keychain">キーチェーンを更新する Update Keychain</h2>
<pre class="highlight shell"><code><span class="nv">XPUB</span><span class="o">=</span>xpub661MyMwAqRbcGn6m3YB7CJ2ToyUJYEsBpCc2UDJP9s3hzFif9dKucLotrJBbLgNqojM4q4Sddweka1WG2NvMccYyo3SpnfRrTvMuXUTpHwC

curl -X PUT <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s1">'{"encryptedXprv": "my encrypted data"}'</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/keychain/<span class="nv">$XPUB</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">xpub</span><span class="p">:</span> <span class="nx">xpub</span><span class="p">,</span>
  <span class="na">encryptedXprv</span><span class="p">:</span> <span class="s2">"&lt;encrypted xprv goes here&gt;"</span>
<span class="p">};</span>
<span class="nx">bitgo</span><span class="p">.</span><span class="nx">keychains</span><span class="p">().</span><span class="nx">update</span><span class="p">(</span><span class="nx">params</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">keychain</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// handle error, do something with keychain</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">keychain</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<p>キーチェーンを更新します。xprvの新しいバージョンを保存したい場合（例えばxprvを暗号化するのに使用したパスワードを変更した場合）に使用されます。<aside class="info"> この操作では、Unlock APIを使用してセッションをアンロックする必要があります。 </aside> <aside class="warning"> encryptedXprvを変更すると、既存の値が上書きされます。 新しい値が正しくない、あるいは新しい値へのパスワードを忘れた場合、このキーチェーンで署名するあなたの能力は永遠に失われます。 </aside> </p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">PUT /api/v1/keychain/:xpub</code></p>

<h3 id="body-body-parameters">BODYパラメーター BODY Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>encryptedXprv</td>
<td>文字列</td>
<td>NO</td>
<td>新たに暗号化された、このキーチェーンのBIP32 xpub</td>
</tr>
</tbody></table>

<blockquote>
<p>キーチェーンモデルの応答例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"xpub"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xpub661MyMwAqRbcGzVAChrAGb6MYDrAXndUC7h8T7AF8UhfbjS7Au7UKTXmVXaFasQPdfmnUjccreRTMrW7kTmjzwMqVrTHNAFs8M3CXTJpcnL"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"encryptedXprv"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;encrypted data here&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"ethAddress"</span><span class="p">:</span><span class="s2">"0x49e03847622a266335e2688be6e71a4975fe9615"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="response">応答 Response</h3>

<p>キーチェーンモデルオブジェクトを返します。</p>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>認証パラメーターが一致しない、またはアンロックが必要</td>
</tr>
<tr>
<td>404 Not Found</td>
<td>Xpub が見つからなかった</td>
</tr>
</tbody></table>

<h1 id="wallets">ウォレット Wallets</h1>

<p>全てのBitGoウォレットはマルチシグ、階層的、かつ決定性のウォレットです。 マルチシグウォレットは<em>N</em>個のキーから成り、トランザクションが有効となる前のトランザクションの署名に<em>M</em>個のキーを必要とします。 <em>M-of-N</em> ウォレットと呼ばれるものです。</p>

<p>BitGoは現在、2-of-3ウォレットのみサポートしています。ポリシー層を用いてm-of-nのアクセス許可モデルをサポートします。</p>

<p>ウォレットを作成するには、3つのキーチェーンが提供されなければなりません。 最初の2つのキーチェーンはユーザーによって提供されます、最後のは、BitGoキーチェーンである必要があります。 BitGoは最初の2つのキーの公開部分を見ることができる一方で、決してこれらのキーのプライベートな部分にアクセスできず、よってユーザー抜きに取引を行うことはできません。 BitGoの単一のキーはトランザクションに署名するのに十分でなく、またBitGoはユーザーが設定したポリシーに従ってのみ、このキーを用います。</p>

<h2 id="list-wallets">ウォレットの一覧を取得する List Wallets</h2>
<pre class="highlight shell"><code>curl -X GET <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/wallet
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">wallets</span> <span class="o">=</span> <span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">();</span>
<span class="nx">wallets</span><span class="p">.</span><span class="nx">list</span><span class="p">({},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallets</span><span class="p">)</span> <span class="p">{</span>
<span class="c1">// handle error, do something with wallets</span>
<span class="k">for</span> <span class="p">(</span><span class="nx">id</span> <span class="k">in</span> <span class="nx">wallets</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">wallets</span><span class="p">[</span><span class="nx">id</span><span class="p">].</span><span class="nx">wallet</span><span class="p">;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">wallet</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">4</span><span class="p">));</span>
<span class="p">}</span>
<span class="p">});</span>
</code></pre>

<p>そのユーザーのウォレットの一覧を取得します</p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/wallet</code></p>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"wallets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"admin"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NAGz3TDs5HmBU2SEodtWyks9n5KXVCzBTf"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"isActive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example wallet"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"permissions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin,spend,view"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"private"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"keychains"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"... truncated for clarity ..."</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"spendingAccount"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"safehd"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"admin"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2MyWgQ3PMAWPenJnHJUPpVjFDLHhaPkZCz5"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"isActive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My wallet"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"permissions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin,spend,view"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"private"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"keychains"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"... truncated for clarity ..."</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"spendingAccount"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"safehd"</span><span class="w">
        </span><span class="p">}</span><span class="w">
        </span><span class="err">...</span><span class="w">
    </span><span class="p">]</span><span class="w">
    </span><span class="s2">"start"</span><span class="err">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">36</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="query-parameters">クエリ パラメーター QUERY Parameters</h3>

<p>| パラメーター | 種類 | 必須か | 説明                                     |
| &mdash;&mdash; | &ndash; | &mdash; | &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash; |
| skip   | 数字 | NO  | 一覧取得を開始するインデックス番号。既定値は0。               |
| limit  | 数字 | NO  | 単一コール(default=25, max=250) で返す結果の最大の件数 |</p>

<h3 id="response">応答 Response</h3>

<p>ウォレットモデルオブジェクトの配列を返します。</p>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>認証パラメーターが一致しない</td>
</tr>
</tbody></table>

<h2 id="add-wallet">ウォレットを追加する Add Wallet</h2>

<aside class="warning"> このメソッドは上級APIユーザー向けで、手動でのキーの生成、ユーザーの仕様、そしてバックアップのキーxPubを可能にします。 SDKのほとんどの場合、<a href="#create-wallet-with-keychains">ウォレットをキーチェーンと作成</a>がウォレットからビットコインを送るためのよりシンプルで推奨のSDKのメソッドになります。 
</aside> 
<pre class="highlight shell"><code><span class="nv">XPUB_USER</span><span class="o">=</span>xpub661MyMwAqRbcF8BFQAaLnkkDar6uHQZn9cvzPX5qdfUL42gyts7YeYHZgWvNVjcUDP8BEDMduMBhtKLnVAKaT3sW1g14xnv29w5D3ts8LVd

<span class="nv">XPUB_BACKUP</span><span class="o">=</span>xpub661MyMwAqRbcF3MqMfvo7swQwRzEVRyCPry4rmp346Dv6zR4CNFzrtu4bMpeNazCNNa9p3p5z56svzRcnF9LEm3Ha2zSgq2cLrperm7z4oh

<span class="nv">XPUB_BITGO</span><span class="o">=</span>xpub661MyMwAqRbcG96fDEgYGmjKwdQvxG38rr9gTcqszjdU1s5kjLkTD8pTDxYf4ECrkVbGdpTktuc2BwUR1YKvTdNu5U8mxnDp68QAnvdy1WE

curl -X POST <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s2">"{ </span><span class="se">\"</span><span class="s2">label</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">My Test Wallet</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">m</span><span class="se">\"</span><span class="s2">: 2, </span><span class="se">\"</span><span class="s2">n</span><span class="se">\"</span><span class="s2">: 3, </span><span class="se">\"</span><span class="s2">keychains</span><span class="se">\"</span><span class="s2">: [{</span><span class="se">\"</span><span class="s2">xpub</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$XPUB_USER</span><span class="se">\"</span><span class="s2">}, {</span><span class="se">\"</span><span class="s2">xpub</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$XPUB_BACKUP</span><span class="se">\"</span><span class="s2">}, {</span><span class="se">\"</span><span class="s2">xpub</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$XPUB_BITGO</span><span class="se">\"</span><span class="s2">}] }"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/wallet
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"label"</span><span class="p">:</span> <span class="s2">"My Wallet"</span><span class="p">,</span>
  <span class="s2">"m"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="s2">"n"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="s2">"keychains"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span> <span class="s2">"xpub"</span><span class="p">:</span> <span class="s2">"xPub of user keychain (may be created with keychains.create)"</span><span class="p">},</span>
    <span class="p">{</span> <span class="s2">"xpub"</span><span class="p">:</span> <span class="s2">"xPub of backup keychain (may be created with keychains.create or keychains.createBackup)"</span><span class="p">},</span>
    <span class="p">{</span> <span class="s2">"xpub"</span><span class="p">:</span> <span class="s2">"xPub of BitGo keychain (created with keychains.createBitGo)"</span><span class="p">}</span>
  <span class="p">]</span>
<span class="p">};</span>
<span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">add</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// handle error</span>
  <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">wallet</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<p>このAPIはユーザーの新しいウォレットを作成します。新しいウォレットとともに利用するキーチェーンは、このAPIを利用するのに先立ってBitGoに登録する必要があります。</p>

<p>BitGoは現在、2-of-3 (例： m=2 and n=3) ウォレットのみをサポートしています。 3つ目のキーチェーン、そして3番目のキーチェーン<strong>だけ</strong>は、<em>BitGoキーでなければなりません</em>。 1つめのキーチェーンは慣例的にユーザーキーで、その<strong>暗号化された</strong>xprivはBitGoに保管されます。</p>

<p>BitGoウォレットは、3つのキーチェーンともに現在<strong>m/0/0</strong>をrootとしてハードコードされています（ただし、古いレガシーウォレットは異なるキーのパスを使用している場合があります）。 ルートの下で、ウォレットは0と1のアドレスの2つのチェーンをサポートします。 <strong>0-chain</strong> は外部の受信アドレスは向けで、一方<strong>1-chain</strong> は内部の(お釣りの) アドレスです。</p>

<p>最初のウォレットの受取アドレスはBIP32のパス <strong>m/0/0/0/0</strong>にあり、同時にBitGoのシステム内のウォレットを参照するためのIDです。 最初のお釣りアドレスは<strong>m/0/0/1/0</strong>にあります。 </aside></p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">POST /api/v1/wallet</code></p>

<h3 id="body-body-parameters">BODYパラメーター BODY Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>label</td>
<td>文字列</td>
<td>YES</td>
<td>このウォレットのラベル</td>
</tr>
<tr>
<td>m</td>
<td>数字</td>
<td>YES</td>
<td>取得に必要な署名の数（2でなければならない）</td>
</tr>
<tr>
<td>n</td>
<td>数字</td>
<td>YES</td>
<td>ウォレットにあるキーの数（3でなければならない）</td>
</tr>
<tr>
<td>keychains</td>
<td>配列</td>
<td>YES</td>
<td>このウォレットで使用する<strong>n</strong>個のキーチェーンxpubsの配列; BitGoキーでなければならない。</td>
</tr>
<tr>
<td>enterprise</td>
<td>文字列</td>
<td>NO</td>
<td>このウォレットを作成するエンタープライズID。</td>
</tr>
<tr>
<td>disableTransactionNotifications</td>
<td>ブーリアン</td>
<td>NO</td>
<td>ウォレットトランザクション通知を止めるにはtrueに設定</td>
</tr>
</tbody></table>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"2MsajnHwkzQvggkb6Zbi7kaLMcpeCko4BKB"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"label"</span><span class="p">:</span><span class="s2">"My Test Wallet"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"isActive"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"private"</span><span class="p">:{</span><span class="w">
    </span><span class="nt">"keychains"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"xpub"</span><span class="p">:</span><span class="s2">"xpub661MyMwAqRbcF8BFQAaLnkkDar6uHQZn9cvzPX5qdfUL42gyts7YeYHZgWvNVjcUDP8BEDMduMBhtKLnVAKaT3sW1g14xnv29w5D3ts8LVd"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"path"</span><span class="p">:</span><span class="s2">"/0/0"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"xpub"</span><span class="p">:</span><span class="s2">"xpub661MyMwAqRbcF3MqMfvo7swQwRzEVRyCPry4rmp346Dv6zR4CNFzrtu4bMpeNazCNNa9p3p5z56svzRcnF9LEm3Ha2zSgq2cLrperm7z4oh"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"path"</span><span class="p">:</span><span class="s2">"/0/0"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"xpub"</span><span class="p">:</span><span class="s2">"xpub661MyMwAqRbcG96fDEgYGmjKwdQvxG38rr9gTcqszjdU1s5kjLkTD8pTDxYf4ECrkVbGdpTktuc2BwUR1YKvTdNu5U8mxnDp68QAnvdy1WE"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"path"</span><span class="p">:</span><span class="s2">"/0/0"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"permissions"</span><span class="p">:</span><span class="s2">"admin,spend,view"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"admin"</span><span class="p">:{},</span><span class="w">
  </span><span class="nt">"spendingAccount"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"confirmedBalance"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"balance"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"pendingApprovals"</span><span class="p">:[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="response">応答 Response</h3>

<p>ウォレットモデルオブジェクトを返します。</p>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>認証パラメーターが一致しない</td>
</tr>
<tr>
<td>406 Not acceptable</td>
<td>提供されたキーチェーンの一つが受け入れ不可</td>
</tr>
</tbody></table>

<h2 id="get-wallet">ウォレットを取得する Get Wallet</h2>
<pre class="highlight shell"><code><span class="nv">WALLET</span><span class="o">=</span>2N76BgbTnLJz9WWbXw15gp6K9mE5wrP4JFb

curl -X GET <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/wallet/<span class="nv">$WALLET</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">wallets</span> <span class="o">=</span> <span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"bitcoin"</span><span class="p">,</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"2N76BgbTnLJz9WWbXw15gp6K9mE5wrP4JFb"</span><span class="p">,</span>
<span class="p">};</span>
<span class="nx">wallets</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// handle error</span>
  <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">wallet</span><span class="p">);</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">wallets</span> <span class="o">=</span> <span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"bitcoin"</span><span class="p">,</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"2My4uGbvFoBvBtLpADVTTai1w6roxQafJki"</span><span class="p">,</span>
<span class="p">};</span>
<span class="nx">wallets</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// handle error</span>
  <span class="p">}</span>
  <span class="c1">// Use wallet object here</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">wallet</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">wallet</span><span class="p">.</span><span class="nx">balance</span><span class="p">());</span>
<span class="p">});</span>

</code></pre>

<p>ウォレット情報をルックアップし、残高、アクセス許可等を含むウォレットモデルを返します。ウォレットのIDはその最初の受信アドレスです(/0/0)。</p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/wallet/:id</code></p>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"2N76BgbTnLJz9WWbXw15gp6K9mE5wrP4JFb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"label"</span><span class="p">:</span><span class="s2">"TestNet Wallet"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"isActive"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"safehd"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"private"</span><span class="p">:{</span><span class="w">
    </span><span class="nt">"keychains"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"xpub"</span><span class="p">:</span><span class="s2">"xpub681KE1ZbZM8UNecAGowRFH1vJfxrhzA3fMwKHB5yRs7YGU4FQUPJdbZdTaRuyweAXGDSrJt3AWDuDsoXh4CD4h43GPPzAq2H7Cb18xHGivZ"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"path"</span><span class="p">:</span><span class="s2">"/101"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"_id"</span><span class="p">:</span><span class="s2">"536d3cc573c8329a78000016"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"xpub"</span><span class="p">:</span><span class="s2">"xpub661MyMwAqRbcGZp3eJrpEW1VzomFeDqs2nd9vdZhLFdazv2ekEznRZB2BTPVwrcacYTCvy7mPjxw3F9joMCji4WFgxsgd7J5SxkHuRbUNjx"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"path"</span><span class="p">:</span><span class="s2">"/102"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"_id"</span><span class="p">:</span><span class="s2">"536d3cc573c8329a78000015"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"xpub"</span><span class="p">:</span><span class="s2">"xpub661MyMwAqRbcGR4F5XxMfiHGPycWehJT9XA5KZJg4aBcNZogiWnrDMowki4ZsCtZdWFUtHRxMnhTnm9XMEyxSVV7Am9eG7xUnxL3aoAt88d"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"path"</span><span class="p">:</span><span class="s2">"/103"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"_id"</span><span class="p">:</span><span class="s2">"536d3cc573c8329a78000014"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"permissions"</span><span class="p">:</span><span class="s2">"admin,spend,view"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"admin"</span><span class="p">:{</span><span class="w">
    </span><span class="nt">"policy"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"transactionLimit"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"condition"</span><span class="p">:{</span><span class="w">
          </span><span class="nt">"currency"</span><span class="p">:</span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"amount"</span><span class="p">:</span><span class="mi">10</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"action"</span><span class="p">:{</span><span class="w">
          </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"getApproval"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"dailyLimit"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"condition"</span><span class="p">:{</span><span class="w">
          </span><span class="nt">"currency"</span><span class="p">:</span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"action"</span><span class="p">:{</span><span class="w">
          </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"getApproval"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"users"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"user"</span><span class="p">:</span><span class="s2">"51f4a86305b9442c68000005c4666e34ff33aba3d78a2d3197e7b46b"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"permissions"</span><span class="p">:</span><span class="s2">"admin,spend,view"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"user"</span><span class="p">:</span><span class="s2">"53532a4b43fd69a42f000005f0a2ed87fd8b020040739beb513524b5"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"permissions"</span><span class="p">:</span><span class="s2">"admin,spend,view"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"user"</span><span class="p">:</span><span class="s2">"52e41fcec1a256b31c00001a5ba4eff09976d7278cbce93fcfeb8b25"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"permissions"</span><span class="p">:</span><span class="s2">"admin,spend,view"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"user"</span><span class="p">:</span><span class="s2">"53796821a75b0358c626a4ad16fa7fc4f824cbb58e4a88a5bbc04611"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"permissions"</span><span class="p">:</span><span class="s2">"spend,view"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"spendingAccount"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"confirmedBalance"</span><span class="p">:</span><span class="mi">39564772124</span><span class="p">,</span><span class="w">
  </span><span class="nt">"balance"</span><span class="p">:</span><span class="mi">39564772124</span><span class="p">,</span><span class="w">
  </span><span class="nt">"pendingApprovals"</span><span class="p">:[</span><span class="w"> </span><span class="p">],</span><span class="w">
  </span><span class="nt">"canSendInstant"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="response">応答 Response</h3>

<p>ウォレットモデルオブジェクトを返します。</p>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>ウォレットのid(同時に最初の受信アドレス)</td>
</tr>
<tr>
<td>label</td>
<td>UIに表示されている通りのウォレットのラベル</td>
</tr>
<tr>
<td>index</td>
<td>チェーン内(0, 1, 2, &hellip;) のアドレスのインデックス</td>
</tr>
<tr>
<td>private</td>
<td>キーチェーンの要約版が含まれている</td>
</tr>
<tr>
<td>permissions</td>
<td>このウォレットへのユーザーのアクセス許可</td>
</tr>
<tr>
<td>admin</td>
<td>ウォレットの管理者に関するポリシー情報</td>
</tr>
<tr>
<td>pendingApprovals</td>
<td>ウォレットの保留中のトランザクション承認</td>
</tr>
<tr>
<td>confirmedBalance</td>
<td>確認された残高</td>
</tr>
<tr>
<td>balance</td>
<td>確認が0回のトランザクションを含む残高</td>
</tr>
<tr>
<td>canSendInstant</td>
<td>ウォレットが、二重支払いに対するBitGoの保証が付いた即座取引を送信する資格を持つかを示すブーリアン</td>
</tr>
</tbody></table>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>認証パラメーターが一致しない</td>
</tr>
<tr>
<td>404 Not Found</td>
<td>ウォレットが見つからなかった</td>
</tr>
<tr>
<td>406 Not acceptable</td>
<td>提供されたキーチェーンの一つが受け入れ不可</td>
</tr>
</tbody></table>

<h2 id="create-wallet-with-keychains">キーチェーンと使用するウォレットを作成 Create Wallet With Keychains</h2>
<pre class="highlight shell"><code>ローカル メソッドとしてのみ使用できます <span class="o">(</span>BitGo Express<span class="o">)</span> 
上級ユーザーはCreate Wallet API を検討してください。

<span class="nv">WALLETPASSPHRASE</span><span class="o">=</span><span class="s1">'newverylongishsecretivepassword'</span>
<span class="nv">LABEL</span><span class="o">=</span><span class="s1">'nicenewpurse'</span>

curl -X POST <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s2">"{ </span><span class="se">\"</span><span class="s2">passphrase</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$WALLETPASSPHRASE</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">label</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$LABEL</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">backupXpub</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$BACKUPXPUB</span><span class="se">\"</span><span class="s2"> }"</span> <span class="se">\</span>
http://<span class="nv">$BITGO_EXPRESS_HOST</span>:3080/api/v1/wallets/simplecreate
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"passphrase"</span><span class="p">:</span> <span class="nx">password</span><span class="p">,</span>
  <span class="s2">"label"</span><span class="p">:</span> <span class="nx">label</span><span class="p">,</span>
  <span class="s2">"backupXpubProvider"</span><span class="p">:</span> <span class="s2">"keyternal"</span>
<span class="p">}</span>

<span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">createWalletWithKeychains</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">"Could not create wallet!"</span><span class="p">);</span> <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">wallet</span><span class="p">.</span><span class="nx">wallet</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"User keychain encrypted xPrv: "</span> <span class="o">+</span> <span class="nx">result</span><span class="p">.</span><span class="nx">userKeychain</span><span class="p">.</span><span class="nx">encryptedXprv</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Backup keychain xPub: "</span> <span class="o">+</span> <span class="nx">result</span><span class="p">.</span><span class="nx">backupKeychain</span><span class="p">.</span><span class="nx">xPub</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<p>このメソッドはウォレットを作成する簡単な方法として、クライアントSDKで利用可能です。メソッドは次のことを行います。</p>

<ol>
<li>ユーザー キーチェーンとバックアップのキーチェーンを作成する</li>
<li>ユーザー キーチェーンを暗号化する</li>
<li>暗号化されたユーザーキーチェーンとバックアップキーチェーンをBitGoにアップロードする</li>
<li>サービス上で BitGo キーを作成する</li>
<li>上の公開鍵でBitGoでウォレットを作成する<aside class="warning"> ユーザーが彼らのユーザーとバックアップのキーを印刷/バックアップを取ることは<strong>非常に重要</strong>です。 やっておかなければ、資金の喪失という結果になり得ます！ </aside> </li>
</ol>

<h3 id="bitgo-bitgo-instant-wallets">BitGo インスタントウォレット BitGo Instant Wallets</h3>

<p>デフォルトで、このメソッドはバックアップのキーチェーンをローカルで作成します。 BitGo Instantを送信するのに使用できるウォレットを作成するには、<strong>backupXpubProvider</strong>パラメーターを使用して、暗号鍵リカバリーシステム(KRS)を指定します（例：keyternal）。</p>

<h3 id="method-parameters">メソッドのパラメーター Method Parameters</h3>

<table><thead>
<tr>
<th>名</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>passphrase</td>
<td>文字列</td>
<td>YES</td>
<td>BitGoへの送信前に、ウォレットのユーザーキーを暗号化するのに使用されるパスフレーズ</td>
</tr>
<tr>
<td>label</td>
<td>文字列</td>
<td>YES</td>
<td>このウォレットのラベル</td>
</tr>
<tr>
<td>backupXpub</td>
<td>文字列</td>
<td>NO</td>
<td>決して2つの秘密鍵が同じマシンに存在しないよう、もう一つのデバイスで作成されたバックアップキーチェーンの公開鍵。あなたのキーをリモートでホスティングするオプションとしてbackupXpubProviderも参照下さい。</td>
</tr>
<tr>
<td>backupXpubProvider</td>
<td>文字列</td>
<td>NO</td>
<td>お望みの暗号鍵リカバリーシステム(KRS)でバックアップxPubを作成する（例：keyternal）。そうすると、そのウォレットはBitGo Instantと互換性を持ちます。</td>
</tr>
<tr>
<td>enterprise</td>
<td>文字列</td>
<td>NO</td>
<td>このウォレットを作成するエンタープライズID。</td>
</tr>
<tr>
<td>disableTransactionNotifications</td>
<td>ブーリアン</td>
<td>NO</td>
<td>ウォレットトランザクション通知を止めるにはtrueに設定。</td>
</tr>
</tbody></table>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w"> </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NAGz3TDs5HmBU2SEodtWyks9n5KXVCzBTf"</span><span class="p">,</span><span class="w">
 </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"testwallet"</span><span class="p">,</span><span class="w">
 </span><span class="nt">"isActive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
 </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"safehd"</span><span class="p">,</span><span class="w">
 </span><span class="nt">"private"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"keychains"</span><span class="p">:</span><span class="w"> </span><span class="p">[{}]</span><span class="w"> </span><span class="p">},</span><span class="w">
 </span><span class="nt">"permissions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin,spend,view"</span><span class="p">,</span><span class="w">
 </span><span class="nt">"admin"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
 </span><span class="nt">"spendingAccount"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
 </span><span class="nt">"confirmedBalance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
 </span><span class="nt">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
 </span><span class="nt">"pendingApprovals"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>

<p>User keychain encrypted xPrv: {&ldquo;iv&rdquo;:&ldquo;v2aVEG5A8VwnI+ewS&hellip;&rdquo;}
    Backup keychain encrypted xPrv: {&ldquo;iv&rdquo;:&ldquo;vNOUQpzUmHNPwKt&hellip;&rdquo;}</p>

<h3 id="response">応答 Response</h3>

<table><thead>
<tr>
<th>応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>wallet</td>
<td>ウォレットモデル オブジェクト</td>
</tr>
<tr>
<td>userKeychain</td>
<td>暗号化されたxprvがBitGoに格納された、新たに作成されたユーザーキーチェーン　ーバックアップを取ること</td>
</tr>
<tr>
<td>backupKeychain</td>
<td>新たに作成されたバックアップキーチェーン ーバックアップを取ること</td>
</tr>
</tbody></table>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>認証パラメーターが一致しない</td>
</tr>
<tr>
<td>406 Not acceptable</td>
<td>提供されたキーチェーンの一つが受け入れ不可</td>
</tr>
</tbody></table>

<h1 id="wallet-operations-basic">ウォレットの操作 ー基礎編 Wallet Operations - Basic</h1>

<p>各ウォレットは多くのアドレスから成り、それぞれのアドレスをビットコインの受取りに使用できます。 Wallet APIはユーザーがウォレットと対話するための役に立つインターフェースを提供します。</p>

<h2 id="create-address">アドレスを作成する Create Address</h2>

<p>既存のウォレットのための新たなアドレスを作成する。 BitGoウォレットは、0、1と呼ばれる2つの独立したアドレスのチェーンで構成されています。 0-チェーンは通常資金の受取に使用され、一方1-チェーンはウォレットから出費する際、お釣りの作成に内部的に使用されます。 プライバシーを最大化する助けとするには、着信した各トランザクションごとに新しいアドレスを生成するのがベストプラクティスと見なされます。</p>
<pre class="highlight shell"><code><span class="nv">CHAIN</span><span class="o">=</span>0
<span class="nv">WALLETID</span><span class="o">=</span><span class="s2">"3GonoRKFSzcqJCktZPA2NHDd3jJoH4154o"</span>
curl -X POST -H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/wallet/<span class="nv">$WALLETID</span>/address/<span class="nv">$CHAIN</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="s1">'2My4uGbvFoBvBtLpADVTTai1w6roxQafJki'</span><span class="p">;</span>
<span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">get</span><span class="p">({</span> <span class="s2">"id"</span><span class="p">:</span> <span class="nx">id</span> <span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">wallet</span><span class="p">.</span><span class="nx">createAddress</span><span class="p">({</span> <span class="s2">"chain"</span><span class="p">:</span> <span class="mi">0</span> <span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">address</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">address</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">POST /api/v1/wallet/:walletId/address/:chain</code></p>

<h3 id="url-url-parameters">URLパラメーター URL Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>walletid</td>
<td>ビットコインアドレス(文字列)</td>
<td>YES</td>
<td>ウォレットのID</td>
</tr>
<tr>
<td>チェーン</td>
<td>数字</td>
<td>YES</td>
<td>0 または 1</td>
</tr>
</tbody></table>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3GonoRKFSzcqJCktZPA2NHDd3jJoH4154o"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"chain"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
  </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/0/42"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"redeemScript"</span><span class="p">:</span><span class="w"> </span><span class="s2">"522102d83bba35a8022c247b645eed6f81ac41b7c1580de550e7e82c75ad63ee9ac2fd2103aeb681df5ac19e449a872b9e9347f1db5a0394d2ec5caf2a9c143f86e232b0d92103d728ad6758d4784effea04d47baafa216cf474866c2d4dc99b1e8e3eb936e73053ae"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="response">応答 Response</h3>

<p>ウォレットと紐付けられる新しいビットコインアドレスを返す。</p>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>address</td>
<td>連鎖アドレス</td>
</tr>
<tr>
<td>chain</td>
<td>the chain (0 or 1)</td>
</tr>
<tr>
<td>index</td>
<td>チェーン内(0, 1, 2, &hellip;) のアドレスのインデックス</td>
</tr>
<tr>
<td>path</td>
<td>ウォレットのrootに対するアドレスのBIP32パス</td>
</tr>
<tr>
<td>redeemScript</td>
<td>アドレスの redeemScript</td>
</tr>
</tbody></table>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>認証パラメーターが一致しない</td>
</tr>
<tr>
<td>403 Forbidden</td>
<td>ウォレットがマルチシグBIP32(SafeHD) ウォレットではない</td>
</tr>
<tr>
<td>404 Not Found</td>
<td>ウォレットが見つからなかった</td>
</tr>
<tr>
<td>406 Not acceptable</td>
<td>提供されたキーチェーンの一つが受け入れ不可</td>
</tr>
</tbody></table>

<h2 id="send-coins-to-address">アドレスにコインを送信する Send Coins to Address</h2>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">destinationAddress</span> <span class="o">=</span> <span class="s1">'2N4Xz4itCdKKUREiySS7oBzoXUKnuxP4nRD'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">amountSatoshis</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="mi">1</span><span class="nx">e8</span><span class="p">;</span> <span class="c1">// send 0.1 bitcoins</span>
<span class="kd">var</span> <span class="nx">walletPassphrase</span> <span class="o">=</span> <span class="s1">'incorrect horse battery stable'</span> <span class="c1">// replace with wallet passphrase</span>

<span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">get</span><span class="p">({</span><span class="na">id</span><span class="p">:</span> <span class="nx">walletId</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Error getting wallet!"</span><span class="p">);</span> <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="k">return</span> <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Balance is: "</span> <span class="o">+</span> <span class="p">(</span><span class="nx">wallet</span><span class="p">.</span><span class="nx">balance</span><span class="p">()</span> <span class="o">/</span> <span class="mi">1</span><span class="nx">e8</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">4</span><span class="p">));</span>

  <span class="nx">wallet</span><span class="p">.</span><span class="nx">sendCoins</span><span class="p">({</span> <span class="na">address</span><span class="p">:</span> <span class="nx">destinationAddress</span><span class="p">,</span> <span class="na">amount</span><span class="p">:</span> <span class="nx">amountSatoshis</span><span class="p">,</span> <span class="na">walletPassphrase</span><span class="p">:</span> <span class="nx">walletPassphrase</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Error sending coins!"</span><span class="p">);</span> <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="k">return</span> <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="p">}</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight shell"><code>ローカル メソッドとしてのみ使用できます <span class="o">(</span>BitGo Express<span class="o">)</span> 
上級ユーザーはSend Transaction API を検討してください。

<span class="nv">WALLETID</span><span class="o">=</span><span class="s1">'2NB5G2jmqSswk7C427ZiHuwuAt1GPs5WeGa'</span>
<span class="nv">DESTINATIONADDRESS</span><span class="o">=</span><span class="s1">'2N9JiEUYgRwKAw6FfnUca54VUeaSYSL9qqG'</span>
<span class="nv">AMOUNT</span><span class="o">=</span>1000000
<span class="nv">WALLETPASSPHRASE</span><span class="o">=</span><span class="s1">'password'</span>

curl -X POST <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s2">"{ </span><span class="se">\"</span><span class="s2">address</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$DESTINATIONADDRESS</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">amount</span><span class="se">\"</span><span class="s2">: </span><span class="nv">$AMOUNT</span><span class="s2">, </span><span class="se">\"</span><span class="s2">walletPassphrase</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$WALLETPASSPHRASE</span><span class="se">\"</span><span class="s2"> }"</span> <span class="se">\</span>
http://<span class="nv">$BITGO_EXPRESS_HOST</span>:3080/api/v1/wallet/<span class="nv">$WALLETID</span>/sendcoins
</code></pre>

<p>コインをBitGoウォレットから指定のビットコインアドレスへ送る最も簡単な方法。<aside class="info"> この操作では、Unlock APIを使用してセッションをアンロックする必要があります。 </aside> </p>

<p>このメソッドはクライアント側で次を行います：</p>

<ul>
<li>格納されているキーチェーンについてサーバで（暗号化された秘密鍵で）ウォレットをポーリングすることにより、ユーザーキーチェーンを取得する</li>
<li>ユーザー キーを復号化します</li>
<li>指定アドレスへのトランザクションを作成し、お釣りは新たに作成されたウォレットのチェーンアドレス（/1 のパス）に送信される</li>
<li>復号化されたユーザー キーでトランザクションに署名します</li>
</ul>

<p>処理されるために、部分的に署名されたトランザクションをBitGoサーバに送信します。そこで私達は：</p>

<ul>
<li>潜在的に、他のウォレット管理者からの追加の承認を集める</li>
<li>最後の署名を適用する</li>
<li>ビットコインP2Pネットワークへトランザクションをブロードキャストする</li>
</ul>

<h3 id="parameters">パラメーター Parameters</h3>

<table><thead>
<tr>
<th>名</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>address</td>
<td>文字列</td>
<td>YES</td>
<td>宛先ビットコインアドレス</td>
</tr>
<tr>
<td>amount</td>
<td>数字</td>
<td>YES</td>
<td>送信される額（単位はSatoshi）、例 1BTCの1/10 は100.1*1e8</td>
</tr>
<tr>
<td>walletPassphrase</td>
<td>文字列</td>
<td>YES</td>
<td>ウォレットのパスフレーズ、暗号化されたユーザーキーを（クライアント側で）復号するのに使用される</td>
</tr>
<tr>
<td>fee</td>
<td>数字</td>
<td>NO</td>
<td>手数料（単位はSatoshi）、空欄のままだと自動で検出される。十分であることが確実でない限り指定しないで下さい。</td>
</tr>
<tr>
<td>message</td>
<td>文字列</td>
<td>NO</td>
<td>ユーザーが提供した文字列(ブロックチェーンに送られることはない)</td>
</tr>
<tr>
<td>feeTxConfirmTarget</td>
<td>数字</td>
<td>NO</td>
<td>キロバイトごとの手数料を計算し、この数のブロックでのトランザクションの確認をターゲットにする。デフォルト: 2 最小：2 最大: 20</td>
</tr>
<tr>
<td>minConfirms</td>
<td>数字</td>
<td>NO</td>
<td>一定の数の確認があった消費されていないインプットだけを選択する。これを1に設定し、enforceMinConfirmsForChangeを使用することを私達は推奨します。</td>
</tr>
<tr>
<td>enforceMinConfirms ForChange</td>
<td>ブーリアン</td>
<td>NO</td>
<td>デフォルトはfalse。 ウォレットのお釣りアドレスからの、まだ消費されていないそれのminConfirms （上で説明）数の確認を要求するには、trueに設定する。 Falseに設定された場合、minConfirmsはユーザーのウォレットとは異なるウォレットからの、まだ消費されていないそれにのみ適用されます(お釣りでないアドレス)。</td>
</tr>
<tr>
<td>sequenceId</td>
<td>文字列</td>
<td>NO</td>
<td>このトランザクションの状態を、署名の前後で一意に識別するのに使用することができるユーザー提供のカスタム文字列</td>
</tr>
<tr>
<td>instant</td>
<td>ブーリアン</td>
<td>NO</td>
<td>BitGoの二重支払いに対するインスタント保証が付いたトランザクションの送信をリクエストする際、trueに設定</td>
</tr>
<tr>
<td>otp</td>
<td>文字列</td>
<td>NO</td>
<td>&ldquo;getOTP&quot;アクションタイプのポリシーをを迂回するのに使用される7桁のコード。詳細については<a href="#wallet-policy">ウォレットポリシー</a>を参照してください。</td>
</tr>
</tbody></table>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w"> </span><span class="nt">"tx"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0100000001a366332472cebceabdd541beb582d5dbaaecccdbec639b0a2d2b..."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b3bd8ac76de2340c1159337acdfcaabf08a9470e8157870bd1d84631a0acc67b"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"signed"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"instant"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"instantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56651c4c4e82b975616b58647c77fe1dc"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>応答の例(ウォレットポリシーのため保留中の承認が必要)</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"exceeds daily limit"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"pendingApproval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56050b1368217cde3667fcfe0157556b"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"triggeredPolicy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5578defa5e44dbcb20c0caf98b297ad7"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pendingApproval"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="success-response">成功レスポンス Success Response</h3>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>tx</td>
<td>署名されたトランザクションの16進数でエンコードされた形式</td>
</tr>
<tr>
<td>hash</td>
<td>トランザクション id</td>
</tr>
<tr>
<td>fee</td>
<td>このトランザクションの一部としてビットコインマイナーに送信されたsatoshi単位の金額</td>
</tr>
<tr>
<td>feeRate</td>
<td>このトランザクションの一部としてビットコインマイナーに送信された1KBあたりのsatoshi単位の金額</td>
</tr>
</tbody></table>

<h3 id="policy-failure-response">ポリシー/エラー応答 Policy/Failure Response</h3>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>error</td>
<td>この保留中の承認をトリガーしたポリシーからのメッセージ</td>
</tr>
<tr>
<td>pendingApproval</td>
<td>保留中の承認のidで、別のユーザーにより承認される必要がある</td>
</tr>
<tr>
<td>otp</td>
<td>発射されたポリシーが&quot;getOTP&quot;タイプだった場合、trueに設定</td>
</tr>
<tr>
<td>triggeredPolicy</td>
<td>この保留中の承認をトリガーしたポリシーのid</td>
</tr>
<tr>
<td>status</td>
<td>トランザクションのステータス</td>
</tr>
</tbody></table>

<h2 id="send-coins-to-multiple-addresses">複数のアドレスにコインを送信する Send Coins to Multiple Addresses</h2>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">recipients</span> <span class="o">=</span> <span class="p">[];</span>
<span class="nx">recipients</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="na">address</span><span class="p">:</span> <span class="s1">'2N4Xz4itCdKKUREiySS7oBzoXUKnuxP4nRD'</span><span class="p">,</span> <span class="na">amount</span><span class="p">:</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="mi">1</span><span class="nx">e8</span><span class="p">});</span>
<span class="nx">recipients</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="na">address</span><span class="p">:</span> <span class="s1">'2NGJP7z9DZwyVjtY32YSoPqgU6cG2QXpjHu'</span><span class="p">,</span> <span class="na">amount</span><span class="p">:</span> <span class="mf">0.2</span> <span class="o">*</span> <span class="mi">1</span><span class="nx">e8</span><span class="p">});</span>

<span class="kd">var</span> <span class="nx">walletPassphrase</span> <span class="o">=</span> <span class="s1">'incorrect horse battery stable'</span> <span class="c1">// replace with wallet passphrase</span>

<span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">get</span><span class="p">({</span><span class="na">id</span><span class="p">:</span> <span class="nx">walletId</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Error getting wallet!"</span><span class="p">);</span> <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="k">return</span> <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Balance is: "</span> <span class="o">+</span> <span class="p">(</span><span class="nx">wallet</span><span class="p">.</span><span class="nx">balance</span><span class="p">()</span> <span class="o">/</span> <span class="mi">1</span><span class="nx">e8</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">4</span><span class="p">));</span>

  <span class="nx">wallet</span><span class="p">.</span><span class="nx">sendMany</span><span class="p">({</span> <span class="na">recipients</span><span class="p">:</span> <span class="nx">recipients</span><span class="p">,</span> <span class="na">walletPassphrase</span><span class="p">:</span> <span class="nx">walletPassphrase</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Error sending coins!"</span><span class="p">);</span> <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="k">return</span> <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="p">}</span>
</code></pre>
<pre class="highlight shell"><code>ローカル メソッドとしてのみ使用できます <span class="o">(</span>BitGo Express<span class="o">)</span> 
上級ユーザーはSend Transaction API を検討してください。

<span class="nv">WALLETID</span><span class="o">=</span><span class="s1">'2NB5G2jmqSswk7C427ZiHuwuAt1GPs5WeGa'</span>
<span class="nv">WALLETPASSPHRASE</span><span class="o">=</span><span class="s1">'watashinobitcoin'</span>

curl -X POST <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s2">"{ </span><span class="se">\"</span><span class="s2">recipients</span><span class="se">\"</span><span class="s2">: [{ </span><span class="se">\"</span><span class="s2">address</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">2N4Xz4itCdKKUREiySS7oBzoXUKnuxP4nRD</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">amount</span><span class="se">\"</span><span class="s2">: 1500000}, { </span><span class="se">\"</span><span class="s2">address</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">2NGJP7z9DZwyVjtY32YSoPqgU6cG2QXpjHu</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">amount</span><span class="se">\"</span><span class="s2">: 2500000 }], </span><span class="se">\"</span><span class="s2">walletPassphrase</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$WALLETPASSPHRASE</span><span class="se">\"</span><span class="s2"> }"</span> <span class="se">\</span>
http://<span class="nv">$BITGO_EXPRESS_HOST</span>:3080/api/v1/wallet/<span class="nv">$WALLETID</span>/sendmany
</code></pre>

<p>ビットコインを、一回のトランザクションで複数の宛先アドレスに送信するのに便利な関数。<aside class="info"> この操作では、Unlock APIを使ってセッションをアンロックすることが必要です。 </aside> </p>

<h3 id="parameters">パラメーター Parameters</h3>

<table><thead>
<tr>
<th>名</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>recipients</td>
<td>文字列</td>
<td>YES</td>
<td>受信者オブジェクトの配列とそれぞれに送信する金額。例 [{address: &lsquo;38BKDNZbPcLogvVbcx2ekJ9E6Vv94DqDqw&rsquo;, amount: 1500}, ..]</td>
</tr>
<tr>
<td>message</td>
<td>文字列</td>
<td>NO</td>
<td>そのトランザクションに関するメモ</td>
</tr>
<tr>
<td>fee</td>
<td>数字</td>
<td>NO</td>
<td>手数料（単位はSatoshi）、空欄のままだと自動で検出される。十分であることが確実でない限り指定しないで下さい。</td>
</tr>
<tr>
<td>feeTxConfirmTarget</td>
<td>数字</td>
<td>NO</td>
<td>キロバイトごとの手数料を計算し、この数のブロックでのトランザクションの確認をターゲットにする。デフォルト: 2 最小：2 最大: 20</td>
</tr>
<tr>
<td>minConfirms</td>
<td>数字</td>
<td>NO</td>
<td>一定の数の確認があった消費されていないインプットだけを選択する。これを1に設定し、enforceMinConfirmsForChangeを使用することを私達は推奨します。</td>
</tr>
<tr>
<td>enforceMinConfirms ForChange</td>
<td>ブーリアン</td>
<td>NO</td>
<td>デフォルトではfalse。トランザクションを構築する時、minConfirmsはウォレットからでない消費されなかった資金の時のみ適用されます。</td>
</tr>
<tr>
<td>sequenceId</td>
<td>文字列</td>
<td>NO</td>
<td>このトランザクションの状態を、署名の前後で一意に識別するのに使用することができるユーザー提供のカスタム文字列</td>
</tr>
<tr>
<td>otp</td>
<td>文字列</td>
<td>NO</td>
<td>&quot;getOTP&quot;アクションタイプのポリシーをを迂回するのに使用される7桁のコード。詳細については<a href="#wallet-policy">ウォレットポリシー</a>を参照してください。</td>
</tr>
</tbody></table>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w"> </span><span class="nt">"tx"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0100000001c69d05d3897a25c611324a935d0c688669dc416cb8d8e9ebb36e364fa79547c8000.."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"27374a97df2cd8a63640dd7a40fce9a1d8dfeec3cf7a8b2fbf1ef609f4a5370d"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="response">応答 Response</h3>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>tx</td>
<td>署名されたトランザクションの16進数でエンコードされた形式</td>
</tr>
<tr>
<td>hash</td>
<td>トランザクション id</td>
</tr>
<tr>
<td>fee</td>
<td>このトランザクションの一部としてビットコインマイナーに送信されたsatoshi単位の金額</td>
</tr>
<tr>
<td>feeRate</td>
<td>このトランザクションの一部としてビットコインマイナーに送信された1KBあたりのsatoshi単位の金額</td>
</tr>
</tbody></table>

<h3 id="policy-failure-response">ポリシー/エラー応答 Policy/Failure Response</h3>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>error</td>
<td>この保留中の承認をトリガーしたポリシーからのメッセージ</td>
</tr>
<tr>
<td>pendingApproval</td>
<td>保留中の承認のidで、別のユーザーにより承認される必要がある</td>
</tr>
<tr>
<td>otp</td>
<td>発射されたポリシーが&quot;getOTP&quot;タイプだった場合、trueに設定</td>
</tr>
<tr>
<td>triggeredPolicy</td>
<td>この保留中の承認をトリガーしたポリシーのid</td>
</tr>
<tr>
<td>status</td>
<td>トランザクションのステータス</td>
</tr>
</tbody></table>

<h2 id="list-wallet-transactions">ウォレットのトランザクションの一覧を表示 List Wallet Transactions</h2>
<pre class="highlight shell"><code><span class="nv">WALLET</span><span class="o">=</span>2NB96fbwy8eoHttuZTtbwvvhEYrBwz494ov

curl -X GET <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/wallet/<span class="nv">$WALLET</span>/tx
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">walletId</span> <span class="o">=</span> <span class="s1">'2NB96fbwy8eoHttuZTtbwvvhEYrBwz494ov'</span><span class="p">;</span>
<span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">get</span><span class="p">({</span> <span class="s2">"id"</span><span class="p">:</span> <span class="nx">walletId</span> <span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span> <span class="p">}</span>
  <span class="nx">wallet</span><span class="p">.</span><span class="nx">transactions</span><span class="p">({},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">transactions</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// handle transactions</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">transactions</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">4</span><span class="p">));</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"blockhash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000000004b6b832552c96f8c88e6da1a99a8411573b702c455ae0f967a1"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">4842</span><span class="p">,</span><span class="w">
      </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-01-16T01:12:52.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"entries"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NB96fbwy8eoHttuZTtbwvvhEYrBwz494ov"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">-10000</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
      </span><span class="nt">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">318528</span><span class="p">,</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"90669b53a2004e0c4efb918f71f60ecbdc63fbdbad53b5c84ef940f31ddef552"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"inputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"previousHash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c9a55f32d4b63d02a617eea58873227e4f011d0dfc836cb2e9cab531c4db0c4a"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"previousOutputIndex"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"outputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2MupvpwQQ7dqUizKFookiSzkmxxv8HFgnx6"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"isMine"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">2000000</span><span class="p">,</span><span class="w">
          </span><span class="nt">"chain"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="nt">"chainIndex"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
          </span><span class="nt">"vout"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2Mxy4voQQRi81vm8U7EEhKjgLLHu2njS5ia"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"isMine"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">7990000</span><span class="p">,</span><span class="w">
          </span><span class="nt">"chain"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="nt">"chainIndex"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
          </span><span class="nt">"vout"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"pending"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"instant"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"instantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56651c4c4e82b975616b58647c788fad"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sequenceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CustomID1"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"comment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test transaction"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"blockhash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000000007e190d73d38f1372cb21562405c7ad88fdc3fe6bcba841228dc354c1"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">16672</span><span class="p">,</span><span class="w">
      </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-11-06T03:22:58.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"entries"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"monQzkZiHkBSzLJtAJpiDAEF2fQhvyPdeb"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">-36855030260</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NB96fbwy8eoHttuZTtbwvvhEYrBwz494ov"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">81000000</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"n1VbwcNawZ2vBTrza3SxbHDPFg9tY1f9eg"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">36774030260</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">306698</span><span class="p">,</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"16c5e8cb01a453382723730afb6ca4621cad84ea759b8727c046b38a9c41193f"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"inputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"previousHash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c9a55f32d4b63d02a617eea58873227e4f011d0dfc836cb2e9cab531c4db0c4a"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"previousOutputIndex"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"outputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"n1VbwcNawZ2vBTrza3SxbHDPFg9tY1f9eg"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">36774030260</span><span class="p">,</span><span class="w">
          </span><span class="nt">"vout"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NB96fbwy8eoHttuZTtbwvvhEYrBwz494ov"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"isMine"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nt">"chain"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="nt">"chainIndex"</span><span class="p">:</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span><span class="w">
          </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">81000000</span><span class="p">,</span><span class="w">
          </span><span class="nt">"vout"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"pending"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"instant"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sequenceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CustomID2"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"comment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test transaction"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"start"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>該当するウォレットのトランザクションを、ブロックの高さ順（逆から）で取得する（未確認のトランザクションを最初に）。</p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/wallet/:walletId/tx</code></p>

<h3 id="url-url-parameters">URLパラメーター URL Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>walletId</td>
<td>ビットコインアドレス(文字列)</td>
<td>YES</td>
<td>ウォレットのID</td>
</tr>
</tbody></table>

<h3 id="query-parameters">クエリ パラメーター QUERY Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>skip</td>
<td>数字</td>
<td>NO</td>
<td>一覧取得を開始するインデックス番号。既定値は0。</td>
</tr>
<tr>
<td>limit</td>
<td>数字</td>
<td>NO</td>
<td>単一コール(default=25, max=250) で返す結果の最大の件数</td>
</tr>
<tr>
<td>コンパクト</td>
<td>ブーリアン</td>
<td>NO</td>
<td>トランザクション結果でインプットとアウトプットを省略する</td>
</tr>
</tbody></table>

<h3 id="response">応答 Response</h3>

<p>トランザクションオブジェクトの配列を返す。そのトランザクションが関わったあらゆるウォレットやビットコインアドレスにどのように影響を与えたかに関する概要情報を、各トランザクションは含みます。</p>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>Response 応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>認証パラメーターが一致しない、またはアンロックが必要</td>
</tr>
</tbody></table>

<h2 id="get-wallet-transactions">ウォレットのトランザクションを取得する Get Wallet Transactions</h2>
<pre class="highlight shell"><code><span class="nv">WALLET</span><span class="o">=</span>2NB96fbwy8eoHttuZTtbwvvhEYrBwz494ov
<span class="nv">TXID</span><span class="o">=</span>af867c86000da76df7ddb1054b273ca9e034e8c89d049b5b2795f9f590f67648

curl -X GET <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/wallet/<span class="nv">$WALLET</span>/tx/<span class="nv">$TXID</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">walletId</span> <span class="o">=</span> <span class="s1">'2NB96fbwy8eoHttuZTtbwvvhEYrBwz494ov'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">transactionId</span> <span class="o">=</span> <span class="s1">'af867c86000da76df7ddb1054b273ca9e034e8c89d049b5b2795f9f590f67648'</span><span class="p">;</span>

<span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">get</span><span class="p">({</span> <span class="s2">"id"</span><span class="p">:</span> <span class="nx">walletId</span> <span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span> <span class="p">}</span>
  <span class="nx">wallet</span><span class="p">.</span><span class="nx">getTransaction</span><span class="p">({</span> <span class="s2">"id"</span><span class="p">:</span> <span class="nx">transactionId</span> <span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">transaction</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">transaction</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">4</span><span class="p">));</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"blockhash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000000009249e7d725cc087cb781ade1dbfaf2bd777822948d5fccd4044f8299"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">16661</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-11-06T02:22:55.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"entries"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NB96fbwy8eoHttuZTtbwvvhEYrBwz494ov"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">84000000</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"msj42CCGruhRsFrGATiUuh25dtxYtnpbTx"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">-85900000</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mwahoJcaVuy2TiMtGDZV9PaujFeD9z1a1q"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1890000</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">306695</span><span class="p">,</span><span class="w">
    </span><span class="nt">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0100000001b6e8b36132d351b3d66b5452d8f4601e2271a7bb52b644397db956a4ffe2a053000000006a4730440220127c4adc1cf985cd884c383e69440ce4d48a0c4fdce6bf9d70faa0ee8092acb80220632cb6c99ded7f261814e602fc8fa8e7fe8cb6a95d45c497846b8624f7d19b3c012103df001c8b58ac42b6cbfc2223b8efaa7e9a1911e529bd2c8b7f90140079034e75ffffffff0200bd01050000000017a914c449a7fafb3b13b2952e064f2c3c58e851bb943087d0d61c00000000001976a914b0379374df5eab8be9a21ee96711712bdb781a9588ac00000000"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"af867c86000da76df7ddb1054b273ca9e034e8c89d049b5b2795f9f590f67648"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"outputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NB96fbwy8eoHttuZTtbwvvhEYrBwz494ov"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"isMine"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nt">"chain"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nt">"chainIndex"</span><span class="p">:</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span><span class="w">
            </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">84000000</span><span class="p">,</span><span class="w">
            </span><span class="nt">"vout"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mwahoJcaVuy2TiMtGDZV9PaujFeD9z1a1q"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1890000</span><span class="p">,</span><span class="w">
            </span><span class="nt">"vout"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"pending"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"instant"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"instantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56651c4c4e82b975616b58661bad3ac"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"sequenceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Custom1a"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"comment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test transaction"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>ウォレットのトランザクションに関する情報を取得します。</p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/wallet/:walletId/tx/:txId</code></p>

<h3 id="url-url-parameters">URLパラメーター URL Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>walletId</td>
<td>ビットコインアドレス(文字列)</td>
<td>YES</td>
<td>ウォレットのID</td>
</tr>
<tr>
<td>txId</td>
<td>トランザクション ハッシュ (文字列)</td>
<td>YES</td>
<td>取得するトランザクションのハッシュ</td>
</tr>
</tbody></table>

<h3 id="response">応答 Response</h3>

<p>トランザクション オブジェクトを返します。</p>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>文字列</td>
<td>トランザクションのハッシュ</td>
</tr>
<tr>
<td>hex</td>
<td>文字列</td>
<td>トランザクションの未処理の16進数</td>
</tr>
<tr>
<td>date</td>
<td>日時</td>
<td>このトランザクションが最初に見られた日付</td>
</tr>
<tr>
<td>blockhash</td>
<td>文字列</td>
<td>ブロックのハッシュ値、このトランザクションが既に確認されている場合</td>
</tr>
<tr>
<td>height</td>
<td>数字</td>
<td>このトランザクションが最初に見られたブロックの高さ</td>
</tr>
<tr>
<td>confirmations</td>
<td>数字</td>
<td>このトランザクションがブロックチェーンの一部であった期間のブロックの数</td>
</tr>
<tr>
<td>entries</td>
<td>配列</td>
<td>連結されたトランザクションのエントリ、ネット(正味) のインプット/アウトプットを考慮して</td>
</tr>
<tr>
<td>outputs</td>
<td>配列</td>
<td>ウォレットのaccount、value、vout、voutインデックス、isMine、chain (普通のアドレスは0、お釣りのアドレスは1）を含む、トランザクションのアウトプットに関する情報</td>
</tr>
<tr>
<td>fee</td>
<td>数字</td>
<td>このトランザクションについてマイナーに支払われたSatoshi単位の金額</td>
</tr>
<tr>
<td>pending</td>
<td>ブーリアン</td>
<td>トランザクションがブロックチェーン上でまだ確認されていない場合、trueに設定する</td>
</tr>
<tr>
<td>instant</td>
<td>ブーリアン</td>
<td>このトランザクションがBitGo instantを使用して送信された場合、trueに設定する</td>
</tr>
<tr>
<td>instantId</td>
<td>文字列</td>
<td>BitGoからの保証を参照または取得するのに使用されるインスタントトランザクションの識別子</td>
</tr>
<tr>
<td>sequenceId</td>
<td>文字列</td>
<td>シーケンスid (トランザクションが送信された時に提供される一意のカスタムデータ)</td>
</tr>
<tr>
<td>comment</td>
<td>文字列</td>
<td>トランザクションに設定されたコメント</td>
</tr>
</tbody></table>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>認証パラメーターが一致しない、またはアンロックが必要</td>
</tr>
<tr>
<td>404 Not Found</td>
<td>ウォレットでトランザクションが見つからなかった</td>
</tr>
</tbody></table>

<h2 id="list-wallet-addresses">ウォレットのアドレスの一覧を表示する List Wallet Addresses</h2>

<p>ウォレットについて、New Address APIを使用してインスタンス化されたアドレスのリストを取得します。</p>
<pre class="highlight shell"><code><span class="nv">WALLET</span><span class="o">=</span>2N76BgbTnLJz9WWbXw15gp6K9mE5wrP4JFb

curl -X GET <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/wallet/<span class="nv">$WALLET</span>/addresses
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="s1">'2N76BgbTnLJz9WWbXw15gp6K9mE5wrP4JFb'</span><span class="p">;</span>
<span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">get</span><span class="p">({</span> <span class="s2">"id"</span><span class="p">:</span> <span class="nx">id</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="p">}</span>
  <span class="nx">wallet</span><span class="p">.</span><span class="nx">addresses</span><span class="p">({},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">walletAddress</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">walletAddress</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/wallet/:walletId/addresses</code></p>

<h3 id="url-url-parameters">URLパラメーター URL Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>walletId</td>
<td>ビットコインアドレス(文字列)</td>
<td>YES</td>
<td>ウォレットのID</td>
</tr>
</tbody></table>

<h3 id="query-parameters">クエリ パラメーター QUERY Parameters</h3>

<p>| パラメーター | 種類 | 必須か | 説明                                 |
| &mdash;&mdash; | &ndash; | &mdash; | &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;- |
| chain  | 数字 | NO  | オプションとしてチェーン0またはチェーン1に制限する         |
| skip   | 数字 | NO  | この数の結果をスキップする                      |
| limit  | 数字 | NO  | 結果の数をこの数に制限する(default=25, max=500) |</p>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"addresses"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"chain"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"index"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"path"</span><span class="p">:</span><span class="s2">"/0/0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"address"</span><span class="p">:</span><span class="s2">"2N76BgbTnLJz9WWbXw15gp6K9mE5wrP4JFb"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"chain"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"index"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"path"</span><span class="p">:</span><span class="s2">"/0/1"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"address"</span><span class="p">:</span><span class="s2">"2NCT7eymRYvAoYALNkcBPuftr5scSpBKLuY"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"chain"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"index"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nt">"path"</span><span class="p">:</span><span class="s2">"/0/2"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"address"</span><span class="p">:</span><span class="s2">"2NCngTQw49WEHQD7pvDEAc1LzVVPQcoxEU7"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"start"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"count"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="nt">"total"</span><span class="p">:</span><span class="mi">28</span><span class="p">,</span><span class="w">
  </span><span class="nt">"hasMore"</span><span class="p">:</span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="response">応答 Response</h3>

<p>ウォレットアドレスオブジェクトの配列を返します。</p>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>chain</td>
<td>アドレスがどのチェーンにあるか(現在、0または1)</td>
</tr>
<tr>
<td>index</td>
<td>チェーンの BIP32 インデックス</td>
</tr>
<tr>
<td>path</td>
<td>財布からのBIP32パス</td>
</tr>
<tr>
<td>address</td>
<td>ビットコインアドレス</td>
</tr>
</tbody></table>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>Response 応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>認証パラメーターが一致しない</td>
</tr>
</tbody></table>

<h2 id="get-single-wallet-address">単一のウォレットアドレスを取得する Get Single Wallet Address</h2>

<p>ウォレット内のアドレスに関する情報を取得します。アドレスがウォレット内に存在しているかどうかチェックするのにも使用できます。</p>
<pre class="highlight shell"><code><span class="nv">WALLET</span><span class="o">=</span>2NB5G2jmqSswk7C427ZiHuwuAt1GPs5WeGa
<span class="nv">ADDRESS</span><span class="o">=</span>2NBMGw7K9XiBPfvW3nUQcrANKncmAoLUdDX

curl -X GET <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/wallet/<span class="nv">$WALLET</span>/addresses/<span class="nv">$ADDRESS</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="s1">'2NB5G2jmqSswk7C427ZiHuwuAt1GPs5WeGa'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">address</span> <span class="o">=</span> <span class="s1">'2NBMGw7K9XiBPfvW3nUQcrANKncmAoLUdDX'</span><span class="p">;</span>
<span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">get</span><span class="p">({</span> <span class="s2">"id"</span><span class="p">:</span> <span class="nx">id</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="p">}</span>
  <span class="nx">wallet</span><span class="p">.</span><span class="nx">address</span><span class="p">({</span> <span class="na">address</span><span class="p">:</span> <span class="nx">address</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">walletAddress</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">walletAddress</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/wallet/:walletId/addresses/:address</code></p>

<h3 id="url-url-parameters">URLパラメーター URL Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>walletId</td>
<td>ビットコインアドレス(文字列)</td>
<td>YES</td>
<td>ウォレットのID</td>
</tr>
<tr>
<td>address</td>
<td>ビットコインアドレス(文字列)</td>
<td>YES</td>
<td>情報を取得するウォレットのアドレス</td>
</tr>
</tbody></table>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NBMGw7K9XiBPfvW3nUQcrANKncmAoLUdDX"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"chain"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/1/3"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"received"</span><span class="p">:</span><span class="w"> </span><span class="mi">879990000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"redeemScript"</span><span class="p">:</span><span class="w"> </span><span class="s2">"522102d22299c1bc9fb7b2788ba48241bdd51a83740b4eb10c0e95b28f6fa1121877482102f91a6957b2a230e958396152ae70076b7c031f5aa446d87bb071da5eac158a1d2103025d939cf6b546e3e44c92097c534366cc64747c3a227664a7ff70e2ebeab32653ae"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"sent"</span><span class="p">:</span><span class="w"> </span><span class="mi">879990000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"txCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="response">応答 Response</h3>

<p>ウォレットアドレスオブジェクトを返します。</p>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>address</td>
<td>ルックアップされているビットコインアドレス</td>
</tr>
<tr>
<td>balance</td>
<td>このアドレスの現在の残高 (単位はsatoshi)</td>
</tr>
<tr>
<td>chain</td>
<td>このアドレスを生成するのに使用されたHDチェーン(ユーザーが生成したアドレスは0、お釣りアドレスは1)</td>
</tr>
<tr>
<td>index</td>
<td>アドレスを生成するのに使用されたHDチェーン内のインデックス</td>
</tr>
<tr>
<td>path</td>
<td>ウォレット内のアドレスのHDパス</td>
</tr>
<tr>
<td>received</td>
<td>このアドレスで受信した合計金額 (単位はsatoshi)</td>
</tr>
<tr>
<td>sent</td>
<td>このアドレスで送信した合計金額 (単位はsatoshi)</td>
</tr>
<tr>
<td>txCount</td>
<td>このアドレスでのトランザクションの合計数</td>
</tr>
<tr>
<td>redeemScript</td>
<td>このP2SHアドレスからの資金の消費に使用される可能性があるredeemScript</td>
</tr>
</tbody></table>

<h1 id="wallet-operations-basic">ウォレットの操作 ー上級編 Wallet Operations - Basic</h1>

<p>これらの機能は上級レベルの開発者向けに利用可能、推奨となっています。 これらのAPIを使用することで、拡張された（ただし潜在的に複雑な）機能と強化されたトランザクション生成プロセスのコントロールが提供されます。</p>

<h2 id="id-get-transaction-by-sequence-id">シーケンスidでトランザクションを取得する Get Transaction By Sequence Id</h2>
<pre class="highlight shell"><code><span class="nv">WALLET</span><span class="o">=</span>2NB5G2jmqSswk7C427ZiHuwuAt1GPs5WeGa
<span class="nv">SEQUENCEID</span><span class="o">=</span>hello123

curl -X GET <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/wallet/<span class="nv">$WALLET</span>/tx/sequence/<span class="nv">$SEQUENCEID</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">walletId</span> <span class="o">=</span> <span class="s1">'2NB5G2jmqSswk7C427ZiHuwuAt1GPs5WeGa'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">sequenceId</span> <span class="o">=</span> <span class="s1">'hello123'</span><span class="p">;</span>

<span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">get</span><span class="p">({</span> <span class="s2">"id"</span><span class="p">:</span> <span class="nx">walletId</span> <span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span> <span class="p">}</span>
  <span class="nx">wallet</span><span class="p">.</span><span class="nx">getWalletTransactionBySequenceId</span><span class="p">({</span> <span class="s2">"sequenceId"</span><span class="p">:</span> <span class="nx">sequenceId</span> <span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">transaction</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">transaction</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">4</span><span class="p">));</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"transaction"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">-106215</span><span class="p">,</span><span class="w">
        </span><span class="nt">"createdDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-25T08:39:38.897Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"creator"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5458141599f715232500000530a94fd2"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-25T08:39:39.893Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">6215</span><span class="p">,</span><span class="w">
        </span><span class="nt">"history"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unconfirmed"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-25T08:39:39.893Z"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"signed"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-25T08:39:38.897Z"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5458141599f715232500000530a94fd2"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"created"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-25T08:39:38.897Z"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5458141599f715232500000530a94fd2"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5605084a68217cde3667f2ad4a640875"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"sequenceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hello123"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"signedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-25T08:39:38.897Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">367</span><span class="p">,</span><span class="w">
        </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unconfirmed"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50430eeffdd1272ff39d0d3667cbc8e60de0a8ea6bb118e6236e0964389e6d19"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"walletId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NB5G2jmqSswk7C427ZiHuwuAt1GPs5WeGa"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>送信トランザクションを送信する時に渡されたウォレットシーケンスIDのトランザクションを取得します（sendCoinsまたはsendTransaction経由で） これは、自分の一意のIDを通じて、署名されていない/確認されていないトランザクションをトラッキングするのに役立ちます。ビットコイントランザクションIDは共同署名の前に定義されず、確認前改変されうるため。</p>

<p>BitGoによってまだ共同署名されていない保留中のトランザクションは、依然としてシーケンスidを持ちます。</p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/wallet/:walletId/tx/sequence/:sequenceId</code></p>

<h3 id="url-url-parameters">URLパラメーター URL Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>walletId</td>
<td>ビットコインアドレス(文字列)</td>
<td>YES</td>
<td>ウォレットのID</td>
</tr>
<tr>
<td>sequenceId</td>
<td>カスタムのユーザー提供の文字列</td>
<td>YES</td>
<td>以前に発信トランザクションとともに送信された一意のid。</td>
</tr>
</tbody></table>

<h3 id="response">応答 Response</h3>

<p>履歴、そしてビットコインネットワーク上のトランザクションの状態を含むWalletTxオブジェクトを返す。</p>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>認証パラメーターが一致しない、またはアンロックが必要</td>
</tr>
<tr>
<td>404 Not Found</td>
<td>ウォレットでトランザクションが見つからなかった</td>
</tr>
</tbody></table>

<h2 id="list-wallet-unspents">ウォレットの消費されなかった分の一覧を取得する List Wallet Unspents</h2>
<pre class="highlight shell"><code><span class="nv">WALLET</span><span class="o">=</span>2N91XzUxLrSkfDMaRcwQhe9DauhZMhUoxGr

curl -X GET <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/wallet/<span class="nv">$WALLET</span>/unspents
</code></pre>
<pre class="highlight javascript"><code>  <span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="s1">'2N91XzUxLrSkfDMaRcwQhe9DauhZMhUoxGr'</span><span class="p">;</span>
  <span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">get</span><span class="p">({</span> <span class="na">id</span><span class="p">:</span> <span class="nx">id</span> <span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">wallet</span><span class="p">.</span><span class="nx">unspents</span><span class="p">({</span><span class="na">limit</span><span class="p">:</span> <span class="mf">4.2</span><span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// handle error, use unspents</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">wallet</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">});</span>
</code></pre>

<p>ウォレットについて、未使用の入力トランザクションのリストを取得します。</p>

<p>ビットコイントランザクションを作成するには、トランザクションの作成者は、そのトランザクションの作成に使用する一連のビットコイン「インプット」を蓄積することが必要になります。</p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/wallet/:walletId/unspents</code></p>

<h3 id="url-url-parameters">URLパラメーター URL Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>walletId</td>
<td>ビットコインアドレス(文字列)</td>
<td>YES</td>
<td>ウォレットのID</td>
</tr>
</tbody></table>

<h3 id="query-parameters">クエリ パラメーター QUERY Parameters</h3>

<p>| パラメーター | 種類 | 必須か | 説明                                            |
| &mdash;&mdash; | &ndash; | &mdash; | &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash; |
| target | 数字 | NO  | APIは最低でもこの金額に達する十分な未使用分（単位はsatoshi）を返そうと試みます。 |
| skip   | 数字 | NO  | 一覧取得を開始するインデックス番号。既定値は0。                      |
| limit  | 数字 | NO  | 単一コール(default=100, max=250) で返す結果の最大の件数       |</p>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"pendingTransactions"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"start"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"unspents"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2N26EdwtVNQe6P9QkVgLHGhoWtU5W98ohNB"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"blockHeight"</span><span class="p">:</span><span class="w"> </span><span class="mi">570611</span><span class="p">,</span><span class="w">
            </span><span class="nt">"chainPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/1/117"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">3474</span><span class="p">,</span><span class="w">
            </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-18T21:58:11.620Z"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"isChange"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nt">"redeemScript"</span><span class="p">:</span><span class="w"> </span><span class="s2">"522102f90f2bb90f6572af7bf5c7317ebd48311b417b005352ae71c3c79990fea1f60f2102f817f403092d09abbbb955410d1e50fca4d1ee56e145a29dde01e505558dec43210307527a3928d2711212730ef6585d1a82af80d1fe2979e167b7cc1a397c654ba253ae"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a9146105ee32b12a94436f19592e18b135d206e5f46987"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"tx_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3246b59fcec99c81e5f59522327b632f5c54e4da42ccb512550ed91a3f9b5ce6"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"tx_output_n"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">78273186932</span><span class="p">,</span><span class="w">
            </span><span class="nt">"wallet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2N91XzUxLrSkfDMaRcwQhe9DauhZMhUoxGr"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"instant"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NCB6qVywiBvWmrpcnFJ4jq8m6oZrFTCKDd"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"blockHeight"</span><span class="p">:</span><span class="w"> </span><span class="mi">570611</span><span class="p">,</span><span class="w">
            </span><span class="nt">"chainPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/1/118"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">3474</span><span class="p">,</span><span class="w">
            </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-18T21:58:23.698Z"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"isChange"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nt">"redeemScript"</span><span class="p">:</span><span class="w"> </span><span class="s2">"522103e48e6f9e7c2f1011b104f3353973e08c8eb83e5d276bea3d274abd1e458700582103ac2554d01691c694683fc2976183afb25492645bc338deb6425371119c163ec7210212d5e3a68be3b78f266e6247cc34d8ce8bba8d964dbe7da3d1101261ffa07af953ae"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a914cfa2c19e759f7a3bc58ed7ae1f72d0125965a81a87"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"tx_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c005f114cbf443c7c0d2fc82bba6b78d0fd677f131467a6d7b17a67ffacd79b9"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"tx_output_n"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1808807240</span><span class="p">,</span><span class="w">
            </span><span class="nt">"wallet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2N91XzUxLrSkfDMaRcwQhe9DauhZMhUoxGr"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"instant"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="response">応答 Response</h3>

<p>未使用分のインプットのオブジェクトの配列を返します。</p>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>tx_hash</td>
<td>未使用のインプットのハッシュ値</td>
</tr>
<tr>
<td>tx_output_n</td>
<td><em>tx_hash</em>からの未使用のインプットのインデックス</td>
</tr>
<tr>
<td>value</td>
<td>未使用のインプットの値、単位はsatoshi</td>
</tr>
<tr>
<td>script</td>
<td>(16 進数形式で) スクリプト ハッシュを出力</td>
</tr>
<tr>
<td>redeemScript</td>
<td>交換スクリプト</td>
</tr>
<tr>
<td>chainPath</td>
<td>ウォレットに関連する未使用のアウトプットのBIP32 パス</td>
</tr>
<tr>
<td>confirmations</td>
<td>未使用分のトランザクションがブロックに含まれた時とその後見られたブロックの数</td>
</tr>
<tr>
<td>isChange</td>
<td>これがこのウォレットからの以前の使用からの出力であることを示すブーリアンで、おそらく確認数が0だったとしても安全に使用可能</td>
</tr>
<tr>
<td>instant</td>
<td>二重支払いに関する保証が付いたBitGo Instantトランザクションの作成にこの未使用分が使用できるかどうかを示すブーリアン</td>
</tr>
</tbody></table>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>認証パラメーターが一致しない</td>
</tr>
</tbody></table>

<h2 id="consolidate-unspents">未使用分を統合する Consolidate Unspents</h2>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">get</span><span class="p">({</span> <span class="s2">"id"</span><span class="p">:</span> <span class="nx">walletId</span> <span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span> <span class="p">}</span>
  <span class="nx">wallet</span><span class="p">.</span><span class="nx">consolidateUnspents</span><span class="p">(</span>
    <span class="p">{</span>
      <span class="na">target</span><span class="p">:</span> <span class="nx">desiredUnspentCount</span><span class="p">,</span>
      <span class="na">minConfirms</span><span class="p">:</span> <span class="nx">minConfirmCountPerIteration</span><span class="p">,</span>
      <span class="na">walletPassphrase</span><span class="p">:</span> <span class="nx">passphrase</span>
    <span class="p">},</span>
    <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">consolidationTransactions</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span> <span class="p">}</span>
      <span class="c1">// All the transactions used for consolidation, by reverse block height</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">consolidationTransactions</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight shell"><code>ローカル メソッドとしてのみ使用できます <span class="o">(</span>BitGo Express<span class="o">)</span> 
<span class="nv">WALLETID</span><span class="o">=</span><span class="s2">"2NB5G2jmqSswk7C427ZiHuwuAt1GPs5WeGa"</span>
<span class="nv">WALLETPASSPHRASE</span><span class="o">=</span><span class="s2">"mypassword"</span>

curl -X PUT <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s2">"{ </span><span class="se">\"</span><span class="s2">walletPassphrase</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$WALLETPASSPHRASE</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">target</span><span class="se">\"</span><span class="s2">: 1, </span><span class="se">\"</span><span class="s2">minConfirms</span><span class="se">\"</span><span class="s2">: 1 }"</span> <span class="se">\</span>
http://<span class="nv">$BITGO_EXPRESS_HOST</span>:3080/api/v1/wallet/<span class="nv">$WALLETID</span>/consolidateunspents
</code></pre>

<p>現在ウォレットに保持されている未使用分を、より小さい数へ合体（統合）します。 これは反復的（イタレーション）プロセスで、主にトランザクションサイズの制限と署名の速さによるものです。 各イタレーションごとにトランザクション手数料が必要です。</p>

<h3 id="parameters">パラメーター Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>target</td>
<td>数字</td>
<td>NO</td>
<td>関数を実行した後の、希望の未使用分の数</td>
</tr>
<tr>
<td>maxInputCountPerConsolidation</td>
<td>数字</td>
<td>NO</td>
<td>各イタレーションで使用される未使用分の最大の数。デフォルトで85。</td>
</tr>
<tr>
<td>minConfirms</td>
<td>数字</td>
<td>NO</td>
<td>一定数の確認があった未使用分のインプットだけを選ぶ</td>
</tr>
<tr>
<td>walletPassphrase</td>
<td>文字列</td>
<td>NO</td>
<td>ウォレットのパスフレーズ</td>
</tr>
<tr>
<td>progressCallback</td>
<td>関数</td>
<td>NO</td>
<td>各イテレーション後に呼び出されるクロージャ。進行状況をモニタリングするのに使用できる。</td>
</tr>
</tbody></table>

<h2 id="fan-out-unspents">未使用分のファンアウト Fan Out Unspents</h2>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">get</span><span class="p">({</span> <span class="s2">"id"</span><span class="p">:</span> <span class="nx">walletId</span> <span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span> <span class="p">}</span>
  <span class="nx">wallet</span><span class="p">.</span><span class="nx">fanOutUnspents</span><span class="p">(</span>
    <span class="p">{</span>
      <span class="na">target</span><span class="p">:</span> <span class="nx">desiredUnspentCount</span><span class="p">,</span>
      <span class="na">minConfirms</span><span class="p">:</span> <span class="nx">minConfirmCount</span><span class="p">,</span>
      <span class="na">walletPassphrase</span><span class="p">:</span> <span class="nx">passphrase</span>
    <span class="p">},</span>
    <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">fanoutTransaction</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span> <span class="p">}</span>
      <span class="c1">// Transaction used to fan out unspents</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">fanoutTransaction</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight shell"><code>ローカル メソッドとしてのみ使用できます <span class="o">(</span>BitGo Express<span class="o">)</span> 
<span class="nv">WALLETID</span><span class="o">=</span><span class="s2">"2NB5G2jmqSswk7C427ZiHuwuAt1GPs5WeGa"</span>
<span class="nv">WALLETPASSPHRASE</span><span class="o">=</span><span class="s2">"mypassword"</span>

curl -X PUT <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s2">"{ </span><span class="se">\"</span><span class="s2">walletPassphrase</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$WALLETPASSPHRASE</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">target</span><span class="se">\"</span><span class="s2">: 85, </span><span class="se">\"</span><span class="s2">minConfirms</span><span class="se">\"</span><span class="s2">: 1 }"</span> <span class="se">\</span>
http://<span class="nv">$BITGO_EXPRESS_HOST</span>:3080/api/v1/wallet/<span class="nv">$WALLETID</span>/fanoutunspents
</code></pre>

<p>（最小確認カウント等の選択基準と一致する）ウォレットの未使用分を取って、より大きい数の未使用分に広げます。</p>

<h3 id="parameters">パラメーター Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>target</td>
<td>数字</td>
<td>YES</td>
<td>関数を実行した後の、希望の未使用分の数</td>
</tr>
<tr>
<td>minConfirms</td>
<td>数字</td>
<td>NO</td>
<td>一定数の確認があった未使用分のインプットだけを選ぶ</td>
</tr>
<tr>
<td>walletPassphrase</td>
<td>文字列</td>
<td>NO</td>
<td>ウォレットのパスフレーズ</td>
</tr>
</tbody></table>

<h2 id="create-transaction">　トランザクションの作成 Create Transaction</h2>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">get</span><span class="p">({</span> <span class="s2">"id"</span><span class="p">:</span> <span class="nx">walletId</span> <span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span> <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">recipients</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="nx">recipients</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="na">address</span><span class="p">:</span> <span class="nx">address</span><span class="p">,</span> <span class="na">amount</span><span class="p">:</span> <span class="nx">amountSatoshis</span><span class="p">});</span>
  <span class="nx">wallet</span><span class="p">.</span><span class="nx">createTransaction</span><span class="p">(</span>
    <span class="p">{</span>
      <span class="na">recipients</span><span class="p">:</span> <span class="nx">recipients</span><span class="p">,</span>
      <span class="na">fee</span><span class="p">:</span> <span class="nx">fee</span>
    <span class="p">},</span>
    <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">transaction</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// The transaction with selected unspents, ready to be signed with signTransaction</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">transaction</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight shell"><code>ローカル メソッドとしてのみ使用できます <span class="o">(</span>BitGo Express<span class="o">)</span> 
<span class="nv">WALLETID</span><span class="o">=</span><span class="s1">'2NB5G2jmqSswk7C427ZiHuwuAt1GPs5WeGa'</span>

curl -X POST <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s2">"{ </span><span class="se">\"</span><span class="s2">recipients</span><span class="se">\"</span><span class="s2">: [{ </span><span class="se">\"</span><span class="s2">address</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">2N4Xz4itCdKKUREiySS7oBzoXUKnuxP4nRD</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">amount</span><span class="se">\"</span><span class="s2">: 1500000}, { </span><span class="se">\"</span><span class="s2">address</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">2NGJP7z9DZwyVjtY32YSoPqgU6cG2QXpjHu</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">amount</span><span class="se">\"</span><span class="s2">: 2500000 }] }"</span> <span class="se">\</span>
http://<span class="nv">$BITGO_EXPRESS_HOST</span>:3080/api/v1/wallet/<span class="nv">$WALLETID</span>/createtransaction
</code></pre>

<aside class="warning">
このメソッドは上級APIユーザー向けです。ほとんどの場合、 <a href="#send-coins-to-address">sendCoins</a>がウォレットからのビットコインの送信に推奨されるメソッドです。 
</aside> 

<p>そのウォレットの各アドレスからの未使用分をを使用して、ウォレットから複数の受信者を持つトランザクションを作成します。これはSDKでのみのクライアント側の機能です。</p>

<p>通常、signTransactionの前に使用され、signTransactionは作成されたトランザクションに署名します。お釣りはウォレット上で新たに作成されたお釣りアドレス（/1のパス）に送信されます。</p>

<p>これは上級のメソッドで、マイナー手数料と復号化されたキーチェーンを手動で指定（マイナー手数料は0も可能）ことを可能にします。</p>

<p><strong>注意</strong>: 不十分な手数料を提供した場合、あなたのトランザクションは確認を得られず、未使用分がしばらく使用できないことがあります。</p>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"changeAddress"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2MvaEJUHmL6wzsxwqW8Xm8Qac4PTa3zMuvE"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/1/65"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">20000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"transactionHex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0100000003f6a05b9ab9d7c62cb70a662a4016cbd4740d1d6d35d3c903e3a74fd9f943d..."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"unspents"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"chainPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/0/10"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"redeemScript"</span><span class="p">:</span><span class="w"> </span><span class="s2">"522102f96f3d88ca43810306a7fff2e99da9f052d56a26c73a094237c55b5ec72fead62102981092615521d2d6a44a652631309b5136f589f6c625dbf94efa3edae74ddd2f2103b08e8933fc38a3eb2dc0616f336910b884f9ad80b4a7984f2d9f9e19759ff01553ae"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="err">...</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"walletId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NB5G2jmqSswk7C427ZiHuwuAt1GPs5WeGa"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"walletKeychains"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/0/0"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"xpub"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xpub661MyMwAqRbcGM9kbvxAfLzr9WwqaVKSqw1dEm16mZmPmigQBrqzVQz314kd9jV68JjpRLCtrRWRpEJqe3FCaN4fuMTZNaDa3uMSjxUaZEj"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="err">...</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="parameters">パラメーター Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>recipients</td>
<td>文字列</td>
<td>YES</td>
<td>受信者オブジェクトの配列とそれぞれに送信する金額。例 [{address: &#39;38BKDNZbPcLogvVbcx2ekJ9E6Vv94DqDqw&rsquo;, amount: 1500}, ..]</td>
</tr>
<tr>
<td>fee</td>
<td>数字</td>
<td>NO</td>
<td>単位をSatoshiとする、ビットコインマイナーに支払われる絶対的な手数料。自動の場合「undefined」に設定。</td>
</tr>
<tr>
<td>feeRate</td>
<td>数字</td>
<td>NO</td>
<td>ビットコインマイナーに支払われるトランザクションサイズのKBあたりの手数料。自動の場合「undefined」に設定。</td>
</tr>
<tr>
<td>feeTxConfirmTarget</td>
<td>数字</td>
<td>NO</td>
<td>キロバイトごとの手数料を計算し、この数のブロックでのトランザクションの確認をターゲットにする。デフォルト: 2 最小：2 最大: 20</td>
</tr>
<tr>
<td>minConfirms</td>
<td>数字</td>
<td>NO</td>
<td>一定の数の確認があった消費されていないインプットだけを選択する。これを1に設定し、enforceMinConfirmsForChangeを使用することを私達は推奨します。</td>
</tr>
<tr>
<td>enforceMinConfirms ForChange</td>
<td>ブーリアン</td>
<td>NO</td>
<td>デフォルトではfalse。トランザクションを構築する時、minConfirmsはウォレットからでない消費されなかった資金の時のみ適用されます。</td>
</tr>
<tr>
<td>minUnspentSize</td>
<td>数字</td>
<td>NO</td>
<td>使用可能と考えられる未使用分の単位をsatoshiとする最低額。デフォルトで5460 (トランザクションダストスパムへの対抗として)</td>
</tr>
<tr>
<td>instant</td>
<td>ブーリアン</td>
<td>NO</td>
<td>BitGoの二重支払いに対するインスタント保証が付いたトランザクションの送信をリクエストする際、trueに設定</td>
</tr>
</tbody></table>

<h2 id="sign-transaction">トランザクションへ署名する Sign Transaction</h2>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">get</span><span class="p">({</span><span class="na">id</span><span class="p">:</span> <span class="nx">walletId</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">wallet</span><span class="p">.</span><span class="nx">getEncryptedUserKeychain</span><span class="p">({},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">keychain</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Got encrypted user keychain"</span><span class="p">);</span>
    <span class="c1">// Decrypt the user key with a passphrase</span>
    <span class="nx">keychain</span><span class="p">.</span><span class="nx">xprv</span> <span class="o">=</span> <span class="nx">bitgo</span><span class="p">.</span><span class="nx">decrypt</span><span class="p">({</span> <span class="na">password</span><span class="p">:</span> <span class="nx">walletPassphrase</span><span class="p">,</span> <span class="na">input</span><span class="p">:</span> <span class="nx">keychain</span><span class="p">.</span><span class="nx">encryptedXprv</span> <span class="p">});</span>
    <span class="kd">var</span> <span class="nx">transactionHex</span> <span class="o">=</span> <span class="s2">"0100000003f6a05b9ab9d7c62cb70a662a4016cbd4740d1d6d35d3c903e3a74fd9f943d09c0000000017a91..."</span><span class="p">;</span>
    <span class="c1">// Unspents Can be obtained from the createTransaction method</span>
    <span class="kd">var</span> <span class="nx">unspents</span> <span class="o">=</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s2">"chainPath"</span><span class="p">:</span> <span class="s2">"/0/10"</span><span class="p">,</span>
        <span class="s2">"redeemScript"</span><span class="p">:</span> <span class="s2">"522102f96f3d88ca43810306a7fff2e99da9f052d56a26c73a094237c55b5ec72fead6"</span>
      <span class="p">}</span>
    <span class="p">];</span>

    <span class="nx">wallet</span><span class="p">.</span><span class="nx">signTransaction</span><span class="p">({</span>
      <span class="na">transactionHex</span><span class="p">:</span> <span class="nx">transactionHex</span><span class="p">,</span>
      <span class="na">unspents</span><span class="p">:</span> <span class="nx">unspents</span><span class="p">,</span>
      <span class="na">keychain</span><span class="p">:</span> <span class="nx">keychain</span>
    <span class="p">},</span>
    <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">transaction</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">transaction</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight shell"><code>ローカル メソッドとしてのみ使用できます <span class="o">(</span>BitGo Express<span class="o">)</span> 
<span class="nv">WALLETID</span><span class="o">=</span><span class="s1">'2NB5G2jmqSswk7C427ZiHuwuAt1GPs5WeGa'</span>

<span class="nv">UNSPENTS</span><span class="o">=</span><span class="s1">'[
    {
    "chainPath": "/0/10",
    "redeemScript": "522102f96f3d88ca43810306a7fff2e99da9f052d56a26c73a094237c55b5ec72fead62102981092615521d2d6a44a652631309b5136f589f6c625dbf94efa3edae74ddd2f2103b08e8933fc38a3eb2dc0616f336910b884f9ad80b4a7984f2d9f9e19759ff01553ae"
    },
    {
    "chainPath": "/0/10",
    "redeemScript": "522102f96f3d88ca43810306a7fff2e99da9f052d56a26c73a094237c55b5ec72fead62102981092615521d2d6a44a652631309b5136f589f6c625dbf94efa3edae74ddd2f2103b08e8933fc38a3eb2dc0616f336910b884f9ad80b4a7984f2d9f9e19759ff01553ae"
    },
    {
    "chainPath": "/0/0",
    "redeemScript": "52210362a0c0e532afd7c72111525ef6157a32550b2308a0afbedef01505ab2f8aa5a5210281c598ce3155665a8578e51ab4033def358644dae5f1c4abb9b9f038867804ef21031414644c53953b0557c4a3a6f9f99c0b033583b67e5c02bf0297906f60d2ee9d53ae"
    }
]'</span>

<span class="nv">TRANSACTIONHEX</span><span class="o">=</span>0100000003f6a05b9ab9d7c62cb70a662a4016cbd4740d1d6d35d3c903e3a74fd9f943d09c0000000017a914b02ad680c6ff1d2fa953720940ff8e3ac6eef37987ffffffff15e66c75b266d2077c45a3370fe0da92c0c20ebe400343bf82ac522fcc8fe60a0000000017a914b02ad680c6ff1d2fa953720940ff8e3ac6eef37987ffffffff3f7d55ff4330a5b8da69abf675c18ff558e9cf04479779a998a00d3029cbe4070100000017a914c38fcf303ad53d925df43d21b45be7b8d0895c9387ffffffff0360e316000000000017a9147bd4d50e34791a6373bfa0175bf2cb9796a08f5587a02526000000000017a914fce3c3bbd6e96dd3b54f689f33fcd12c94e9dd5587308527000000000017a91424808ad9ba7f68ae0460ab3c21f5281ead31814f8700000000

<span class="nv">KEYCHAIN</span><span class="o">=</span><span class="s1">'{ "xpub": "xpub661MyMwAqRbcGM9kbvxAfLzr9WwqaVKSqw1dEm16mZmPmigQBrqzVQz314kd9jV68JjpRLCtrRWRpEJqe3FCaN4fuMTZNaDa3uMSjxUaZEj",
            "encryptedXprv": "{\"iv\":\"ToxBefI++Jf7FhRUV7MNFA==\",\"v\":1,\"iter\":10000,\"ks\":256,\"ts\":64,\"mode\":\"ccm\",\"adata\":\"\",\"cipher\":\"aes\",\"salt\":\"X3Ibf2DfHd8=\",\"ct\":\"ri+99W0cLUpNCgjksZJVl425OGVrJaNJVllaldTjXumD8oxySjGALoj630Qf5xe0WD0DMJjVIAhMwlPz4g6eG6n8a2ZeKRdvfWMhp7PBEdGGCywPbtLNTfbjrS9kfM9bedncp9QXud7fERfH63vorzEP0rUOZJ0=\"}",
            "path": "m",
            "xprv": "xprv9s21ZrQH143K3s5HVuRAJD47bV7MB2bbUi62SNbVDEEQtvMFeKXjwcfZ9otQ4vZMtHzumu9LyFriSFzcjEXJp6eAL4muKaahwxAaiDPWt4R" }'</span>

curl -X POST <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s2">"{ </span><span class="se">\"</span><span class="s2">transactionHex</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$TRANSACTIONHEX</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">unspents</span><span class="se">\"</span><span class="s2">: </span><span class="nv">$UNSPENTS</span><span class="s2">, </span><span class="se">\"</span><span class="s2">keychain</span><span class="se">\"</span><span class="s2">: </span><span class="nv">$KEYCHAIN</span><span class="s2"> }"</span> <span class="se">\</span>
http://<span class="nv">$BITGO_EXPRESS_HOST</span>:3080/api/v1/wallet/<span class="nv">$WALLETID</span>/signtransaction
</code></pre>

<aside class="warning"> このメソッドは上級APIユーザー向けです。ほとんどの場合、 <a href="#send-coins-to-address">sendCoins</a>がウォレットからのビットコインの送信に推奨されるメソッドです。 </aside> 

<p>作成されたトランザクションの16進数、キーチェーンそして未使用分の情報を使用してマルチシグトランザクションに署名します(導出パスと交換スクリプト)。通常createTransactionからの出力と使用します。</p>

<p>オフラインで実行することができます。</p>

<p>これは、SDKでのみのクライアント側の機能です。</p>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="nt">"tx"</span><span class="p">:</span><span class="s2">"0100000003f6a05b9ab9d7c62cb70a662a4016cbd4740d1d6d35d3c903e3a74fd9f943d09c00....."</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="parameters">パラメーター Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>transactionHex</td>
<td>文字列</td>
<td>YES</td>
<td>The unsigned transaction, in hex string form</td>
</tr>
<tr>
<td>unspents</td>
<td>配列</td>
<td>YES</td>
<td>unspentsオブジェクトの配列で、chainpathとredeemScriptを含む</td>
</tr>
<tr>
<td>keychain</td>
<td>キーチェーン オブジェクト</td>
<td>YES</td>
<td>利用できるxprvのプロパティを持つ復号化されたキーチェーン（オブジェクト）。</td>
</tr>
</tbody></table>

<h2 id="send-transaction">トランザクションを送信する Send Transaction</h2>
<pre class="highlight shell"><code><span class="nv">TX</span><span class="o">={</span>raw hex transaction<span class="o">}</span>

curl -X POST <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s2">"{ </span><span class="se">\"</span><span class="s2">tx</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$TX</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">otp</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">0000000</span><span class="se">\"</span><span class="s2"> }"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/tx/send
</code></pre>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">get</span><span class="p">({</span><span class="na">id</span><span class="p">:</span> <span class="nx">walletId</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Balance is: "</span> <span class="o">+</span> <span class="p">(</span><span class="nx">wallet</span><span class="p">.</span><span class="nx">balance</span><span class="p">()</span> <span class="o">/</span> <span class="mi">1</span><span class="nx">e8</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">4</span><span class="p">));</span>
  <span class="nx">wallet</span><span class="p">.</span><span class="nx">getEncryptedUserKeychain</span><span class="p">({},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">keychain</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Error getting encrypted keychain!"</span><span class="p">);</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Got encrypted user keychain"</span><span class="p">);</span>

    <span class="c1">// Decrypt the user key with a passphrase</span>
    <span class="nx">keychain</span><span class="p">.</span><span class="nx">xprv</span> <span class="o">=</span> <span class="nx">bitgo</span><span class="p">.</span><span class="nx">decrypt</span><span class="p">({</span> <span class="na">password</span><span class="p">:</span> <span class="nx">walletPassphrase</span><span class="p">,</span> <span class="na">input</span><span class="p">:</span> <span class="nx">keychain</span><span class="p">.</span><span class="nx">encryptedXprv</span> <span class="p">});</span>

    <span class="c1">// Set recipients</span>
    <span class="kd">var</span> <span class="nx">recipients</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="nx">recipients</span><span class="p">[</span><span class="nx">destinationAddress</span><span class="p">]</span> <span class="o">=</span> <span class="nx">amountSatoshis</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Creating transaction"</span><span class="p">);</span>
    <span class="nx">wallet</span><span class="p">.</span><span class="nx">createTransaction</span><span class="p">({</span>
      <span class="na">recipients</span><span class="p">:</span> <span class="nx">recipients</span><span class="p">,</span>
      <span class="na">fee</span><span class="p">:</span> <span class="nx">fee</span>
      <span class="p">},</span>
      <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">transaction</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Failed to create transaction!"</span><span class="p">);</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
          <span class="k">return</span> <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">transaction</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Signing transaction"</span><span class="p">);</span>
        <span class="nx">wallet</span><span class="p">.</span><span class="nx">signTransaction</span><span class="p">({</span>
          <span class="na">transactionHex</span><span class="p">:</span> <span class="nx">transaction</span><span class="p">.</span><span class="nx">transactionHex</span><span class="p">,</span>
          <span class="na">unspents</span><span class="p">:</span> <span class="nx">transaction</span><span class="p">.</span><span class="nx">unspents</span><span class="p">,</span>
          <span class="na">keychain</span><span class="p">:</span> <span class="nx">keychain</span>
        <span class="p">},</span>
        <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">transaction</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Failed to sign transaction!"</span><span class="p">);</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
            <span class="k">return</span> <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
          <span class="p">}</span>

          <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">transaction</span><span class="p">);</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Sending transaction"</span><span class="p">);</span>
          <span class="nx">wallet</span><span class="p">.</span><span class="nx">sendTransaction</span><span class="p">({</span><span class="na">tx</span><span class="p">:</span> <span class="nx">transaction</span><span class="p">.</span><span class="nx">tx</span><span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Transaction sent: "</span> <span class="o">+</span> <span class="nx">callback</span><span class="p">.</span><span class="nx">tx</span><span class="p">);</span>
          <span class="p">});</span>
        <span class="p">});</span>
      <span class="p">}</span>
    <span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>

<aside class="warning">
このメソッドは上級APIユーザー向けです。ほとんどの場合、<a href="#send-coins-to-address">sendCoins</a>がウォレットからのビットコインの送信に推奨されるメソッドです。 
</aside> 

<p>部分的に署名されたトランザクションを送信します。 サーバは次のいずれかを行います： *トランザクションを拒否する *他のウォレットのアドミンから追加の承認を集める *最後の署名を適用し、ビットコインP2Pネットワークに提出する
<aside class="info"> このAPIはUnlock APIを使用してセッションがアンロックされることを必要とします。 Unlock APIへの単一コールは、内部的に設定されたBitGoのクォータ（現在50BTCに設定）までの、全ての単一トランザクションまたは複数トランザクションを可能にします。 </aside> </p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">POST /api/v1/tx/send</code></p>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"tx"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01000000022cbc51a1d73a7e8ef3feaf30ad51b08b53cf91c672ba73.."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b3bd8ac76de2340c1159337acdfcaabf08a9470e8157870bd1d846.."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"accepted"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"instant"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"instantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56651c4c4e82b975616b58647c77fe1dc"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="body-body-parameters">BODYパラメーター BODY Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>tx</td>
<td>トランザクション オブジェクト</td>
<td>YES</td>
<td>16進数文字列形式でのトランザクション</td>
</tr>
<tr>
<td>sequenceId</td>
<td>文字列</td>
<td>NO</td>
<td>このトランザクションの状態を、署名の前後で一意に識別するのに使用することができるユーザー提供のカスタム文字列</td>
</tr>
<tr>
<td>message</td>
<td>文字列</td>
<td>NO</td>
<td>ユーザーが提供した文字列(ブロックチェーンに送られることはない)</td>
</tr>
<tr>
<td>instant</td>
<td>ブーリアン</td>
<td>NO</td>
<td>BitGoの二重支払いに対するインスタント保証が付いたトランザクションの送信をリクエストする際、trueに設定</td>
</tr>
<tr>
<td>otp</td>
<td>文字列</td>
<td>NO</td>
<td>&quot;getOTP&quot;アクションタイプのポリシーをを迂回するのに使用される7桁のコード。詳細については<a href="#wallet-policy">ウォレットポリシー</a>を参照してください。</td>
</tr>
</tbody></table>

<h3 id="response">応答 Response</h3>

<p>16 進数エンコード形式で、送信されたトランザクションとそのハッシュ値を返します。</p>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>認証パラメーターが一致しない、またはアンロックが必要</td>
</tr>
<tr>
<td>402 Payment Required</td>
<td>このリクエストでのトランザクション手数料が低すぎるようです。</td>
</tr>
</tbody></table>

<h3 id="policy-failure-response">ポリシー/エラー応答 Policy/Failure Response</h3>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>error</td>
<td>この保留中の承認をトリガーしたポリシーからのメッセージ</td>
</tr>
<tr>
<td>pendingApproval</td>
<td>保留中の承認のidで、別のユーザーにより承認される必要がある</td>
</tr>
<tr>
<td>otp</td>
<td>発射されたポリシーが&quot;getOTP&quot;タイプだった場合、trueに設定</td>
</tr>
<tr>
<td>triggeredPolicy</td>
<td>この保留中の承認をトリガーしたポリシーのid</td>
</tr>
<tr>
<td>status</td>
<td>トランザクションのステータス</td>
</tr>
</tbody></table>

<h2 id="get-instant-guarantee">インスタント保証を得る Get Instant Guarantee</h2>
<pre class="highlight shell"><code><span class="nv">INSTANTID</span><span class="o">=</span>564ea1fa95f4344c6db00773d1277160

curl -X GET <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/instant/<span class="nv">$INSTANTID</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">instantGuarantee</span><span class="p">({</span> <span class="na">id</span><span class="p">:</span> <span class="s1">'56562ee923ab7f3a28d638085ba6955a'</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Error getting guarantee!"</span><span class="p">);</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<p>BitGo Instantは、私達による二重支払いに対する保証として、ウォレットプラットフォームの上に構築されています。 マルチシグウォレットの共同署名者として、BitGoがアウトプットを二重支払いすることは決してありません。 私達の約束は各トランザクションごとに暗号署名された保証によって裏付けられており、受信者がブロック確認の必要なしに資金を受け入れるのを可能にします。<aside class="info"> 誰でも即座のトランザクションを受け取ることができます。インスタントトランザクションの送信にはinstantと互換性がある / 暗号鍵リカバリーシステム（KRS）のBitGoウォレットが必要です。 </aside> </p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/instant/&lt;id&gt;</code></p>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">600000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"createTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-20T04:30:49.894Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"guarantee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BitGo Inc. guarantees the transaction with hash 8ba08ef2a745246f309ec4eaff5d7652c4fc01e61eebd9aabc1c58996355acd7 or normalized hash 62f76eb48d60a1c46cb74ce42063bd9c0816ca5e17877738a824525c9794ceaf for the USD value of 0.00600000 BTC at Fri Nov 20 2015 04:30:49 GMT+0000 (UTC) until confirmed to a depth of 6 confirms."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"564ea1fa95f4344c6db00773d1277160"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"normalizedHash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"62f76eb48d60a1c46cb74ce42063bd9c0816ca5e17877738a824525c9794ceaf"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1c2ea42ab4b9afdc069441401a1..."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8ba08ef2a745246f309ec4eaff5d7652c4fc01e61eebd9aabc1c58996355acd7"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="response">応答 Response</h3>

<p>金額とトランザクションIDを含む、instant保証のメッセージを返します。</p>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>数字</td>
<td>Instant保証の金額、単位はSatoshi</td>
</tr>
<tr>
<td>createTime</td>
<td>日時</td>
<td>トランザクションが作成された時間</td>
</tr>
<tr>
<td>guarantee</td>
<td>文字列</td>
<td>即座トランザクションを保証する BitGo によるメッセージ</td>
</tr>
<tr>
<td>id</td>
<td>文字列</td>
<td>BitGo のインスタント保証 ID</td>
</tr>
<tr>
<td>transactionId</td>
<td>文字列</td>
<td>保証されたトランザクションのハッシュ</td>
</tr>
<tr>
<td>normalizedHash</td>
<td>文字列</td>
<td>署名のない保証されたトランザクションのハッシュ</td>
</tr>
<tr>
<td>signature</td>
<td>文字列</td>
<td>紛争があった場合に備え監査記録を提供するための、暗号署名された保証</td>
</tr>
<tr>
<td>state</td>
<td>文字列</td>
<td>BitGoによってモニタリングされるトランザクションの状態（あなたの方で措置を講じる必要はありません）</td>
</tr>
</tbody></table>

<h3 id="bitgo-verifying-bitgo-39-s-guarantee">BitGoの保証を認証する Verifying BitGo&rsquo;s Guarantee</h3>

<p>BitGoの保証は、パブリックビットコインアドレス（1BitGo3gxRZ6mQSEH52dvCKSUgVCAH4Rja）に対応する私達の会社の署名キーを使用して署名されます。</p>

<p>確認するには、私達の署名で保証を認証します。例：</p>

<p><code class="prettyprint">assert(bitcoin.Message.verify(&#39;1BitGo3gxRZ6mQSEH52dvCKSUgVCAH4Rja&#39;, signature, guarantee, process.config.bitcoin.network));</code></p>

<p>署名が有効な場合、ブロック情報を全く必要としないでトランザクションを即座に受け取ることができます。 保証の署名を節約して&amp; ローカルで署名して紛争があった場合に監査記録を提供することができます。</p>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>認証パラメーターが一致しない、またはアンロックが必要</td>
</tr>
</tbody></table>

<h2 id="get-wallet-by-address">アドレスでウォレットを取得する Get Wallet by Address</h2>

<p>アドレスを与えられ、そのアドレスの情報(残高も含む) とそのアドレスが関連するウォレットを返します。 １人で多数のアドレス/ウォレットを持っているが、アドレスが属するウォレットが不明な時に役に立ちます。</p>
<pre class="highlight shell"><code><span class="nv">ADDRESS</span><span class="o">=</span>2NBMGw7K9XiBPfvW3nUQcrANKncmAoLUdDX

curl -X GET <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/walletaddress/<span class="nv">$ADDRESS</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">address</span> <span class="o">=</span> <span class="s1">'2NBMGw7K9XiBPfvW3nUQcrANKncmAoLUdDX'</span><span class="p">;</span>
<span class="nx">bitgo</span><span class="p">.</span><span class="nx">getWalletAddress</span><span class="p">({</span> <span class="na">address</span><span class="p">:</span> <span class="nx">address</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/walletaddress/:address</code></p>

<h3 id="url-url-parameters">URLパラメーター URL Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>address</td>
<td>ビットコインアドレス(文字列)</td>
<td>YES</td>
<td>情報をルックアップするアドレス</td>
</tr>
</tbody></table>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3JNUVmyjdLySccafwPSGDfS3dCVEz3Rnpj"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"chain"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
    </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/0/7"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"received"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"redeemScript"</span><span class="p">:</span><span class="w"> </span><span class="s2">"52210306d46ec69fdbf36c0eb1c4fe96ac0417d1375490a6811fdfa6f1dc3c78aad50c2102fb38d7ffb3e354a74b3231eeee6b361c7f3c5ddccac15c7f06e5557f4e6a5318210270467cb619033ef9bcb7cc39d4ce45084418229c0e8aa65821345a222a24a2e453ae"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"sent"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"txCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"wallet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"32uFQgny5bgj24nywQPo5cgEUGX6a1PuAp"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="response">応答 Response</h3>

<p>ウォレットアドレスオブジェクトを返します。</p>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>address</td>
<td>ルックアップされているビットコインアドレス</td>
</tr>
<tr>
<td>balance</td>
<td>このアドレスの現在の残高 (単位はsatoshi)</td>
</tr>
<tr>
<td>chain</td>
<td>このアドレスを生成するのに使用されたHDチェーン(ユーザーが生成したアドレスは0、お釣りアドレスは1)</td>
</tr>
<tr>
<td>index</td>
<td>アドレスを生成するのに使用されたHDチェーン内のインデックス</td>
</tr>
<tr>
<td>path</td>
<td>ウォレット内のアドレスのHDパス</td>
</tr>
<tr>
<td>received</td>
<td>このアドレスで受信した合計金額 (単位はsatoshi)</td>
</tr>
<tr>
<td>sent</td>
<td>このアドレスで送信した合計金額 (単位はsatoshi)</td>
</tr>
<tr>
<td>txCount</td>
<td>このアドレスでのトランザクションの合計数</td>
</tr>
<tr>
<td>redeemScript</td>
<td>このP2SHアドレスからの資金の消費に使用される可能性があるredeemScript</td>
</tr>
<tr>
<td>wallet</td>
<td>このアドレスがあるウォレットのベースアドレス（ウォレットID）　</td>
</tr>
</tbody></table>

<h2 id="freeze-wallet">財布を凍結する Freeze Wallet</h2>
<pre class="highlight shell"><code><span class="nv">WALLETID</span><span class="o">=</span><span class="s1">'2N8ryDAob6Qn8uCsWvkkQDhyeCQTqybGUFe'</span>
<span class="nv">DURATION</span><span class="o">=</span><span class="s1">'4000'</span>
curl -X POST <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s2">"{ </span><span class="se">\"</span><span class="s2">duration</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$DURATION</span><span class="se">\"</span><span class="s2"> }"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/wallet/<span class="nv">$WALLETID</span>/freeze
</code></pre>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">get</span><span class="p">({</span> <span class="s2">"id"</span><span class="p">:</span> <span class="nx">walletId</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">bitgo</span><span class="p">.</span><span class="nx">unlock</span><span class="p">({</span> <span class="na">otp</span><span class="p">:</span> <span class="nx">otp</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">"Could not unlock!"</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">wallet</span><span class="p">.</span><span class="nx">freeze</span><span class="p">({</span> <span class="s2">"duration"</span><span class="p">:</span> <span class="mi">4000</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"time"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-01T03:51:39.779Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expires"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-01T04:58:19.779Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>ウォレットでの全ての使用活動を防止します。このコールは緊急時に使用されるように設計されており、デフォルトで一時間使用を防止します。</p>

<h3 id="parameters">パラメーター Parameters</h3>

<p>| パラメーター   | 種類 | 必須か | 説明                        |
| &mdash;&mdash;&ndash; | &ndash; | &mdash; | &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;- |
| duration | 数字 | NO  | 使用活動の凍結の期間、秒数で。デフォルトで1時間。 |</p>

<h3 id="response">応答 Response</h3>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>time</td>
<td>凍結のコマンドが呼び出された日付</td>
</tr>
<tr>
<td>expires</td>
<td>使用活動が認められるようになる日付</td>
</tr>
</tbody></table>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>認証パラメーターが一致しない、またはアンロックが必要</td>
</tr>
</tbody></table>

<h1 id="wallet-sharing">ウォレットの共有 Wallet Sharing</h1>

<p>BitGoウォレットは複数のユーザー間で共有することが出来ます。 ウォレットのすべてのユーザーは同じ秘密鍵を共有します（各ユーザーはそれを個別に暗号化することできますが）。</p>

<p>BitGoによって共有されるウォレットのセキュリティが施行され、ユーザーはログイン後、認証を行うことを求められます。 ウォレットのアクセス許可レベルは、ウォレットで各ユーザーが行えることを定義します。</p>

<h3 id="wallet-permissions">ウォレットの許可 Wallet Permissions</h3>

<table><thead>
<tr>
<th>許可</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>View</td>
<td>ウォレットでのトランザクションを表示</td>
</tr>
<tr>
<td>Spend</td>
<td>ウォレットポリシーの対象となるトランザクションを、ウォレットで開始する</td>
</tr>
<tr>
<td>Admin</td>
<td>ポリシーを変更し、ウォレットでユーザーと設定を管理</td>
</tr>
</tbody></table>

<h2 id="sharing-a-wallet">ウォレットを共有する Sharing a wallet</h2>
<pre class="highlight shell"><code>ローカル メソッドとしてのみ使用できます <span class="o">(</span>BitGo Express<span class="o">)</span> 

<span class="nv">WALLETID</span><span class="o">=</span><span class="s1">'2N8ryDAob6Qn8uCsWvkkQDhyeCQTqybGUFe'</span>
<span class="nv">PASSPHRASE</span><span class="o">=</span><span class="s1">'walletpassphrase'</span>
<span class="nv">RECEIVEREMAIL</span><span class="o">=</span><span class="s1">'test@bitgo.com'</span>

curl -X POST <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s2">"{ </span><span class="se">\"</span><span class="s2">walletPassphrase</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$PASSPHRASE</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">email</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$RECEIVEREMAIL</span><span class="se">\"</span><span class="s2"> }"</span> <span class="se">\</span>
http://<span class="nv">$BITGO_EXPRESS_HOST</span>:3080/api/v1/wallet/<span class="nv">$WALLETID</span>/simpleshare
</code></pre>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">get</span><span class="p">({</span> <span class="s2">"id"</span><span class="p">:</span> <span class="nx">walletId</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">wallet</span><span class="p">.</span><span class="nx">shareWallet</span><span class="p">({</span> <span class="na">email</span><span class="p">:</span> <span class="nx">receiverUser</span><span class="p">,</span> <span class="na">walletPassphrase</span><span class="p">:</span> <span class="nx">senderPassword</span><span class="p">,</span> <span class="na">permissions</span><span class="p">:</span> <span class="s1">'view,spend'</span><span class="p">,</span> <span class="na">skipKeychain</span><span class="p">:</span> <span class="kc">false</span> <span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">});</span>
</code></pre>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"54c594802ebe8510790092958f526f47"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"walletId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2MsaMz4tYy5RieZ8qBeW1rhsTpNAXjpofSC"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"walletLabel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test2"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"fromUser"</span><span class="p">:</span><span class="w"> </span><span class="s2">"54c589521758c40e79008e91a7088190"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"toUser"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5458141599f715232500000530a94fd2"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"permissions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"view,spend,admin"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"keychain"</span><span class="p">:</span><span class="w">
   </span><span class="p">{</span><span class="w"> </span><span class="nt">"xpub"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xpub661MyMwAqRbcFcDmevjhDfSebRy8toH17gJ64a2qAMr5gC4JZRWLUJwPDFeKg6aTMNPa1hYQ3s5kJkDNPMbAw5oQdcjn9N58rYQeUnUozFn"</span><span class="p">,</span><span class="w">
     </span><span class="nt">"encryptedXprv"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{iv:uoXLSMgfplagVOku..."</span><span class="p">,</span><span class="w">
     </span><span class="nt">"fromPubKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"041363164D0521A..."</span><span class="p">,</span><span class="w">
     </span><span class="nt">"toPubKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"031D388E7B16FE.."</span><span class="p">,</span><span class="w">
     </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m/999999/26697279/124485569"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<aside class="info"> この操作では、Unlock APIを使ってセッションをアンロックすることが必要です。 </aside> 

<p>ウォレットの共有は、もう一人のユーザーにウォレットを使用する許可をBitGoを通じ与えることを伴います。</p>

<p>受取り手がウォレットを使用するには、私達は彼らと秘密鍵を共有する必要があります。 BitGoの各ユーザーは登録プロセスの際、この目的のために公開と秘密のキーペアを作成します。</p>

<p>BitGo SDKはクライアント側で以下を行って、新たなウォレットの共有を作成します:</p>

<ul>
<li>受け取るユーザーの共有する鍵を取得する（受取り手の公開鍵の派生パス）</li>
<li>ローカルで共有されるウォレットを復号化する</li>
<li>上の公開鍵に対しウォレットを再暗号化し、受取り手だけが復号化できるようにする。</li>
<li>暗号化された鍵をBitGoサービスにアップロードし、BitGoサービスは受取り手に保留中の共有があることを知らせる。</li>
</ul>

<h3 id="parameters">パラメーター Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>文字列</td>
<td>YES</td>
<td>ウォレットを共有するユーザーのメールアドレス</td>
</tr>
<tr>
<td>permissions</td>
<td>文字列</td>
<td>YES</td>
<td>コンマで区切った許可のリスト（例：view、spend、admin）</td>
</tr>
<tr>
<td>walletPassphrase</td>
<td>文字列</td>
<td>NO</td>
<td>共有されているウォレットのパスフレーズ</td>
</tr>
<tr>
<td>skipKeychain</td>
<td>ブーリアン</td>
<td>NO</td>
<td>帯域外でキーチェーンを取得する別のユーザーと、ウォレットを共有の場合trueに設定</td>
</tr>
<tr>
<td>disableEmail</td>
<td>ブーリアン</td>
<td>NO</td>
<td>追加されたユーザーに送信される通知メールを止めるには、trueに設定</td>
</tr>
</tbody></table>

<h3 id="response">応答 Response</h3>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>ウォレット共有のid、受け入れるために使用</td>
</tr>
<tr>
<td>walletId</td>
<td>共有されているウォレットのid</td>
</tr>
<tr>
<td>walletLabel</td>
<td>ユーザーに提示するウォレットのラベル</td>
</tr>
<tr>
<td>fromUser</td>
<td>ウォレットを共有しているユーザーのBitGo ID</td>
</tr>
<tr>
<td>toUser</td>
<td>ウォレットを受け取るユーザーのBitGo ID</td>
</tr>
<tr>
<td>permissions</td>
<td>ウォレットの共有が受取り手のユーザーに与える許可の、コンマで区切ったリスト</td>
</tr>
<tr>
<td>keychain</td>
<td>（秘密鍵を取得する目的で）受取り手が復号化するための暗号化されたキーチェーン</td>
</tr>
</tbody></table>

<h2 id="list-wallet-shares">ウォレット共有の一覧を表示する List Wallet Shares</h2>
<pre class="highlight shell"><code>curl -X GET <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/walletShare
</code></pre>
<pre class="highlight javascript"><code>  <span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">listShares</span><span class="p">({},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre>

<p>ログオン中のアカウントについて着信及び発信したウォレット共有の一覧を取得します。</p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/walletShare</code></p>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"incoming"</span><span class="p">:</span><span class="w">
   </span><span class="p">[</span><span class="w">
     </span><span class="p">{</span><span class="w"> </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"54c58f8d2ebe851079008fe3bbd9e50f"</span><span class="p">,</span><span class="w">
       </span><span class="nt">"walletId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2N8ryDAob6Qn8uCsWvkkQDhyeCQTqybGUFe"</span><span class="p">,</span><span class="w">
       </span><span class="nt">"walletLabel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test1"</span><span class="p">,</span><span class="w">
       </span><span class="nt">"fromUser"</span><span class="p">:</span><span class="w"> </span><span class="s2">"54c589521758c40e79008e91a7088190"</span><span class="p">,</span><span class="w">
       </span><span class="nt">"toUser"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5458141599f715232500000530a94fd2"</span><span class="p">,</span><span class="w">
       </span><span class="nt">"permissions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"view,spend,admin"</span><span class="p">,</span><span class="w">
       </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="w"> </span><span class="p">},</span><span class="w">
     </span><span class="p">{</span><span class="w"> </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"54c594802ebe8510790092958f526f47"</span><span class="p">,</span><span class="w">
       </span><span class="nt">"walletId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2MsaMz4tYy5RieZ8qBeW1rhsTpNAXjpofSC"</span><span class="p">,</span><span class="w">
       </span><span class="nt">"walletLabel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test2"</span><span class="p">,</span><span class="w">
       </span><span class="nt">"fromUser"</span><span class="p">:</span><span class="w"> </span><span class="s2">"54c589521758c40e79008e91a7088190"</span><span class="p">,</span><span class="w">
       </span><span class="nt">"toUser"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5458141599f715232500000530a94fd2"</span><span class="p">,</span><span class="w">
       </span><span class="nt">"permissions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"view,spend,admin"</span><span class="p">,</span><span class="w">
       </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="w"> </span><span class="p">}</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="nt">"outgoing"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="response">応答 Response</h3>

<p>各ウォレット共有オブジェクトは、次のフィールドを含みます：</p>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>ウォレット共有のid、受け入れるために使用</td>
</tr>
<tr>
<td>walletId</td>
<td>共有されているウォレットのid</td>
</tr>
<tr>
<td>walletLabel</td>
<td>ユーザーに提示するウォレットのラベル</td>
</tr>
<tr>
<td>fromUser</td>
<td>ウォレットを共有しているユーザーのBitGo ID</td>
</tr>
<tr>
<td>toUser</td>
<td>ウォレットを受け取るユーザーのBitGo ID</td>
</tr>
<tr>
<td>permissions</td>
<td>ウォレットの共有が受取り手のユーザーに与える許可の、コンマで区切ったリスト</td>
</tr>
</tbody></table>

<h2 id="accept-wallet-share">ウォレット共有を受け入れる Accept Wallet Share</h2>
<pre class="highlight shell"><code>ローカル メソッドとしてのみ使用できます <span class="o">(</span>BitGo Express<span class="o">)</span> 

<span class="nv">SHAREID</span><span class="o">=</span><span class="s1">'54c594802ebe8510790092958f526f47'</span>
<span class="nv">NEWPASSPHRASE</span><span class="o">=</span><span class="s1">'receiverpassphrase'</span>
<span class="nv">PASSWORD</span><span class="o">=</span><span class="s1">'sharingkeypassword'</span>

curl -X POST <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s2">"{ </span><span class="se">\"</span><span class="s2">newWalletPassphrase</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$NEWPASSPHRASE</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">userPassword</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$PASSWORD</span><span class="se">\"</span><span class="s2"> }"</span> <span class="se">\</span>
http://<span class="nv">$BITGO_EXPRESS_HOST</span>:3080/api/v1/walletshare/<span class="nv">$SHAREID</span>/acceptShare
</code></pre>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">acceptShare</span><span class="p">(</span>
    <span class="p">{</span> <span class="na">walletShareId</span><span class="p">:</span> <span class="nx">shareId</span><span class="p">,</span>
      <span class="na">newWalletPassphrase</span><span class="p">:</span> <span class="s1">'receiverpassphrase'</span><span class="p">,</span>
      <span class="na">userPassword</span><span class="p">:</span> <span class="s1">'receiverpassword'</span>
    <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">)</span>
</code></pre>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w"> </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"accepted"</span><span class="p">,</span><span class="w"> </span><span class="nt">"changed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>

<aside class="info"> この操作では、Unlock APIを使ってセッションをアンロックすることが必要です。 </aside> 

<p>ウォレット共有を受け入れるためのクライアント側の操作です。次の手順を実行します：</p>

<ul>
<li>暗号化された秘密のキーチェーンを含む、着信したウォレットの共有を取得する</li>
<li>ユーザーが共有する秘密鍵とウォレット共有xPubを使用してプライベートのキーチェーンを復号化する鍵を派生させる。</li>
<li>将来の利用のため、ユーザーが選んだパスフレーズでウォレットを再暗号化する。</li>
<li>暗号化された鍵をBitGoのサービスにアップロードし、共有を「accepted」(受け入れられた) にセットする。そうするとユーザーに、BigGoにあるウォレットへのアクセスが与えられる。</li>
</ul>

<h3 id="parameters">パラメーター Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>walletShareId</td>
<td>ビットコインアドレス(文字列)</td>
<td>YES</td>
<td>受け入れる、着信したウォレット共有ID</td>
</tr>
<tr>
<td>newWalletPassphrase</td>
<td>文字列</td>
<td>NO</td>
<td>将来の使用の際用いるための、ウォレットで設定するパスフレーズ</td>
</tr>
<tr>
<td>userPassword</td>
<td>文字列</td>
<td>NO</td>
<td>共有された秘密鍵を復号化する、ユーザーのパスワード</td>
</tr>
<tr>
<td>overrideEncryptedXprv</td>
<td>文字列</td>
<td>NO</td>
<td>帯域外で受け取った暗号化されたxprvの保存を望む場合、代替の暗号化されたxprvに設定する</td>
</tr>
</tbody></table>

<h3 id="response">応答 Response</h3>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>ウォレット共有の最終状態（&#39;accepted&#39;であるべき）</td>
</tr>
<tr>
<td>changed</td>
<td>成功した場合、 true</td>
</tr>
</tbody></table>

<h2 id="cancel-wallet-share">ウォレット共有をキャンセルする Cancel Wallet Share</h2>
<pre class="highlight shell"><code><span class="nv">SHAREID</span><span class="o">=</span><span class="s1">'54c594802ebe8510790092958f526f47'</span>

curl -X DELETE <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/walletshare/<span class="nv">$SHAREID</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">cancelShare</span><span class="p">({</span> <span class="na">walletShareId</span><span class="p">:</span> <span class="nx">cancelledWalletShareId</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span> <span class="p">}</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">)</span>
</code></pre>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w"> </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"canceled"</span><span class="p">,</span><span class="w"> </span><span class="nt">"changed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>

<p>保留中の発信したウォレット共有をキャンセルする、または着信した共有を拒否するのに使用できる。共有はまだ受け入れられているべきでない。</p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">DELETE/api/v1/walletshare/:SHAREID</code></p>

<h3 id="response">応答 Response</h3>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>ウォレット共有の新たな状態</td>
</tr>
<tr>
<td>changed</td>
<td>成功した場合、 true</td>
</tr>
</tbody></table>

<h2 id="remove-wallet-user">ウォレットのユーザーを削除する Remove Wallet User</h2>

<p>ユーザーがウォレットの共有を受け入れた後、彼らはウォレットの当事者になり、ウォレットの共有は「完了」とみなされます。</p>

<p>受け入れられた後に共有を解除するためには、ウォレットからユーザーを削除することができます。</p>

<p>ウォレットの管理者が複数名いる場合、別のウォレット管理者による承認を要する場合があります。</p>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">get</span><span class="p">({</span> <span class="s2">"id"</span><span class="p">:</span> <span class="nx">walletId</span> <span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">wallet</span><span class="p">.</span><span class="nx">removeUser</span><span class="p">({</span> <span class="s2">"user"</span><span class="p">:</span> <span class="nx">userId</span> <span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// handle error</span>
    <span class="p">}</span>
    <span class="c1">// etc</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight shell"><code><span class="nv">WALLETID</span><span class="o">=</span>2MvPJ8GMoFFWdUTh6p42FJV6XpmJEVjxv92
<span class="nv">USERID</span><span class="o">=</span>5479ac2bfb1d3e5e71000005d4dc49e3
curl -X DELETE <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/wallet/<span class="nv">$WALLETID</span>/user/<span class="nv">$USERID</span>
</code></pre>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">DELETE /api/v1/wallet/:wallet/user/:userId</code></p>

<h3 id="url-url-parameters">URLパラメーター URL Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>wallet</td>
<td>YES</td>
<td>ウォレットのID</td>
</tr>
<tr>
<td>userId</td>
<td>YES</td>
<td>削除するユーザーのユーザーid(ウォレットオブジェクトで見つけることができる)</td>
</tr>
</tbody></table>

<h3 id="response">応答 Response</h3>

<p>このウォレットの更新されたウォレットモデル、または保留中の承認オブジェクトを返します(承認が必要な場合)</p>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>認証パラメーターが一致しない、またはアンロックが必要</td>
</tr>
</tbody></table>

<h1 id="wallet-policy">ウォレットのポリシー Wallet Policy</h1>

<p>BitGoウォレットはマルチユーザーまたはトランザクションとの2FA（2要素認証）承認そして支出制限等の、高度なセキュリティ機能を特徴としています。 これを利用するために、ユーザー/開発者はウォレットのポリシールールを追加、修正することができます。 ルールは（ユーザーによって設定された）関連付けられたアクションをトリガーします。 ポリシーエンジンは全てのトリガーされたルール結果を集め、deny、 get approval (別のユーザーから), get OTP (別のユーザーによってSMSを通じ送信)、 allow (デフォルト) の順で任意のトリガーされたアクションを実行します。</p>

<p>ウォレットに残高があり、2人以上のウォレットに関連付けられた&quot;admin&quot;ユーザーがいる場合、全てのポリシー変更には、有効になる前に別の管理者による承認を必要とします（追加の&quot;admin&quot;ユーザーがいない場合、不要です）。 よって、<a href="#wallet-sharing">ウォレットの共有を実行する</a>ことにより最低2人の管理者でウォレットを作成すること強く推奨します。 そうすれば、ポリシーは、1人のユーザーが不正アクセスを受けたとしても有効になります。</p>

<p>&quot;getOTP&quot;アクションタイプのポリシーについては、トランザクションを正常に送信するには、署名され送信される前に7桁のワンタイムパスワードが必要になります。 このポリシーは事実上、デバイスに、あなた自身で実装する必要なしに二要素認証を提供するものです。 トランザクション送信の一回目の試みは失敗し、コードをポリシーで指定されている電話に送信します。 ユーザーからコードを取得したら、もう一度APIコールのパラメーターとしてotpコードが含まれた送信トランザクションを行い、トランザクションは正常に送信されます。 詳細は<a href="#send-coins-to-address">アドレスにコインを送信する</a>にある&quot;otp&quot;パラメーターを参照下さい。</p>

<p>このドキュメンテーションでは、単一ウォレットに関わる基本的なBitGoポリシーのAPIとSDKをカバーします。 <a href="#set-policy-rule">webhookポリシータイプ</a>を使用して、さらなるカスタムポリシーを実装することができます。BitGoは外部の状態に関連したカスタムポリシーの動作を評価することができるURLエンドポイントを呼び出します。</p>

<p>複数のウォレットが関わる高度なポリシーは、BitGoに直接連絡することにより実装が可能です。</p>

<h2 id="get-policy">ポリシーを取得する Get Policy</h2>
<pre class="highlight shell"><code><span class="nv">WALLET</span><span class="o">=</span>2NEe9QhKPB2gnQLB3hffMuDcoFKZFjHYJYx

curl -X GET <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/wallet/<span class="nv">$WALLET</span>/policy
</code></pre>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">get</span><span class="p">({</span> <span class="s2">"id"</span><span class="p">:</span> <span class="nx">walletId</span> <span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">wallet</span><span class="p">.</span><span class="nx">getPolicy</span><span class="p">({},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">policy</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// handle error</span>
    <span class="p">}</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">policy</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-04-29T19:03:37.189Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55380d34d0d3b00364a52285f09e23a4"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"getApproval"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"condition"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">200000000</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"com.bitgo.limit.day"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dailyLimit"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"getOTP"</span><span class="w">
                </span><span class="s2">"actionParams"</span><span class="err">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nt">"otpType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+15417543010"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"duration"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3600"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"condition"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">200000000</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"com.bitgo.limit.tx"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"transactionLimit"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>ウォレットの操作に関するポリシールールを取得します。</p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/wallet/:walletId/policy</code></p>

<h3 id="url-url-parameters">URLパラメーター URL Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>walletId</td>
<td>ビットコインアドレス(文字列)</td>
<td>YES</td>
<td>ウォレットのID</td>
</tr>
</tbody></table>

<h3 id="response">応答 Response</h3>

<p>それに設定されたルールを含むウォレットポリシーオブジェクトを返します。</p>

<h2 id="get-policy-status">ポリシー ステータスを取得する Get Policy Status</h2>
<pre class="highlight shell"><code><span class="nv">WALLET</span><span class="o">=</span>2NEe9QhKPB2gnQLB3hffMuDcoFKZFjHYJYx

curl -X GET <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/wallet/<span class="nv">$WALLET</span>/policy/status
</code></pre>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">get</span><span class="p">({</span> <span class="s2">"id"</span><span class="p">:</span> <span class="nx">walletId</span> <span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">wallet</span><span class="p">.</span><span class="nx">getPolicyStatus</span><span class="p">({},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">policy</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// handle error</span>
    <span class="p">}</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">policy</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"statusResults"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"policy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55380d34d0d3b00364a52285f09e23a4"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"ruleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"com.bitgo.limit.day"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"remaining"</span><span class="p">:</span><span class="w"> </span><span class="mi">94982419</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"policy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55380d34d0d3b00364a52285f09e23a4"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"ruleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"com.bitgo.limit.tx"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"remaining"</span><span class="p">:</span><span class="w"> </span><span class="mi">200000000</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/wallet/:walletId/policy/status</code></p>

<h3 id="url-url-parameters">URLパラメーター URL Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>walletId</td>
<td>ビットコインアドレス(文字列)</td>
<td>YES</td>
<td>ウォレットのID</td>
</tr>
</tbody></table>

<h3 id="response">応答 Response</h3>

<p>使用の制限に関する情報を含む、ウォレットポリシーで有効になっているルールによって生成されたステータス結果を返します</p>

<h2 id="set-policy-rule">ポリシールールを設定する Set Policy Rule</h2>

<p>ウォレットでのポリシーを設定します。ウォレットポリシーは、BitGoが一つの鍵を使ってトランザクションに署名する条件をコントロールします。</p>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">walletId</span> <span class="o">=</span> <span class="s1">'2MufYDkh6iwNDtyREBeAXcrRDDAopG1RNc2'</span><span class="p">;</span>
<span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">get</span><span class="p">({</span> <span class="s2">"id"</span><span class="p">:</span> <span class="nx">walletId</span> <span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span> <span class="p">}</span>
  <span class="c1">// Sets the policy</span>
  <span class="kd">var</span> <span class="nx">rule</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">id</span><span class="p">:</span> <span class="s2">"test1"</span><span class="p">,</span>
    <span class="na">type</span><span class="p">:</span> <span class="s2">"dailyLimit"</span>
    <span class="na">action</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="s2">"getApproval"</span> <span class="p">},</span>
    <span class="na">condition</span><span class="p">:</span> <span class="p">{</span> <span class="s2">"amount"</span><span class="p">:</span> <span class="mi">101</span><span class="o">*</span><span class="mi">1</span><span class="nx">e8</span> <span class="p">},</span>
  <span class="p">};</span>
  <span class="nx">wallet</span><span class="p">.</span><span class="nx">setPolicyRule</span><span class="p">(</span><span class="nx">rule</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span> <span class="p">}</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">wallet</span><span class="p">.</span><span class="nx">admin</span><span class="p">.</span><span class="nx">policy</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight shell"><code>curl -X PUT -H <span class="s2">"Content-Type: application/json"</span> -H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s1">'{ "action" : { "type" : "getApproval" }, "condition": { "amount" : 100000000 }, "id": "com.bitgo.limit.tx", "type": "transactionLimit", "default":true}'</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/wallet/<span class="nv">$WALLETID</span>/policy/rule
</code></pre>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">PUT /api/v1/wallet/:wallet/policy/rule</code><aside class="info"> この操作では、Unlock APIを使ってセッションをアンロックすることが必要です。 </aside> </p>

<h3 id="body-body-parameters">BODYパラメーター BODY Parameters</h3>

<p>ポリシールールオブジェクトは種類、条件、そしてアクションを持ちます。この種類のポリシーはしばしば条件の値を決定します。</p>

<p>| パラメーター    | 種類                      | 必須か                                                | 例 |
| &mdash;&mdash;&mdash; | &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash; | &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash; | - |
| id        | ポリシーの id                | &quot;com.bitgo.limit.tx&rdquo;, &ldquo;custom1&rdquo;, &ldquo;anyUniqueRuleId&rdquo; |   |
| type      | ポリシーの種類                 | <em>ポリシーの種類を参照</em>                                       |   |
| condition | このポリシーの条件               | <em>ポリシーの種類を参照</em>                                       |   |
| action    | 条件が false の場合に実行するアクション | <em>ポリシー アクション オブジェクトを参照</em>                             |   |</p>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-10-29T23:33:20.166Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5631d2f48cad5fab2c6abe16682372bb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"getApproval"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"condition"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">100000000</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"com.bitgo.limit.tx"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"transactionLimit"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"getApproval"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"condition"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"addresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"muDjD4YdVzi1vyqKtYVbAkLi2J84GkKj5h"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"com.bitgo.whitelist.address"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bitcoinAddressWhitelist"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="response">応答 Response</h3>

<p>更新されたウォレットモデルオブジェクトを返します。</p>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>認証パラメーターが一致しない</td>
</tr>
</tbody></table>

<h3 id="policy-object">ポリシー オブジェクト Policy Object</h3>

<p>統合されたウォレットポリシーはポリシールールオブジェクトの配列です。ポリシールールオブジェクトは種類、条件、そしてアクションを持ちます。</p>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
<th>可能な値</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>ポリシーの id</td>
<td>&ldquo;com.bitgo.limit.tx&rdquo;, &ldquo;custom1&rdquo;, &ldquo;anyUniqueRuleId&rdquo;</td>
</tr>
<tr>
<td>type</td>
<td>ポリシーの種類</td>
<td>&ldquo;transactionLimit&rdquo;, &ldquo;dailyLimit&rdquo;, &ldquo;bitcoinAddressWhitelist&rdquo;, &ldquo;webhook&rdquo;</td>
</tr>
<tr>
<td>condition</td>
<td>このポリシーの条件</td>
<td><em>使用されるポリシー ルールの種類によって異なる</em></td>
</tr>
<tr>
<td>action</td>
<td>条件が false の場合に実行するアクション</td>
<td><em>ポリシー アクション オブジェクトを参照</em></td>
</tr>
</tbody></table>

<h3 id="dailylimit">ポリシータイプ - dailyLimit</h3>

<p>直近の24時間の間にビットコインの額が一定額を超過すると、 (一日の限度) ポリシールールがトリガーされます。</p>

<p>そのための条件には次があります:</p>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
<th>可能な値</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>一日あたりの全てのトランザクションの可能な最大額</td>
<td>Satoshis 単位の額</td>
</tr>
</tbody></table>

<h3 id="transactionlimit">ポリシータイプ - transactionLimit</h3>

<p>単一のトランザクションが指定された金額を超過した場合、transactionLimitポリシールールがトリガーされます。</p>

<p>そのための条件には次があります:</p>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
<th>可能な値</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>ウォレットの全てのトランザクションの可能な最大額</td>
<td>Satoshis 単位の額</td>
</tr>
</tbody></table>

<h3 id="bitcoinaddresswhitelist">ポリシータイプ - bitcoinAddressWhitelist</h3>

<p>有効な時、送信トランザクションの宛先ビットコインアドレス（お釣りでない）がホワイトリストにない場合、いつでもビットコインアドレスホワイトリストルールがトリガーされます。</p>

<p>そのための条件には次があります:</p>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
<th>可能な値</th>
</tr>
</thead><tbody>
<tr>
<td>add</td>
<td>ホワイトリストに追加するビットコインアドレス</td>
<td>ビットコインアドレス</td>
</tr>
<tr>
<td>remove</td>
<td>ホワイトリストから削除するビットコインアドレス</td>
<td>ビットコインアドレス</td>
</tr>
</tbody></table>

<blockquote>
<p>Webhookコールバックの例(サーバに送信され、全ての非200応答はポリシールールアクションをトリガーします)</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"approvalCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"outputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"outputAddress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2N9kNR8iS46WuwekvQVaTUa74w2fbvAXHQn"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"outputWallet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2MufYDkh6iwNDtyREBeAXcrRDDAopG1RNc2"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">24885327</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"outputAddress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2N8ryDAob6Qn8uCsWvkkQDhyeCQTqybGUFe"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"outputWallet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2N8ryDAob6Qn8uCsWvkkQDhyeCQTqybGUFe"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000000</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"ruleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"webhookRule1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"spendAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10009060</span><span class="p">,</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"webhook"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"unsignedRawTx"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0100000001f8de6273285b13f20b59195c4..."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"walletId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2MufYDkh6iwNDtyREBeAXcrRDDAopG1RNc2"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="webhook-policy-type-webhook">ポリシータイプ - webhook Policy Type - webhook</h3>

<p>有効な時、webhookルールは条件で指定されたHTTPSエンドポイントへコールバックを発行します。 HTTPエンドポイントが非200(ステータス) 応答を返す場合、ルールはアクションをトリガーします。</p>

<p>このルールの条件は：</p>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
<th>可能な値</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td>HTTPsエンドポイントにコールバックを</td>
<td>発行するURL</td>
</tr>
</tbody></table>

<p>コールバックで送信されたBodyパラメーター：</p>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
<th>可能な値</th>
</tr>
</thead><tbody>
<tr>
<td>walletId</td>
<td>トランザクションの起点となっているウォレットのID</td>
<td>&ldquo;2N8ryDAob6Qn8uCsWvkkQDhyeCQTqybGUFe&rdquo;</td>
</tr>
<tr>
<td>ruleId</td>
<td>トランザクションの起点となっているウォレットのID</td>
<td>&ldquo;webhookPolicy1&rdquo;</td>
</tr>
<tr>
<td>outputs</td>
<td>OutputAddressとvalueを含むoutputオブジェクトの配列</td>
<td>[{ &ldquo;outputAddress&rdquo;:&ldquo;2N9kNR8iS46WuwekvQVaTUa74w2fbvAXHQn&rdquo;, &ldquo;value&rdquo;:24885327}]</td>
</tr>
<tr>
<td>spendAmount</td>
<td>正味(net) のウォレットからの使用額、お釣りを差し引いて(手数料含む)</td>
<td>10009060</td>
</tr>
<tr>
<td>approvalCount</td>
<td>これまでのウォレットでのユーザーによる承認の数</td>
<td></td>
</tr>
<tr>
<td>unsignedRawTx</td>
<td>半分署名の未処理トランザクションの 16 進数の文字列</td>
<td>&ldquo;0100000001&hellip; 0794c5382a38700000000&rdquo;</td>
</tr>
<tr>
<td>sequenceId</td>
<td>トランザクション作成の際、送信者によって提供されるカスタムシーケンスID</td>
<td>&ldquo;custom1&rdquo;</td>
</tr>
</tbody></table>

<h3 id="policy-action-object">ポリシーアクションオブジェクト Policy Action Object</h3>

<p>アクションとは、トランザクションによって条件が満たされない場合に実行するアクションです。</p>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
<th>可能な値</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>アクションの種類</td>
<td>&ldquo;deny&rdquo;, &ldquo;getApproval&rdquo;, &ldquo;getOTP&rdquo;</td>
</tr>
<tr>
<td>actionParams</td>
<td>Phone/otpType/durationを含むJSONオブジェクト</td>
<td><em>以下を参照</em></td>
</tr>
<tr>
<td>otpType</td>
<td>コードがどのように送られるべきかを決定する( type === &ldquo;getOTP&quot;に設定する必要がある)</td>
<td>&quot;sms&rdquo;</td>
</tr>
<tr>
<td>phone</td>
<td>コードを受信する電話番号(type === &ldquo;getOTP&quot;に設定する必要がある)</td>
<td>&quot;541-754-3010&rdquo;, &ldquo;+498963648018&rdquo;</td>
</tr>
<tr>
<td>duration</td>
<td>OTPが有効であるべき時間（秒数）（type === &ldquo;getOTP&quot;に設定する必要がある）</td>
<td>3600</td>
</tr>
</tbody></table>

<h2 id="remove-policy-rule">ポリシールールを削除する Remove Policy Rule</h2>
<pre class="highlight shell"><code><span class="nv">RULEID</span><span class="o">=</span><span class="s1">'test1'</span>
<span class="nv">WALLETID</span><span class="o">=</span><span class="s1">'2MvPJ8GMoFFWdUTh6p42FJV6XpmJEVjxv92'</span>

curl -X DELETE <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s2">"{ </span><span class="se">\"</span><span class="s2">id</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$RULEID</span><span class="se">\"</span><span class="s2"> }"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/wallet/<span class="nv">$WALLETID</span>/policy/rule
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">walletId</span> <span class="o">=</span> <span class="s1">'2MufYDkh6iwNDtyREBeAXcrRDDAopG1RNc2'</span><span class="p">;</span>
<span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">get</span><span class="p">({</span> <span class="s2">"id"</span><span class="p">:</span> <span class="nx">walletId</span> <span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span> <span class="p">}</span>
  <span class="nx">wallet</span><span class="p">.</span><span class="nx">removePolicyRule</span><span class="p">({</span> <span class="s2">"id"</span><span class="p">:</span> <span class="nx">ruleId</span> <span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span> <span class="p">}</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">wallet</span><span class="p">.</span><span class="nx">admin</span><span class="p">.</span><span class="nx">policy</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-10-29T23:33:20.166Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5631d2f48cad5fab2c6abe16682372bb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">],</span><span class="w">
  </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>指定されたidを持つポリシールールを削除する。ウォレットに複数の管理者がいる場合は、セカンダリー承認を必要とする場合があります。</p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">DELETE /api/v1/wallet/:WALLETID/policy/rule</code><aside class="info"> この操作では、Unlock APIを使ってセッションをアンロックすることが必要です。 </aside> </p>

<h3 id="body-body-parameters">BODYパラメーター BODY Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>文字列</td>
<td>YES</td>
<td>削除するポリシー ルールの id</td>
</tr>
</tbody></table>

<h3 id="response">応答 Response</h3>

<p>更新されたウォレットモデルオブジェクトを返します。</p>

<h1 id="pending-approvals">保留中の承認 Pending Approvals</h1>

<h2 id="list-pending-approvals">保留中の承認の一覧を表示する List Pending Approvals</h2>

<p>ウォレットidまたは提供することによりウォレットまたはエンタープライズの保留中の承認の一覧を表示します。</p>
<pre class="highlight shell"><code>curl -X GET <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/pendingapprovals?enterprise<span class="o">=</span><span class="nv">$ENTID</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">enterpriseId</span> <span class="o">=</span> <span class="s1">'2MufYDkh6iwNDtyREBeAXcrRDDAopG1RNc2'</span><span class="p">;</span>
<span class="nx">bitgo</span><span class="p">.</span><span class="nx">pendingapprovals</span><span class="p">().</span><span class="nx">list</span><span class="p">({</span>
  <span class="s2">"enterpriseId"</span><span class="p">:</span> <span class="nx">enterpriseId</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">pendingapprovals</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span> <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">pendingapprovals</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"pendingApprovals"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
       </span><span class="p">{</span><span class="w">
           </span><span class="nt">"createDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-04-28T21:57:52.747Z"</span><span class="p">,</span><span class="w">
           </span><span class="nt">"creator"</span><span class="p">:</span><span class="w"> </span><span class="s2">"54c2...0c79"</span><span class="p">,</span><span class="w">
           </span><span class="nt">"enterprise"</span><span class="p">:</span><span class="w"> </span><span class="s2">"54a2...1e88"</span><span class="p">,</span><span class="w">
           </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5540...0633"</span><span class="p">,</span><span class="w">
           </span><span class="nt">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nt">"policyRuleRequest"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                   </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"update"</span><span class="p">,</span><span class="w">
                   </span><span class="nt">"policyChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"553e...84c7"</span><span class="p">,</span><span class="w">
                   </span><span class="nt">"update"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                       </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                           </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"getApproval"</span><span class="w">
                       </span><span class="p">},</span><span class="w">
                       </span><span class="nt">"condition"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                           </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">300000000</span><span class="w">
                       </span><span class="p">},</span><span class="w">
                       </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"com.bitgo.limit.day"</span><span class="p">,</span><span class="w">
                       </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dailyLimit"</span><span class="w">
                   </span><span class="p">}</span><span class="w">
               </span><span class="p">},</span><span class="w">
               </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"policyRuleRequest"</span><span class="w">
           </span><span class="p">},</span><span class="w">
           </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="w">
       </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/pendingapprovals</code></p>

<h3 id="url-url-parameters">URLパラメーター URL Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>walletId</td>
<td>アドレス (文字列)</td>
<td>NO</td>
<td>ウォレットのベースアドレス</td>
</tr>
<tr>
<td>enterprise</td>
<td>文字列</td>
<td>NO</td>
<td>エンタープライズのパブリックID</td>
</tr>
</tbody></table>

<h3 id="response">応答 Response</h3>

<p>保留中の承認のリストを返します。</p>

<h2 id="update-pending-approval">保留中の承認を更新する Update Pending Approval</h2>

<p>保留中の承認の状態を&#39;approved&#39;または&#39;rejected&#39;に更新します。</p>
<pre class="highlight shell"><code>curl -X PUT <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN_OTHERENTERPRISEUSER</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s1">'{ "state": "approved" }'</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/pendingapprovals/:PENDINGAPPROVALID
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">enterpriseId</span> <span class="o">=</span> <span class="s1">'2MufYDkh6iwNDtyREBeAXcrRDDAopG1RNc2'</span><span class="p">;</span>
<span class="nx">bitgo</span><span class="p">.</span><span class="nx">pendingapprovals</span><span class="p">().</span><span class="nx">list</span><span class="p">({</span>
  <span class="s2">"enterpriseId"</span><span class="p">:</span> <span class="nx">enterpriseId</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">pendingapprovals</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span> <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">pendingapproval</span> <span class="o">=</span> <span class="nx">pendingapprovals</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
  <span class="nx">pendingapproval</span><span class="p">.</span><span class="nx">approve</span><span class="p">({</span>
    <span class="s2">"walletPassphrase"</span><span class="p">:</span> <span class="s2">"pa55w0rd"</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span> <span class="p">}</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"createDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-04-28T21:58:02.416Z"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"creator"</span><span class="p">:</span><span class="w"> </span><span class="s2">"54c2...0c79"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"enterprise"</span><span class="p">:</span><span class="w"> </span><span class="s2">"54a2...1e88"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5540...10f7"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
       </span><span class="nt">"policyRuleRequest"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
           </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"update"</span><span class="p">,</span><span class="w">
           </span><span class="nt">"policyChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"553e...84c7"</span><span class="p">,</span><span class="w">
           </span><span class="nt">"update"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                   </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"getApproval"</span><span class="w">
               </span><span class="p">},</span><span class="w">
               </span><span class="nt">"condition"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                   </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">300000000</span><span class="w">
               </span><span class="p">},</span><span class="w">
               </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"com.bitgo.limit.day"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dailyLimit"</span><span class="w">
           </span><span class="p">}</span><span class="w">
       </span><span class="p">},</span><span class="w">
       </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"policyRuleRequest"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nt">"resolvers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
       </span><span class="p">{</span><span class="w">
           </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-04-28T22:02:32.395Z"</span><span class="p">,</span><span class="w">
           </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5458...4fd2"</span><span class="w">
       </span><span class="p">}</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"approved"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">PUT /api/v1/pendingapprovals/:pendingApprovalId</code></p>

<h3 id="body-body-parameters">BODYパラメーター BODY Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>文字列</td>
<td>YES</td>
<td>保留中の承認の新たな状態： &#39;approved&#39;、 &#39;rejected&rsquo;</td>
</tr>
</tbody></table>

<h3 id="response">応答 Response</h3>

<p>新しい状態を持った更新された保留中の承認を返します。</p>

<h1 id="address-labels">アドレスのラベル Address Labels</h1>

<p>ラベルで、人間が読むことが出来るアドレスの記録（ノート）をつけることが可能です。 全ての有効なアドレスにラベルを追加することが出来ます。アドレスはウォレットがコントロールしているものである必要はありません。 アドレスラベルはウォレットラベルと異なりますが、ウォレットに紐づいているので、他のユーザーとウォレットを共有すると、彼らもラベルを見ることができます。</p>

<h2 id="list-labels-for-all-wallets">全てのウォレットのラベルの一覧を表示する List Labels For All Wallets</h2>
<pre class="highlight shell"><code>curl -X GET <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/labels
</code></pre>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">labels</span><span class="p">({},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">labels</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// handle error</span>
  <span class="p">}</span>
  <span class="c1">// do something with labels</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">labels</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<p>そのユーザーのウォレットの一覧を取得します</p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/labels</code></p>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"walletId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NAGz3TDs5HmBU2SEodtWyks9n5KXVCzBTf"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2N4Xz4itCdKKUREiySS7oBzoXUKnuxP4nRD"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My Favorite Multi-Sig Address"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"walletId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2MyWgQ3PMAWPenJnHJUPpVjFDLHhaPkZCz5"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"msWpfbCKSaz4wvqtqMwfmFkE58mTKxsRFG"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Watch-only Address"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="response">応答 Response</h3>

<p>ラベルモデルオブジェクトの配列を返します。</p>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>walletId</td>
<td>ウォレットのid(同時に最初の受信アドレス)</td>
</tr>
<tr>
<td>address</td>
<td>ラベルされているビットコインアドレス</td>
</tr>
<tr>
<td>label</td>
<td>アドレスラベル</td>
</tr>
</tbody></table>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>Response 応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>認証パラメーターが一致しない</td>
</tr>
</tbody></table>

<h2 id="list-labels-for-specific-wallet">特定のウォレットのラベルの一覧を表示する List Labels For Specific Wallet</h2>
<pre class="highlight shell"><code><span class="nv">WALLET</span><span class="o">=</span>2NAGz3TDs5HmBU2SEodtWyks9n5KXVCzBTf
curl -X GET <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/labels/<span class="nv">$WALLET</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">wallets</span> <span class="o">=</span> <span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"bitcoin"</span><span class="p">,</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"2NAGz3TDs5HmBU2SEodtWyks9n5KXVCzBTf"</span><span class="p">,</span>
<span class="p">};</span>
<span class="nx">wallets</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// handle error</span>
  <span class="p">}</span>
  <span class="c1">// do something with labels</span>
  <span class="nx">wallet</span><span class="p">.</span><span class="nx">labels</span><span class="p">({},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">labels</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
      <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">labels</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>

<p>そのウォレットのラベルの一覧を取得します</p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/labels/:walletId</code></p>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"walletId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NAGz3TDs5HmBU2SEodtWyks9n5KXVCzBTf"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2N4Xz4itCdKKUREiySS7oBzoXUKnuxP4nRD"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My Favorite Multi-Sig Address"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="response">応答 Response</h3>

<p>ラベルモデルオブジェクトの配列を返します。</p>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>walletId</td>
<td>ウォレットのid(同時に最初の受信アドレス)</td>
</tr>
<tr>
<td>address</td>
<td>ラベルされているビットコインアドレス</td>
</tr>
<tr>
<td>label</td>
<td>アドレスラベル</td>
</tr>
</tbody></table>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>認証パラメーターが一致しない</td>
</tr>
<tr>
<td>404 Not Found</td>
<td>ウォレットが見つけられなかった</td>
</tr>
</tbody></table>

<h2 id="set-label">ラベルを設定する Set Label</h2>
<pre class="highlight shell"><code><span class="nv">WALLET</span><span class="o">=</span>2NAGz3TDs5HmBU2SEodtWyks9n5KXVCzBTf
<span class="nv">ADDRESS</span><span class="o">=</span>2N4Xz4itCdKKUREiySS7oBzoXUKnuxP4nRD
curl -X PUT <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s2">"{ </span><span class="se">\"</span><span class="s2">label</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">A Noteworthy Label</span><span class="se">\"</span><span class="s2"> }"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/labels/<span class="nv">$WALLET</span>/<span class="nv">$ADDRESS</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">wallets</span> <span class="o">=</span> <span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"bitcoin"</span><span class="p">,</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"2NAGz3TDs5HmBU2SEodtWyks9n5KXVCzBTf"</span><span class="p">,</span>
<span class="p">};</span>
<span class="nx">wallets</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
      <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">wallet</span><span class="p">.</span><span class="nx">setLabel</span><span class="p">({</span><span class="na">label</span><span class="p">:</span> <span class="s2">"A Noteworthy Label"</span><span class="p">,</span> <span class="na">address</span><span class="p">:</span> <span class="s2">"2N4Xz4itCdKKUREiySS7oBzoXUKnuxP4nRD"</span><span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">label</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
      <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">label</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>

<p>特定のアドレスにラベルを設定し、特定のウォレットに関連付けます。 ラベルの長さは最大で250文字に制限されています。 ウォレットのラベルとして予約されているため、ウォレットの最初の受取アドレスにラベルは設定できません。</p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">PUT /api/v1/labels/:walletId/:address</code></p>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"walletId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NAGz3TDs5HmBU2SEodtWyks9n5KXVCzBTf"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2N4Xz4itCdKKUREiySS7oBzoXUKnuxP4nRD"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A Noteworthy Label"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="url-url-parameters">URLパラメーター URL Parameters</h3>

<table><thead>
<tr>
<th>名</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>walletId</td>
<td>ビットコインアドレス(文字列)</td>
<td>YES</td>
<td>ウォレットのid(同時に最初の受信アドレス)</td>
</tr>
<tr>
<td>address</td>
<td>ビットコインアドレス(文字列)</td>
<td>YES</td>
<td>ラベルされているビットコインアドレス</td>
</tr>
</tbody></table>

<h3 id="put-put-parameters">PUTパラメーター PUT Parameters</h3>

<table><thead>
<tr>
<th>名</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>label</td>
<td>文字列</td>
<td>YES</td>
<td>アドレスラベル</td>
</tr>
</tbody></table>

<h3 id="response">応答 Response</h3>

<p>ラベルモデルオブジェクトを返します。</p>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>walletId</td>
<td>ウォレットのid(同時に最初の受信アドレス)</td>
</tr>
<tr>
<td>address</td>
<td>ラベルされているビットコインアドレス</td>
</tr>
<tr>
<td>label</td>
<td>アドレスラベル</td>
</tr>
</tbody></table>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>認証パラメーターが一致しない</td>
</tr>
<tr>
<td>404 Not Found</td>
<td>ウォレットが見つけられなかった</td>
</tr>
</tbody></table>

<h2 id="delete-label">ラベルを削除する Delete Label</h2>
<pre class="highlight shell"><code><span class="nv">WALLET</span><span class="o">=</span>2NAGz3TDs5HmBU2SEodtWyks9n5KXVCzBTf
<span class="nv">ADDRESS</span><span class="o">=</span>2N4Xz4itCdKKUREiySS7oBzoXUKnuxP4nRD
curl -X DELETE <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/labels/<span class="nv">$WALLET</span>/<span class="nv">$ADDRESS</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">wallet</span><span class="p">.</span><span class="nx">deleteLabel</span><span class="p">({</span><span class="na">address</span><span class="p">:</span> <span class="s2">"2N4Xz4itCdKKUREiySS7oBzoXUKnuxP4nRD"</span><span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">label</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// handle error</span>
  <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">label</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<p>特定のアドレスやウォレットからラベルを削除します。</p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">DELETE /api/v1/labels/:walletId/:address</code></p>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"walletId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NAGz3TDs5HmBU2SEodtWyks9n5KXVCzBTf"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2N4Xz4itCdKKUREiySS7oBzoXUKnuxP4nRD"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A Noteworthy Label"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="url-url-parameters">URLパラメーター URL Parameters</h3>

<table><thead>
<tr>
<th>名</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>walletId</td>
<td>ビットコインアドレス(文字列)</td>
<td>YES</td>
<td>ウォレットのid(同時に最初の受信アドレス)</td>
</tr>
<tr>
<td>address</td>
<td>ビットコインアドレス(文字列)</td>
<td>YES</td>
<td>ラベルされているビットコインアドレス</td>
</tr>
</tbody></table>

<h3 id="response">応答 Response</h3>

<p>削除されたラベルのラベルモデルオブジェクトを返します。</p>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>walletId</td>
<td>ウォレットのid(同時に最初の受信アドレス)</td>
</tr>
<tr>
<td>address</td>
<td>ラベルされているビットコインアドレス</td>
</tr>
<tr>
<td>label</td>
<td>アドレスラベル</td>
</tr>
</tbody></table>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>認証パラメーターが一致しない</td>
</tr>
<tr>
<td>404 Not Found</td>
<td>ウォレットまたはラベルが見つけられなかった</td>
</tr>
</tbody></table>

<h1 id="tag">タグ Tag</h1>

<p>タグは、法人顧客向けの高度なポリシー機能です。</p>

<h2 id="create-a-tag">タグを作成します Create a tag</h2>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">POST /api/v1/tag</code></p>

<h3 id="body-body-parameters">BODYパラメーター BODY Parameters</h3>

<p>タグは名前を持つ必要があり、単一のユーザー、ウォレット、またはエンタープライズを持たなければなりません。</p>

<table>
  <tr>
    <th>
      パラメーター
    </th>
    
    <th>
      種類
    </th>
    
    <th>
      必須か
    </th>
    
    <th>
      説明
    </th>
    
    <th>
      可能な値
    </th>
  </tr>
  
  <tr>
    <td>
      name
    </td>
    
    <td>
      文字列
    </td>
    
    <td>
      YES
    </td>
    
    <td>
      タグの名前
    </td>
    
    <td>
    </td>
  </tr>
  
  <tr>
    <td>
      user
    </td>
    
    <td>
      id
    </td>
    
    <td>
      NO
    </td>
    
    <td>
      タグを所有するユーザーのユーザーIDで、必ずタグを追加するユーザーのIDでなければならない
    </td>
    
    <td>
    </td>
  </tr>
  
  <tr>
    <td>
      wallet
    </td>
    
    <td>
      id
    </td>
    
    <td>
      NO
    </td>
    
    <td>
      タグを所有するウォレットのビットコインアドレスでなくid
    </td>
    
    <td>
    </td>
  </tr>
  
  <tr>
    <td>
      enterprise
    </td>
    
    <td>
      id
    </td>
    
    <td>
      NO
    </td>
    
    <td>
      タグを所有するエンタープライズのid
    </td>
    
    <td>
    </td>
  </tr>
</table>

<h3 id="response">応答 Response</h3>

<p>タグを返します。</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[id]"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name of tag"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[id]"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
</tbody></table>

<h2 id="add-a-tag-to-a-wallet">ウォレットにタグを追加する Add a tag to a wallet</h2>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">POST /api/v1/wallet/:wallet/tag</code></p>

<h3 id="body-body-parameters">BODYパラメーター BODY Parameters</h3>

<p>ウォレットに追加しているタグのidを指定するする必要があります。他のパラメーターは不要です。</p>

<table>
  <tr>
    <th>
      パラメーター
    </th>
    
    <th>
      種類
    </th>
    
    <th>
      必須か
    </th>
    
    <th>
      説明
    </th>
    
    <th>
      可能な値
    </th>
  </tr>
  
  <tr>
    <td>
      tag
    </td>
    
    <td>
      id
    </td>
    
    <td>
      YES
    </td>
    
    <td>
      タグのid。
    </td>
    
    <td>
    </td>
  </tr>
</table>

<h3 id="response">応答 Response</h3>

<p>ウォレット、タグ、そして影響を受けるwallettxsの数を返します。</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"wallet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[id]"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[id]"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"walletTxsAffected"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>404 Not Found</td>
<td>タグが見つからなかった</td>
</tr>
</tbody></table>

<h1 id="webhook-webhook-notifications">Webhook 通知 Webhook Notifications</h1>

<blockquote>
<p>Webhookコールバックのトランザクションの例</p>
</blockquote>

<p>POST http://your.server.com/webhook</p>

<p>{
      &quot;type&rdquo;: &ldquo;transaction&rdquo;,
      &ldquo;walletId&rdquo;: &ldquo;2MwLxgWaAGmMT9asT4nAdeewWzPEz3Sn5Eg&rdquo;,
      &ldquo;hash&rdquo;: &ldquo;c9a55f32d4b63d02a617eea58873227e4f011d0dfc836cb2e9cab531c4db0c4a&rdquo;
    }</p>

<blockquote>
<p>Webhook コールバック 保留中の承認 例</p>
</blockquote>

<p>POST http://your.server.com/webhook
    {
      &ldquo;type&rdquo;: &ldquo;pendingapproval&rdquo;,
      &ldquo;pendingApprovalId&rdquo;: &ldquo;55e79a1b5f9a20da1d3fe5b988a71c93&rdquo;,
      &ldquo;walletId&rdquo;: &ldquo;2MwLxgWaAGmMT9asT4nAdeewWzPEz3Sn5Eg&rdquo;,
      &ldquo;state&rdquo;: &ldquo;accepted&rdquo;
    }</p>

<p>BitGoからプログラマティックにコールバックを受け取るために、Webhookを設定することができます。 ウォレット(トランザクションの場合) またはユーザー（ブロック通知で）に添付することができます。 受信トランザクション等指定されたイベントが発生した時、Webhook通知がトリガーされます。</p>

<p>BitGoサーバはJSONペイロードと定義された、POST httpリクエストを行い、<code class="prettyprint">HTTP 200 OK</code>を期待します。 正常な応答が受信されない場合、BitGo は各再試行間隔を増やし webhook を再試行しようとします。</p>

<p>開発者は一時的なネットワークエラーの場合でも、あるいは不適切な確認のため同じwebhookを二度受信した場合でもアプリケーションが正常に動くことを確保するべきです。</p>

<h3 id="request-schema">スキーマをリクエストする Request Schema</h3>

<p>Webhook URLは、次のHTTPのボディ内のJSONエンコードされたフィールドで呼び出されます。</p>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>webhookの種類： &#39;transaction&rsquo;, &#39;transactionExpire&rsquo;, &#39;transactionRemoved&rsquo;, &#39;block&rsquo;, そして &#39;pendingapproval&rsquo;</td>
</tr>
<tr>
<td>walletId</td>
<td>Webhookイベントに関連付けられたウォレットのID、ウォレットのwebhookであっても</td>
</tr>
<tr>
<td>hash</td>
<td>トランザクションwebhookの場合、トランザクションID</td>
</tr>
<tr>
<td>pendingApprovalId</td>
<td>保留中の承認webhookの場合、保留中の承認ID</td>
</tr>
<tr>
<td>state</td>
<td>保留中の承認のwebhookの場合、保留中の承認の状態(pending, approved, またはrejected)</td>
</tr>
</tbody></table>

<h3 id="webhook-webhook-types">Webhookの種類 Webhook Types</h3>

<p>BitGoでは、現在積極的にwebhookに取り組んでいます。もっと多くの種類をリクエストされたい場合は、弊社までご連絡ください。</p>

<table><thead>
<tr>
<th>種類</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>transaction</td>
<td>トランザクションが、ウォレットの任意の受信アドレスで既読になった/確認された時に有効になる</td>
</tr>
<tr>
<td>transactionRemoved</td>
<td>トランザクションがユーザーのウォレットから削除された時に有効になる</td>
</tr>
<tr>
<td>transactionExpire</td>
<td>トランザクションの有効期限が切れる時に有効になる</td>
</tr>
<tr>
<td>pendingapproval</td>
<td>ユーザーのウォレットに関係する保留中の承認が、作成、承認、拒否された時に有効になる</td>
</tr>
<tr>
<td>block</td>
<td>ビットコインネットワークで新しいブロックが見られた時に有効になる</td>
</tr>
</tbody></table>

<h2 id="webhook-list-wallet-webhooks">ウォレットwebhookの一覧を取得する List Wallet Webhooks</h2>
<pre class="highlight shell"><code>curl -X GET <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/wallet/<span class="nv">$WALLETID</span>/webhooks
</code></pre>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">get</span><span class="p">({</span> <span class="s2">"id"</span><span class="p">:</span> <span class="nx">walletId</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">wallet</span><span class="p">.</span><span class="nx">listWebhooks</span><span class="p">({},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">});</span>
</code></pre>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"walletId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NGJP7z9DZwyVjtY32YSoPqgU6cG2QXpjHu"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"transaction"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.yoursite.com/partner/webhooks"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"walletId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NGJP7z9DZwyVjtY32YSoPqgU6cG2QXpjHu"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"transaction"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.company2.com/api/webhooks"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"numConfirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>ウォレットで設定されているwehookの一覧を取得します。 現在、ウォレットに添付できるwebhookの種類はtransactionとpendingapprovalの通知のみです。</p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/wallet/:walletId/webhooks</code></p>

<h3 id="response">応答 Response</h3>

<p>Webhookオブジェクトの配列</p>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>walletId</td>
<td>ウォレットのID</td>
</tr>
<tr>
<td>type</td>
<td>Webhookの種類、例えば transaction</td>
</tr>
<tr>
<td>url</td>
<td>コールバック要求のhttp/https url</td>
</tr>
</tbody></table>

<h2 id="webhook-add-wallet-webhooks">ウォレット Webhookを追加する Add Wallet Webhooks</h2>
<pre class="highlight shell"><code><span class="nv">WALLETID</span><span class="o">=</span>2NGJP7z9DZwyVjtY32YSoPqgU6cG2QXpjHu
<span class="nv">URL</span><span class="o">=</span><span class="s1">'http://www.yoursite.com/partner/webhooks'</span>

curl -X POST <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s2">"{ </span><span class="se">\"</span><span class="s2">url</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$URL</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">type</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">transaction</span><span class="se">\"</span><span class="s2"> }"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/wallet/<span class="nv">$WALLETID</span>/webhooks
</code></pre>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">get</span><span class="p">({</span> <span class="s2">"id"</span><span class="p">:</span> <span class="nx">walletId</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">wallet</span><span class="p">.</span><span class="nx">addWebhook</span><span class="p">({</span> <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span> <span class="na">type</span><span class="p">:</span> <span class="s1">'transaction'</span> <span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">});</span>
</code></pre>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"walletId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NGJP7z9DZwyVjtY32YSoPqgU6cG2QXpjHu"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"transaction"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.yoursite.com/partner/webhooks"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>イベントがトリガーされた時に、BitGoからの特定のURLでHTTPコールバックの結果となるWebhookをを追加します。 ウォレット毎に各種類ごとに10 webhook上限があります。</p>

<p>2種類のウォレットwebhookが利用可能となっています： 1. ウォレット上の任意のトランザクションについて、トランザクションwebhookが発射します。 2。 送信トランザクションがウォレットのポリシーをトリガーした時、保留中の承認 webhookが発射します。</p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">POST /api/v1/wallet/:walletId/webhooks</code></p>

<h3 id="parameters">パラメーター Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>文字列</td>
<td>YES</td>
<td>Webhookの種類、例えば transaction や pendingapproval</td>
</tr>
<tr>
<td>url</td>
<td>文字列</td>
<td>YES</td>
<td>コールバック要求の有効なhttp/https URL</td>
</tr>
<tr>
<td>numConfirmations</td>
<td>integer</td>
<td>NO</td>
<td>transaction webhookをトリガーする前の前の確認の数。 0または示されていない場合、要求はコールバックエンドポイントに送られ、トランザクションがまず見られた時、そして確認された時呼び出されます。</td>
</tr>
</tbody></table>

<h3 id="response">応答 Response</h3>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>walletId</td>
<td>ウォレットのID</td>
</tr>
<tr>
<td>type</td>
<td>Webhookの種類、例えば transaction</td>
</tr>
<tr>
<td>url</td>
<td>コールバック要求のhttp/https url</td>
</tr>
</tbody></table>

<h2 id="webhook-remove-wallet-webhooks">ウォレット webhookを削除する Remove Wallet Webhooks</h2>
<pre class="highlight shell"><code><span class="nv">WALLETID</span><span class="o">=</span>2NGJP7z9DZwyVjtY32YSoPqgU6cG2QXpjHu
<span class="nv">URL</span><span class="o">=</span><span class="s1">'http://www.yoursite.com/partner/webhooks'</span>

curl -X DELETE <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s2">"{ </span><span class="se">\"</span><span class="s2">url</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$URL</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">type</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">transaction</span><span class="se">\"</span><span class="s2"> }"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/wallet/<span class="nv">$WALLETID</span>/webhooks
</code></pre>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">get</span><span class="p">({</span> <span class="s2">"id"</span><span class="p">:</span> <span class="nx">walletId</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">wallet</span><span class="p">.</span><span class="nx">removeWebhook</span><span class="p">({</span> <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span> <span class="na">type</span><span class="p">:</span> <span class="s1">'transaction'</span> <span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">});</span>
</code></pre>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"removed"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Webhookを削除した場合、新規の特定のタイプのイベントがHTTPコールバックをあなたの各URLへトリガーしなくなる原因になります。</p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">DELETE /api/v1/wallet/:walletId/webhooks</code></p>

<h3 id="parameters">パラメーター Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>文字列</td>
<td>YES</td>
<td>Webhookの種類、例えば transaction</td>
</tr>
<tr>
<td>url</td>
<td>文字列</td>
<td>YES</td>
<td>コールバック要求を行う先の、有効なhttp/https URL</td>
</tr>
</tbody></table>

<h3 id="response">応答 Response</h3>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>walletId</td>
<td>ウォレットのID</td>
</tr>
<tr>
<td>type</td>
<td>Webhookの種類、例えば transaction</td>
</tr>
<tr>
<td>url</td>
<td>コールバック要求のhttp/https url</td>
</tr>
</tbody></table>

<h2 id="webhook-list-user-webhooks">ユーザー Webhookの一覧を取得する List User Webhooks</h2>
<pre class="highlight shell"><code>curl -X GET <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/webhooks
</code></pre>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">listWebhooks</span><span class="p">({},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"block"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"coin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bitcoin"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://303fe960.ngrok.com"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"block"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"coin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bitcoin"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.yoursite.com/partner/webhooks"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>ユーザーに添付されるwebhookの一覧を取得します。現在、ユーザーに添付できるwebhookの種類はブロック通知だけです。</p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/webhooks</code></p>

<h3 id="response">応答 Response</h3>

<p>Webhookオブジェクトの配列</p>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>Webhookの種類、例えばブロック</td>
</tr>
<tr>
<td>coin</td>
<td>文字列</td>
</tr>
<tr>
<td>url</td>
<td>コールバック要求のhttp/https url</td>
</tr>
</tbody></table>

<h2 id="webhook-add-user-webhooks">ユーザー Webhook を追加する Add User Webhooks</h2>
<pre class="highlight shell"><code><span class="nv">URL</span><span class="o">=</span><span class="s1">'https://303fe960.ngrok.com'</span>

curl -X POST <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s2">"{ </span><span class="se">\"</span><span class="s2">url</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$URL</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">type</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">block</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">coin</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">bitcoin</span><span class="se">\"</span><span class="s2"> }"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/webhooks
</code></pre>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">addWebhook</span><span class="p">({</span> <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span> <span class="na">type</span><span class="p">:</span> <span class="s1">'block'</span><span class="p">,</span> <span class="na">coin</span><span class="p">:</span> <span class="s1">'bitcoin'</span> <span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">});</span>
</code></pre>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"block"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bitcoin"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.yoursite.com/partner/webhooks"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>イベントがトリガーされた時に、BitGoからの特定のURLでHTTPコールバックの結果となるWebhookをを追加します。 Webhookの記録はユーザーアカウントに添付されます。</p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">POST /api/v1/webhooks</code></p>

<h3 id="parameters">パラメーター Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>文字列</td>
<td>YES</td>
<td>Webhookの種類、例えばブロック</td>
</tr>
<tr>
<td>coin</td>
<td>文字列</td>
<td>NO</td>
<td>ネットワーク トークン、例えば「ビットコイン」や「eth」(デフォルトでビットコイン)</td>
</tr>
<tr>
<td>url</td>
<td>文字列</td>
<td>YES</td>
<td>コールバック要求の有効なhttp/https URL</td>
</tr>
</tbody></table>

<h3 id="response">応答 Response</h3>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>Webhookの種類、例えばブロック</td>
</tr>
<tr>
<td>url</td>
<td>コールバック要求のhttp/https url</td>
</tr>
</tbody></table>

<h2 id="webhook-remove-user-webhooks">ユーザー webhook を削除する Remove User Webhooks</h2>
<pre class="highlight shell"><code><span class="nv">URL</span><span class="o">=</span><span class="s1">'http://www.yoursite.com/partner/webhooks'</span>

curl -X DELETE <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s2">"{ </span><span class="se">\"</span><span class="s2">url</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$URL</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">type</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">block</span><span class="se">\"</span><span class="s2"> }"</span> <span class="se">\</span>
https://test.bitgo.com/api/v1/webhooks
</code></pre>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">removeWebhook</span><span class="p">({</span> <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span> <span class="na">type</span><span class="p">:</span> <span class="s1">'block'</span> <span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"removed"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Webhookを削除した場合、新規の特定のタイプのイベントがHTTPコールバックをあなたの各URLへトリガーしなくなる原因になります。</p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">DELETE /api/v1/webhooks</code></p>

<h3 id="parameters">パラメーター Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>文字列</td>
<td>YES</td>
<td>webhookの種類、例えば transaction</td>
</tr>
<tr>
<td>url</td>
<td>文字列</td>
<td>YES</td>
<td>コールバック要求を行う先の、有効なhttp/https URL</td>
</tr>
</tbody></table>

<h3 id="response">応答 Response</h3>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>webhookの種類、例えば transaction</td>
</tr>
<tr>
<td>url</td>
<td>コールバック要求のhttp/https url</td>
</tr>
</tbody></table>

<h1 id="utilities">各ユーティリティ Utilities</h1>

<p>このセクションでは、BitGo APIの一部として提供されている有用なユーティリティサービスについて説明します。</p>

<h2 id="decrypt">復号化 Decrypt</h2>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">encryptedString</span> <span class="o">=</span> <span class="s1">'{"iv":"n4zHXVTi/Go/riCP8fNs/A==","v":1,"iter":10000,"ks":256,"ts":64,"mode":"ccm","adata":"","cipher":"aes","salt":"zvLyve+4AJU=","ct":"gNMqheicMoD8ZmNzRwuQfWGAh+HA933l"}'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">decryptedString</span> <span class="o">=</span> <span class="nx">bitgo</span><span class="p">.</span><span class="nx">decrypt</span><span class="p">({</span> <span class="na">password</span><span class="p">:</span> <span class="s2">"password"</span><span class="p">,</span> <span class="na">input</span><span class="p">:</span> <span class="nx">encryptedString</span> <span class="p">});</span>
<span class="c1">// decryptedString = "this is a secret"</span>
</code></pre>
<pre class="highlight shell"><code>ローカル メソッドとしてのみ使用できます <span class="o">(</span>BitGo Express<span class="o">)</span>

<span class="nv">PASSWORD</span><span class="o">=</span><span class="s1">'password'</span>
<span class="nv">INPUT</span><span class="o">=</span><span class="s1">'{\"iv\":\"n4zHXVTi/Go/riCP8fNs/A==\",\"v\":1,\"iter\":10000,\"ks\":256,\"ts\":64,\"mode\":\"ccm\",\"adata\":\"\",\"cipher\":\"aes\",\"salt\":\"zvLyve+4AJU=\",\"ct\":\"gNMqheicMoD8ZmNzRwuQfWGAh+HA933l\"}'</span>

curl -X POST <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s2">"{ </span><span class="se">\"</span><span class="s2">password</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$PASSWORD</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">input</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$INPUT</span><span class="se">\"</span><span class="s2"> }"</span> <span class="se">\</span>
http://<span class="nv">$BITGO_EXPRESS_HOST</span>:3080/api/v1/decrypt

<span class="o">{</span> <span class="s2">"decrypted"</span> : <span class="s2">"this is a secret"</span> <span class="o">}</span>
</code></pre>

<p>BitGo APIから暗号化されたblobを復号化するクライアント側関数</p>

<h2 id="encrypt">暗号化 Encrypt</h2>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">encryptedString</span> <span class="o">=</span> <span class="nx">bitgo</span><span class="p">.</span><span class="nx">encrypt</span><span class="p">({</span> <span class="na">password</span><span class="p">:</span> <span class="s2">"password"</span><span class="p">,</span> <span class="na">input</span><span class="p">:</span> <span class="s2">"this is a secret"</span> <span class="p">});</span>
<span class="c1">// encyrptedString = "{\"iv\":\"n4zHXVTi/Go/riCP8fNs/A==\",\"v\":1,\"iter\":10000,\"ks\":256,\"ts\":64,\"mode\":\"ccm\",\"adata\":\"\",\"cipher\":\"aes\",\"salt\":\"zvLyve+4AJU=\",\"ct\":\"gNMqheicMoD8ZmNzRwuQfWGAh+HA933l\"}"</span>
</code></pre>
<pre class="highlight shell"><code>ローカル メソッドとしてのみ使用できます <span class="o">(</span>BitGo Express<span class="o">)</span> 

<span class="nv">PASSWORD</span><span class="o">=</span><span class="s1">'password'</span>
<span class="nv">INPUT</span><span class="o">=</span><span class="s1">'this is a secret'</span>

curl -X POST <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s2">"{ </span><span class="se">\"</span><span class="s2">password</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$PASSWORD</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">input</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$INPUT</span><span class="se">\"</span><span class="s2"> }"</span> <span class="se">\</span>
http://<span class="nv">$BITGO_EXPRESS_HOST</span>:3080/api/v1/encrypt

<span class="o">{</span> <span class="s2">"encrypted"</span> : <span class="s2">"{</span><span class="se">\"</span><span class="s2">iv</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">U4uRz85ytmlCeTe2P3iOmg==</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">v</span><span class="se">\"</span><span class="s2">:1,</span><span class="se">\"</span><span class="s2">iter</span><span class="se">\"</span><span class="s2">:10000,</span><span class="se">\"</span><span class="s2">ks</span><span class="se">\"</span><span class="s2">:256,</span><span class="se">\"</span><span class="s2">ts</span><span class="se">\"</span><span class="s2">:64,</span><span class="se">\"</span><span class="s2">mode</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">ccm</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">adata</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">cipher</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">aes</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">salt</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">zvLyve+4AJU=</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">ct</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">/tRnUh9LUyI7L5e5LPqpvnPR7RD1CdUi</span><span class="se">\"</span><span class="s2">}"</span> <span class="o">}</span>
</code></pre>

<p>文字列を暗号化するクライアント側関数です。BitGoで保管される全てのデータは、このAPIを用いて暗号化されます。</p>

<h2 id="estimate-transaction-fees">トランザクションフィーを見積もる Estimate Transaction Fees</h2>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">estimateFee</span><span class="p">({</span> <span class="na">numBlocks</span><span class="p">:</span> <span class="mi">6</span> <span class="p">},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight shell"><code>curl -k https://test.bitgo.com/api/v1/tx/fee?numBlocks<span class="o">=</span>6
</code></pre>

<p>目標となるブロックの数内でトランザクションを確認するための、キロバイトあたりの推奨手数料のレートを返します。 トランザクションの作成に使用できます。 注意：見積もりアルゴリズムは最低2ブロック先まで正確なものです。</p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/tx/fee?numBlocks=6</code></p>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w"> </span><span class="nt">"feePerKb"</span><span class="p">:</span><span class="w"> </span><span class="mi">21949</span><span class="p">,</span><span class="w">
    </span><span class="nt">"numBlocks"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
    </span><span class="nt">"confidence"</span><span class="p">:</span><span class="w"> </span><span class="mi">95</span><span class="p">,</span><span class="w">
    </span><span class="nt">"multiplier"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"feeByBlockTarget"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"1"</span><span class="p">:</span><span class="w"> </span><span class="mi">62246</span><span class="p">,</span><span class="w">
        </span><span class="nt">"2"</span><span class="p">:</span><span class="w"> </span><span class="mi">47730</span><span class="p">,</span><span class="w">
        </span><span class="nt">"3"</span><span class="p">:</span><span class="w"> </span><span class="mi">35130</span><span class="p">,</span><span class="w">
        </span><span class="nt">"4"</span><span class="p">:</span><span class="w"> </span><span class="mi">32837</span><span class="p">,</span><span class="w">
        </span><span class="nt">"5"</span><span class="p">:</span><span class="w"> </span><span class="mi">32837</span><span class="p">,</span><span class="w">
        </span><span class="nt">"6"</span><span class="p">:</span><span class="w"> </span><span class="mi">21949</span><span class="p">,</span><span class="w">
        </span><span class="nt">"7"</span><span class="p">:</span><span class="w"> </span><span class="mi">20017</span><span class="p">,</span><span class="w">
        </span><span class="nt">"8"</span><span class="p">:</span><span class="w"> </span><span class="mi">18644</span><span class="p">,</span><span class="w">
        </span><span class="nt">"9"</span><span class="p">:</span><span class="w"> </span><span class="mi">16545</span><span class="p">,</span><span class="w">
        </span><span class="nt">"10"</span><span class="p">:</span><span class="w"> </span><span class="mi">16545</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="response">応答 Response</h3>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>confidence</td>
<td>BitGoによって使用される見積もり額の信頼値。この値が85より小さい場合見積もりを使用しないこと。</td>
</tr>
<tr>
<td>feePerKb</td>
<td>使用するキロバイト当たりの（Satoshiを単位とする）手数料</td>
</tr>
<tr>
<td>multiplier</td>
<td>BitGoによって、feePerKbを計算するために使用される乗数。情報目的のみ、使用しないこと</td>
</tr>
<tr>
<td>numBlocks</td>
<td>見積もりにおいてリクエストされたターゲットのブロック数</td>
</tr>
</tbody></table>

<h2 id="market-price-data">市場価格データ Market Price Data</h2>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">markets</span><span class="p">().</span><span class="nx">latest</span><span class="p">({},</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">market</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// handle error</span>
  <span class="p">}</span>
  <span class="c1">// etc</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight shell"><code>curl -k https://test.bitgo.com/api/v1/market/latest
</code></pre>

<p>現在の市場についての情報を得ます。</p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/market/latest</code></p>

<blockquote>
<p>マーケットモデルの応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"latest"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"blockchain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"totalbc"</span><span class="p">:</span><span class="w"> </span><span class="mi">14648675</span><span class="p">,</span><span class="w">
            </span><span class="nt">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="mi">125632</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"currencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"AUD"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"24h_avg"</span><span class="p">:</span><span class="w"> </span><span class="mf">337.58</span><span class="p">,</span><span class="w">
                </span><span class="nt">"ask"</span><span class="p">:</span><span class="w"> </span><span class="mf">337.44</span><span class="p">,</span><span class="w">
                </span><span class="nt">"bid"</span><span class="p">:</span><span class="w"> </span><span class="mf">337.18</span><span class="p">,</span><span class="w">
                </span><span class="nt">"last"</span><span class="p">:</span><span class="w"> </span><span class="mf">337.44</span><span class="p">,</span><span class="w">
                </span><span class="nt">"lastHourHigh"</span><span class="p">:</span><span class="w"> </span><span class="mf">337.59</span><span class="p">,</span><span class="w">
                </span><span class="nt">"lastHourLow"</span><span class="p">:</span><span class="w"> </span><span class="mf">335.91</span><span class="p">,</span><span class="w">
                </span><span class="nt">"monthlyHigh"</span><span class="p">:</span><span class="w"> </span><span class="mf">345.69</span><span class="p">,</span><span class="w">
                </span><span class="nt">"monthlyLow"</span><span class="p">:</span><span class="w"> </span><span class="mf">322.85</span><span class="p">,</span><span class="w">
                </span><span class="nt">"prevDayHigh"</span><span class="p">:</span><span class="w"> </span><span class="mf">345.69</span><span class="p">,</span><span class="w">
                </span><span class="nt">"prevDayLow"</span><span class="p">:</span><span class="w"> </span><span class="mf">333.21</span><span class="p">,</span><span class="w">
                </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Fri, 25 Sep 2015 06:31:31 -0000"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"total_vol"</span><span class="p">:</span><span class="w"> </span><span class="mf">516.11</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"USD"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"24h_avg"</span><span class="p">:</span><span class="w"> </span><span class="mf">234.34</span><span class="p">,</span><span class="w">
                </span><span class="nt">"ask"</span><span class="p">:</span><span class="w"> </span><span class="mf">236.92</span><span class="p">,</span><span class="w">
                </span><span class="nt">"bid"</span><span class="p">:</span><span class="w"> </span><span class="mf">236.59</span><span class="p">,</span><span class="w">
                </span><span class="nt">"last"</span><span class="p">:</span><span class="w"> </span><span class="mf">236.39</span><span class="p">,</span><span class="w">
                </span><span class="nt">"lastHourHigh"</span><span class="p">:</span><span class="w"> </span><span class="mf">236.2</span><span class="p">,</span><span class="w">
                </span><span class="nt">"lastHourLow"</span><span class="p">:</span><span class="w"> </span><span class="mf">234.66</span><span class="p">,</span><span class="w">
                </span><span class="nt">"monthlyHigh"</span><span class="p">:</span><span class="w"> </span><span class="mf">246.46</span><span class="p">,</span><span class="w">
                </span><span class="nt">"monthlyLow"</span><span class="p">:</span><span class="w"> </span><span class="mf">227.08</span><span class="p">,</span><span class="w">
                </span><span class="nt">"prevDayHigh"</span><span class="p">:</span><span class="w"> </span><span class="mf">236.3</span><span class="p">,</span><span class="w">
                </span><span class="nt">"prevDayLow"</span><span class="p">:</span><span class="w"> </span><span class="mf">232.67</span><span class="p">,</span><span class="w">
                </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Fri, 25 Sep 2015 06:31:31 -0000"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"total_vol"</span><span class="p">:</span><span class="w"> </span><span class="mf">59877.2</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"updateTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-25T06:31:19.087Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="response">応答 Response</h3>

<p>マーケットモデルオブジェクトを返します。全ての価格はユーザーが設定した通貨の単位建てです。</p>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>last</td>
<td>最新の市場価格</td>
</tr>
<tr>
<td>bid</td>
<td>最も高い現在の入札価格</td>
</tr>
<tr>
<td>ask</td>
<td>最も低い現在の売り呼び値</td>
</tr>
<tr>
<td>volume</td>
<td>取引されたビットコインの24時間の出来高</td>
</tr>
<tr>
<td>high</td>
<td>今日の市場価格の最高額</td>
</tr>
<tr>
<td>low</td>
<td>今日の市場価格の最低額</td>
</tr>
<tr>
<td>monthlyHigh</td>
<td>今月の市場価格の最高額</td>
</tr>
<tr>
<td>monthlyLow</td>
<td>今月の市場価格の最低額</td>
</tr>
<tr>
<td>marketcap</td>
<td>ビットコインの時価総額</td>
</tr>
<tr>
<td>updateTime</td>
<td>このデータが更新された日時</td>
</tr>
<tr>
<td>yesterday</td>
<td>以前表示されたフィールドを含むオブジェクト、ただし昨日の市場データについて</td>
</tr>
</tbody></table>

<h2 id="malware-address-list">マルウェアアドレスのリスト Malware Address List</h2>
<pre class="highlight shell"><code>curl https://www.bitgo.com/api/v1/malware/bitcoin
</code></pre>

<p>BitGoはアドレススワッピングマルウェアによって使用されていることが知られたアドレスのリストを保持しています。 BitGoはこれらのアドレスに対しトランザクションの共同署名を行うことを拒否します。 このAPIは現在BitGoによってブロックされているアドレスのリストを提供します。 自身のブロックリストをメンテナンスするために、このリストを定期的にポーリング（一日一回など）することを推奨します。 さもなくばあなたの顧客が感染していて引出しをリクエストした場合、間違って「悪い」トランザクションを提出してしまう可能性があります。</p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/malware/bitcoin</code></p>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"readme"</span><span class="p">:</span><span class="w"> </span><span class="s2">"これはBitGoが知る、ビットコインを盗むマルウェアに紐付いたアドレスのリストです。 BitGoがそれらのアドレスを宛先とするトランザクションに共同署名することはありません。 自身の「悪い」アドレスのリストを更新するため、定期的にこのAPIを照会することを推奨します"</span><span class="p">,</span><span class="w"> </span><span class="err">[</span><span class="w">
  </span><span class="nt">"addresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19ZM2pjq6U4jVb283GZkCPNukjeyb2YZ2u"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1EZV9ghJ4rCvwtVE27ZUxY6she4GzeEzCf"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="response">応答 Response</h3>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>readme</td>
<td>人間が読めるこのリストの説明</td>
</tr>
<tr>
<td>address</td>
<td>{ address: xxx } オブジェクトの一覧</td>
</tr>
</tbody></table>

<h2 id="verify-bitcoin-address">ビットコインアドレスを確認する Verify Bitcoin Address</h2>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">isValid</span> <span class="o">=</span> <span class="nx">bitgo</span><span class="p">.</span><span class="nx">verifyAddress</span><span class="p">({</span> <span class="na">address</span><span class="p">:</span> <span class="s2">"1AJbsFZ64EpEfS5UAjAfcUG8pH8Jn3rn1F"</span> <span class="p">});</span>
</code></pre>
<pre class="highlight shell"><code>ローカル メソッドとしてのみ使用できます <span class="o">(</span>BitGo Express<span class="o">)</span> 

curl -X POST <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{ "address": "2NFasKP9nqHHUBvVHvEGkuHpNA3hjdkUhAV" }'</span> <span class="se">\</span>
http://<span class="nv">$BITGO_EXPRESS_HOST</span>:3080/api/v1/verifyaddress
</code></pre>

<p>与えられた文字列が有効なビットコインアドレスであることを確認するクライアント側関数 v1 アドレス (例: &ldquo;1&hellip;&rdquo;) とP2SH アドレス (例: &ldquo;3&hellip;&rdquo;)の両方がサポートされています。</p>

<p>アドレスが有効な場合は true を返します。</p>

<h2 id="bitgo-bitgo-client-version">BitGoクライアントバージョン BitGo Client Version</h2>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">version</span> <span class="o">=</span> <span class="nx">bitgo</span><span class="p">.</span><span class="nx">version</span><span class="p">();</span>
</code></pre>

<p>このBitGo SDKのバージョンを取得するクライアント側関数です。</p>

<p>文字列を返します。</p>

<h1 id="blockchain-data">ブロックチェーンデータ Blockchain Data</h1>

<p>BitGoは、アドレスやトランザクションについてブロックチェーンデータを取得するパブリックAPIを提供しています。 これらのAPIはBitGoユーザーやウォレットの概念と関連しません。 このAPIのエンドポイントの目的は、APIの消費者(利用者) が非BitGoのアドレスとトランザクションのデータを取得することを可能にすることです（Satoshiクライアントのtxiindexとwatchonlyの概念と類似）。</p>

<p>ほとんどのウォレットの利用ケースで、開発者はこのウォレットとキーチェーンAPIを利用したいでしょう。 それらはHDウォレットの合計残高や、アドレスの作成、トランザクションの送信等のような、より多くの操作をサポートします。<aside class="success"> パブリックブロックチェーンデータだけを返すため、ブロックチェーンデータAPIは認証を必要としません。 ただし、私達のサービスからの高いレートの限度を達成するため、ヘッダーにあるアクセストークンを送信することを推奨します。 </aside> </p>

<h2 id="get-address">アドレスを取得する Get Address</h2>

<p>残高情報を持つアドレスをルックアップします。</p>
<pre class="highlight shell"><code><span class="nv">ADDRESS</span><span class="o">=</span>2N4Xz4itCdKKUREiySS7oBzoXUKnuxP4nRD
curl https://test.bitgo.com/api/v1/address/<span class="nv">$ADDRESS</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">address</span> <span class="o">=</span> <span class="s2">"2N4Xz4itCdKKUREiySS7oBzoXUKnuxP4nRD"</span><span class="p">;</span>
<span class="nx">bitgo</span><span class="p">.</span><span class="nx">blockchain</span><span class="p">().</span><span class="nx">getAddress</span><span class="p">({</span> <span class="na">address</span><span class="p">:</span> <span class="nx">address</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/address/:address</code></p>

<h3 id="url-url-parameters">URLパラメーター URL Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>address</td>
<td>ビットコインアドレス(文字列)</td>
<td>YES</td>
<td>ビットコインアドレス</td>
</tr>
</tbody></table>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2N76BgbTnLJz9WWbXw15gp6K9mE5wrP4JFb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">6900000</span><span class="p">,</span><span class="w">
  </span><span class="nt">"confirmedBalance"</span><span class="p">:</span><span class="w"> </span><span class="mi">6900000</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="response">応答 Response</h3>

<p>アドレスの概要情報を返します。</p>

<table><thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>address</td>
<td>アドレス</td>
</tr>
<tr>
<td>balance</td>
<td>確認が0回のトランザクションを含む残高</td>
</tr>
<tr>
<td>confirmedBalance</td>
<td>確認された残高</td>
</tr>
</tbody></table>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
<tr>
<td>404 Not Found</td>
<td>ウォレットが見つからなかった</td>
</tr>
</tbody></table>

<h2 id="get-address-transactions">アドレス トランザクションを取得する Get Address Transactions</h2>

<p>指定されたアドレスについて、逆のブロックの高さの順でトランザクションを取得します。</p>
<pre class="highlight shell"><code><span class="nv">ADDRESS</span><span class="o">=</span>2N4Xz4itCdKKUREiySS7oBzoXUKnuxP4nRD
curl https://test.bitgo.com/api/v1/address/<span class="nv">$ADDRESS</span>/tx
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">address</span> <span class="o">=</span> <span class="s2">"2N4Xz4itCdKKUREiySS7oBzoXUKnuxP4nRD"</span><span class="p">;</span>
<span class="nx">bitgo</span><span class="p">.</span><span class="nx">blockchain</span><span class="p">().</span><span class="nx">getAddressTransactions</span><span class="p">({</span><span class="na">address</span><span class="p">:</span> <span class="nx">address</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">response</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">4</span><span class="p">));</span>
<span class="p">});</span>
</code></pre>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/address/:address/tx</code></p>

<h3 id="url-url-parameters">URLパラメーター URL Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>address</td>
<td>ビットコインアドレス(文字列)</td>
<td>YES</td>
<td>ビットコインアドレス</td>
</tr>
</tbody></table>

<h3 id="query-parameters">クエリ パラメーター QUERY Parameters</h3>

<p>| パラメーター | 種類 | 必須か | 説明                                     |
| &mdash;&mdash; | &ndash; | &mdash; | &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash; |
| skip   | 数字 | NO  | 一覧取得を開始するインデックス番号。既定値は0。               |
| limit  | 数字 | NO  | 単一コール(default=25, max=250) で返す結果の最大の件数 |</p>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"951aea423c6ba55ac4e6aba953c1dc08e4854bcdf07cb505c4c69447a3f9712e"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"caption"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test sending"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-11-13T01:47:10.000Z"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"pending"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nt">"entries"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2MxrfrSPNhj1yVrC1CqyNRMFR8WtM7XxpS7"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1890000</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2N4Xz4itCdKKUREiySS7oBzoXUKnuxP4nRD"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">-6900000</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2N91XzUxLrSkfDMaRcwQhe9DauhZMhUoxGr"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">5000000</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c7e823fe39d1f0a4081bbefe53f67ebf117189b43a92da3225aa2e4247e35c68"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-11-13T01:07:05.000Z"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"pending"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nt">"entries"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"muqrFWxvQiN6KTSZcUugxivMre2fCHnFnF"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">-104350000</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2N4Xz4itCdKKUREiySS7oBzoXUKnuxP4nRD"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">6900000</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mrGtgBbfp5jnqK6c4QNcad6WdHYQr67W8N"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">97440000</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"start"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="response">応答 Response</h3>

<p>トランザクションオブジェクトの配列を返す。そのトランザクションがそのトランザクションが関わった任意のビットコインアドレスの正味残高にどのように影響したかの概要情報を、各トランザクションは含みます。</p>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
</tbody></table>

<h2 id="get-address-unspent-outputs">アドレスの未使用分のアウトプットを取得する Get Address Unspent Outputs</h2>

<p>特定のアドレスへ行く未使用分のアウトプットを取得します。ブロックの高さの降順に並びます(確認されていないトランザクションの順)。</p>
<pre class="highlight shell"><code><span class="nv">ADDRESS</span><span class="o">=</span>2N4Xz4itCdKKUREiySS7oBzoXUKnuxP4nRD
curl https://test.bitgo.com/api/v1/address/<span class="nv">$ADDRESS</span>/unspents
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">address</span> <span class="o">=</span> <span class="s2">"2N4Xz4itCdKKUREiySS7oBzoXUKnuxP4nRD"</span><span class="p">;</span>
<span class="nx">bitgo</span><span class="p">.</span><span class="nx">blockchain</span><span class="p">().</span><span class="nx">getAddressUnspents</span><span class="p">({</span><span class="na">address</span><span class="p">:</span> <span class="nx">address</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">response</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">4</span><span class="p">));</span>
<span class="p">});</span>
</code></pre>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/address/:address/unspents</code></p>

<h3 id="url-url-parameters">URLパラメーター URL Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>address</td>
<td>ビットコインアドレス(文字列)</td>
<td>YES</td>
<td>ビットコインアドレス</td>
</tr>
</tbody></table>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"pendingTransactions"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"unspents"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2N4Xz4itCdKKUREiySS7oBzoXUKnuxP4nRD"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"blockHeight"</span><span class="p">:</span><span class="w"> </span><span class="mi">308023</span><span class="p">,</span><span class="w">
            </span><span class="nt">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">85670</span><span class="p">,</span><span class="w">
            </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-04-15T23:31:34.918Z"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a9147bd4d50e34791a6373bfa0175bf2cb9796a08f5587"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"tx_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"777cb752b4ecaf84fc3716cc5790cd84d7481764b40d496d81d997e04112818d"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"tx_output_n"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">3200000</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2N4Xz4itCdKKUREiySS7oBzoXUKnuxP4nRD"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"blockHeight"</span><span class="p">:</span><span class="w"> </span><span class="mi">308749</span><span class="p">,</span><span class="w">
            </span><span class="nt">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">84944</span><span class="p">,</span><span class="w">
            </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-04-15T23:31:23.919Z"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a9147bd4d50e34791a6373bfa0175bf2cb9796a08f5587"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"tx_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6a75bda7016698abcd903b4b005b9ba306324a8d50bee932237ffde50a5a9eba"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"tx_output_n"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">100000</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="response">応答 Response</h3>

<p>未使用分のトランザクションオブジェクトの配列を返します。各トランザクションには次の情報が含まれています：</p>

<table><thead>
<tr>
<th>名</th>
<th>種類</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>address</td>
<td>文字列</td>
<td>未使用のアウトプットを持つアドレス</td>
</tr>
<tr>
<td>tx_hash</td>
<td>数字</td>
<td>未使用のアウトプットの額、satoshi単位</td>
</tr>
<tr>
<td>tx_output_n</td>
<td>数字</td>
<td>未使用のアウトプットの額、satoshi単位</td>
</tr>
<tr>
<td>value</td>
<td>数字</td>
<td>未使用のアウトプットの額、satoshi単位</td>
</tr>
<tr>
<td>blockheight</td>
<td>数字</td>
<td>トランザクションが見られた（ブロックの）高さ</td>
</tr>
<tr>
<td>confirmations</td>
<td>数字</td>
<td>このトランザクションの確認数</td>
</tr>
<tr>
<td>date</td>
<td>date</td>
<td>ネットワークでトランザクションが見られた日時</td>
</tr>
<tr>
<td>script</td>
<td>文字列</td>
<td>16進数形式のアウトプットビットコインスクリプト</td>
</tr>
</tbody></table>

<h3 id="errors">エラー Errors</h3>

<table><thead>
<tr>
<th>応答</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>400 Bad Request</td>
<td>要求パラメーターが見つからないか正しくない</td>
</tr>
</tbody></table>

<h2 id="get-transaction-details">トランザクションの詳細を取得する Get Transaction Details</h2>
<pre class="highlight shell"><code><span class="nv">TX</span><span class="o">=</span>af867c86000da76df7ddb1054b273ca9e034e8c89d049b5b2795f9f590f67648
curl https://test.bitgo.com/api/v1/tx/<span class="nv">$TX</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">txId</span> <span class="o">=</span> <span class="s1">'af867c86000da76df7ddb1054b273ca9e034e8c89d049b5b2795f9f590f67648'</span><span class="p">;</span>
<span class="nx">bitgo</span><span class="p">.</span><span class="nx">blockchain</span><span class="p">().</span><span class="nx">getTransaction</span><span class="p">({</span><span class="na">id</span><span class="p">:</span> <span class="nx">txId</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">response</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">4</span><span class="p">));</span>
<span class="p">});</span>
</code></pre>

<p>トランザクション・ハッシュの詳細を取得します。</p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/tx/:txid</code></p>

<h3 id="url-url-parameters">URLパラメーター URL Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>txId</td>
<td>文字列</td>
<td>YES</td>
<td>トランザクション ID (ハッシュ)</td>
</tr>
</tbody></table>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"blockhash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000000009249e7d725cc087cb781ade1dbfaf2bd777822948d5fccd4044f8299"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">16679</span><span class="p">,</span><span class="w">
  </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-11-06T02:22:55.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"entries"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NB96fbwy8eoHttuZTtbwvvhEYrBwz494ov"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">84000000</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"msj42CCGruhRsFrGATiUuh25dtxYtnpbTx"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">-85900000</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mwahoJcaVuy2TiMtGDZV9PaujFeD9z1a1q"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1890000</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
  </span><span class="nt">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">306695</span><span class="p">,</span><span class="w">
  </span><span class="nt">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0100000001b6e8b36132d351b3d66b5452d8f4601e2271a7bb52b644397db956a4ffe2a053000000006a4730440220127c4adc1cf985cd884c383e69440ce4d48a0c4fdce6bf9d70faa0ee8092acb80220632cb6c99ded7f261814e602fc8fa8e7fe8cb6a95d45c497846b8624f7d19b3c012103df001c8b58ac42b6cbfc2223b8efaa7e9a1911e529bd2c8b7f90140079034e75ffffffff0200bd01050000000017a914c449a7fafb3b13b2952e064f2c3c58e851bb943087d0d61c00000000001976a914b0379374df5eab8be9a21ee96711712bdb781a9588ac00000000"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"af867c86000da76df7ddb1054b273ca9e034e8c89d049b5b2795f9f590f67648"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"inputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"previousHash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"53a0e2ffa456b97d3944b652bba771221e60f4d852546bd6b351d33261b3e8b6"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"previousOutputIndex"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"outputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NB96fbwy8eoHttuZTtbwvvhEYrBwz494ov"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">84000000</span><span class="p">,</span><span class="w">
      </span><span class="nt">"vout"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mwahoJcaVuy2TiMtGDZV9PaujFeD9z1a1q"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1890000</span><span class="p">,</span><span class="w">
      </span><span class="nt">"vout"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"pending"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="response">応答 Response</h3>

<p>トランザクションに関連する全てのビットコインアドレスへの実質的影響を含む、トランザクションの詳細な情報を返します。</p>

<h2 id="get-block">ブロックを取得する Get Block</h2>
<pre class="highlight shell"><code><span class="nv">BLOCK</span><span class="o">=</span>00000000000000066fff8a67fbb6fac31e9c4ce5b1eabc279ce53218106aa26a
curl https://test.bitgo.com/api/v1/block/<span class="nv">$BLOCK</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">blockId</span> <span class="o">=</span> <span class="s1">'00000000000000066fff8a67fbb6fac31e9c4ce5b1eabc279ce53218106aa26a'</span><span class="p">;</span>
<span class="nx">bitgo</span><span class="p">.</span><span class="nx">blockchain</span><span class="p">().</span><span class="nx">getBlock</span><span class="p">({</span><span class="na">id</span><span class="p">:</span> <span class="nx">blockId</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">response</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">4</span><span class="p">));</span>
<span class="p">});</span>
</code></pre>

<p>ビットコインブロックとその中の各トランザクションを取得します。&#39;latest&#39;を利用することで、ビットコインネットワークの最新ブロックを取得できます。</p>

<h3 id="http-http-request">HTTPリクエスト HTTP Request</h3>

<p><code class="prettyprint">GET /api/v1/block/latest</code></p>

<p><code class="prettyprint">GET /api/v1/block/:blockHeight</code></p>

<p><code class="prettyprint">GET /api/v1/block/:blockHash</code></p>

<h3 id="url-url-parameters">URLパラメーター URL Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>変数</td>
<td>YES</td>
<td>ブロックのハッシュ値(文字列)、高さ（数字）または最新ブロック（&#39;latest&#39;）</td>
</tr>
<tr>
<td>extended</td>
<td>ブーリアン</td>
<td>NO</td>
<td>trueにセットすると、ブロック内の各トランザクションの詳細を返す</td>
</tr>
</tbody></table>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"chainWork"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60359949399610308617"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-04-15T23:05:50.139Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">326945</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000000000066fff8a67fbb6fac31e9c4ce5b1eabc279ce53218106aa26a"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"previous"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000eecd159babde9b094c6dbf1f4f63028ba100f6f092cacb65f04afc46"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"e393422e5a0b4c011f511cf3c5911e9c09defdcadbcf16ceb12a47a80e257aaa"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"fe429dd68ef56613a038238e81b19e2158ef3ad9d9535d1127018bb78ff83537"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"e1ee8183626b7854c80563d809f85acc6c7cd878de599bee291d0f759a7b2264"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"dee33ab621e5409c65948d330f01e1adadb533b0f726d80d48e20bb434b4b542"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"7d83ee2d59e06bc7efe49c647289d98842a7e9ec3b90c3cc965a81df08c08c8f"</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="response">応答 Response</h3>

<table><thead>
<tr>
<th>名</th>
<th>種類</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>date</td>
<td>日時</td>
<td>ネットワークでブロックが見られた時点のタイムスタンプ</td>
</tr>
<tr>
<td>id</td>
<td>文字列</td>
<td>ブロックのハッシュ</td>
</tr>
<tr>
<td>previous</td>
<td>文字列</td>
<td>チェーンの前のブロックのハッシュ</td>
</tr>
<tr>
<td>transactions</td>
<td>配列</td>
<td>ブロックにあるトランザクションハッシュ（文字列）の配列</td>
</tr>
</tbody></table>

<h1 id="bitgo-instant">BitGo Instant</h1>

<p>BitGo Instantは、BitGoによる二重支払いに対する金融保証により金融保証受信者のアカウントへ即座に着金する、オンチェーンのトランザクションの送信を可能にします。 誰でもBitGo Instant トランザクションを受け取ることができます。 BitGo Instantトランザクションを送信するには、BitGo KRSウォレットまたはBitGoとの担保契約を手配することが必要です。</p>

<h2 id="receiving">　受信 Receiving</h2>

<p>BitGo Instant トランザクションをが即座に着金するためには、<a href="#list-wallet-transactions">List Wallet Transactions</a> と <a href="#get-wallet-transaction">Get Wallet Transaction</a> のAPIから返されたトランザクションオブジェクトの <strong>instant: true</strong>のプロパティに注意を払う必要があります。 インスタントトランザクションはまた、トランザクションで<a href="#get-instant-guarantee">インスタント保証の取得</a>に使用できる<strong>instantld</strong>のフィールドを持ちます。</p>

<h2 id="sending">送信 Sending</h2>

<p>まず、BitGoのインスタントと互換のウォレットが必要です。 ウェブインターフェースのKRSが有効なウォレットの作成、または<strong>backupXpubProvider</strong>を指定の上<a href="#create-wallet-with-keychains">Create Wallet API</a> を利用することにより行えます。 非KRSのウォレットを持っている場合、BitGoとの担保契約を手配することによってBitGo Instantの機能を持つようアップグレードすることができます。</p>

<p>BitGo Instantトランザクションを送信するには、<a href="#send-coins-to-address">Send Coins to Address</a> または <a href="#create-transaction">Create Transaction</a>等のトランザクションAPIのいずれかで<strong>instant: true</strong> のフラグを使用します。 またBitGoは、JSONインターフェースを通じBitGo Instantトランザクションを送信する機能も持っています。</p>

<p>BitGo Instantトランザクションは消費されているインプットの深さについてより厳格な要件を持ちます。 これはBitGo Instantトランザクションの送信に利用可能なウォレットの残高がウォレットの合計残高より少ない場合があることを意味します。 <a href="#get-wallet">Get Wallet API</a>が返すウォレットオブジェクトの <strong>instantBalance</strong>プロパティでBitGo Instantトランザクションの送信前に、利用可能な残高がわかります。</p>

<p>BitGo Instantトランザクションの送信時、ウォレット内に十分な確認済みの未使用分がない場合、あるいはトランザクションがウォレットがサポートしているリスクの上限を超えた場合、トランザクションが失敗する場合があります。 リスクの上限は、入金された担保の額、あるいは特定のKRSによる提供の全ウォレットに対しBitGoが適用するリスクの上限によって決まります。 BitGo Instantトランザクションの送信時、潜在的な障害を処理する必要があります。場合によっては標準的なトランザクションとしての再試行が必要です。</p>

<p>BitGo Instantトランザクションは、ボリュームディスカウントプランを含む全ての標準トランザクション価格プランの顧客に、追加費用なしで提供されています。</p>

<h1 id="partner-oauth-oauth">Partner OAuth パートナー OAuth</h1>

<p>BitGoのパートナーは、許可されたアクセスを得て3rdパーティBitGoアカウントに代わってアクションを実行するために、私達のOAuthエンドポイントを利用できます。 BitGoはOAuthの基準に従い、パスワードを安全に保管する一方で、顧客アカウントへのセキュアなアクセスを可能にしています。</p>

<p>まずはじめに、パートナーは私達に連絡して、OAuthのアプリケーションパラメーターを取得して下さい。OAuthの流れは通常次のようになります:</p>

<ol>
<li>OAuthゲートウェイ<code class="prettyprint">https://www.bitgo.com/oauth/authorize</code> 経由、でBitGoにログインするようユーザーをリダイレクトします。このリクエストの各パラメーターで、client id、redirect uri、そしてscopeを指定します。</li>
<li>ユーザーはOAuthゲートウェイにアクセスします。私達は彼に、リクエストされたスコープへのアクセスを取得するのはOKですかとたずねます。彼は確認の為、自身のパスワードと二要素認証でログインします。　</li>
<li>私達はユーザーを、コードのパラメータとともにあなたのリダイレクトUriへと再びリダイレクトします。この認証コードはあなたのクライアントIDによる使用のみに有効です。</li>
<li>あなたは再び認証コードをあなたのサーバに送信し、その認証コード、クライアントid、そしてsecretで、BitGoサーバへのリクエストを作成します。それらを私達は、アクセストークンと交換します。</li>
<li>認証ヘッダーでアクセストークンを用いて、BitGoユーザーに代わってAPIコールを行います。</li>
</ol>

<h3 id="oauth-oauth-variables">OAuth変数 OAuth Variables</h3>

<table><thead>
<tr>
<th>名</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>Client Id</td>
<td>サードパーティアカウントへのアクセスを求めているOAuthアプリケーションの文字列（名前）。これは公開されます。</td>
</tr>
<tr>
<td>Client Secret</td>
<td>OAuthコンシューマーのサーバに格納された秘密の文字列、client idがトークンにアクセスするための認証コードを変換するのに使用される。</td>
</tr>
<tr>
<td>Redirect Uris</td>
<td>受け入れ可能なリダイレクトURIのリスト。あなたが認証のため私達のOAuthゲートウェイへユーザーを送る時、私達は再び彼らを認証コードとともにあなたのサイトのUriへ送ります。</td>
</tr>
<tr>
<td>Scope</td>
<td>OAuthスコープのリスト。これらはあなたのアプリケーションがユーザーに要求することが認められるスコープです。</td>
</tr>
</tbody></table>

<h3 id="scope-values">スコープ値 Scope Values</h3>

<p>スコープの値はOAuthセッション内で許可される操作を定義します。 これらのスコープは、BitGOがユーザーにあなたの意図を知らせ要求されたスコープを持つ適切な認証コード割り当てることができるよう、BitGo OAuthゲートウェイに提供される必要があります。</p>

<p>スペースで区切られたスコープを指定して下さい。（例：&quot;openid profile wallet_view_enterprise wallet_spend_enterprise&quot;）</p>

<p>より強力なスコープが基本的なスコープを包含しない事にご注意下さい。つまり、wallet_spendはwallet_view包含せず、よってあなたは両方をリクエストすべきということです。</p>

<table><thead>
<tr>
<th>OAuth スコープの値</th>
<th>許可されるアクションの説明</th>
</tr>
</thead><tbody>
<tr>
<td>openid</td>
<td>ユーザーがログインしていることを確認し、彼らのユーザーIDを取得する</td>
</tr>
<tr>
<td>profile</td>
<td>メールアドレスと電話番号を含むユーザーのプロファイルを取得する</td>
</tr>
<tr>
<td>wallet_create</td>
<td>ユーザーに代わってウォレットを作成する</td>
</tr>
<tr>
<td>wallet_view_enterprise</td>
<td>ユーザーのエンタープライズのもと作成されたウォレットを見る</td>
</tr>
<tr>
<td>wallet_spend_enterprise</td>
<td>ユーザーのエンタープライズのもと作成されたウォレットからビットコインを消費する</td>
</tr>
<tr>
<td>wallet_manage_enterprise</td>
<td>ユーザーのエンタープライズのもと作成されたウォレットからの設定を管理、修正する</td>
</tr>
<tr>
<td>wallet_view: #WALLETID</td>
<td>ウォレットのトランザクションとアドレスを見る</td>
</tr>
<tr>
<td>wallet_spend:#WALLETID</td>
<td>特定のウォレットからビットコインを消費する</td>
</tr>
<tr>
<td>wallet_manage:#WALLETID</td>
<td>特定のウォレットの設定を管理、修正する</td>
</tr>
<tr>
<td>wallet_view_all</td>
<td>ユーザーがアクセスを持つ全てのウォレットについて全てのトランザクションとアドレスを見る</td>
</tr>
<tr>
<td>wallet_freeze_#WALLETID</td>
<td>所定の期間特定のウォレットでの全ての消費活動を凍結する（デフォルトで1時間）</td>
</tr>
<tr>
<td>wallet_freeze_all</td>
<td>そのユーザーの全てのウォレットで全ての消費活動を凍結する</td>
</tr>
</tbody></table>

<h2 id="bitgo-3rd-party-bitgo-login">サードパーティ BitGo ログイン 3rd Party BitGo Login</h2>

<blockquote>
<p>あなたのユーザーをBitGo OAuthに送るOAuthゲートウェイリダイレクトの例</p>
</blockquote>

<p>https://test.bitgo.com/oauth/authorize?client_id=FBExchange&amp;redirect_uri=https%3A%2F%2Ffbexchange.com%2Foauth_redirect&amp;scope=openid%20profile%20wallet_view_enterprise&amp;email=test@bitgo.com&amp;signup=false</p>

<p>OAuthのフローの最初のステップは、あなたのユーザーをClient ID、Scope、そしてリダイレクトUriパラメータとともにBitGo OAuthにリダイレクトすることです。</p>

<ul>
<li>テストエンドポイント： https://test.bitgo.com/oauth/authorize</li>
<li>プロダクションエンドポイント：https://www.bitgo.com/oauth/authorize</li>
</ul>

<p>パラメータはGETまたはPOST経由で送ることができます。</p>

<h3 id="oauth-oauth-request-parameters">OAuth 要求パラメータ OAuth Request Parameters</h3>

<blockquote>
<p>再びユーザーをあなたのサイトに送るBitGoからのリダイレクトURLの例</p>
</blockquote>

<p>https://fbexchange.com/oauth_redirect?code=440261e26512877b7ebe86e2740da3030d81e88e</p>

<table><thead>
<tr>
<th>パラメーター</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>client_id</td>
<td>YES</td>
<td>サードパーティのアカウントにアクセスを求めているOAuthアプリケーションの名前</td>
</tr>
<tr>
<td>redirect_uri</td>
<td>YES</td>
<td>BitGoで認証された後、再びユーザーをあなたのサイトに送るBitGoのリダイレクトUri</td>
</tr>
<tr>
<td>scope</td>
<td>YES</td>
<td>スペースで区切られた要求されたOAuthスコープのリスト。ユーザーの情報へのあなたのアクセスはこれらのスコープに依存します</td>
</tr>
<tr>
<td>state</td>
<td>NO</td>
<td>あなたが提供したいと望むカスタム情報を含める不透明な文字列。リダイレクトUriにあるパラメータとして送り返します</td>
</tr>
<tr>
<td>signup</td>
<td>NO</td>
<td>BitGoでのOAuthゲートウェイに着いた時、ユーザーがデフォルトでログインまたはサインアップする場合コントロールに使用するブール値</td>
</tr>
<tr>
<td>email</td>
<td>NO</td>
<td>値を予め用意するのに使用されるメールユーザ名の文字列の値</td>
</tr>
<tr>
<td>force_email</td>
<td>NO</td>
<td>trueに設定された場合、ユーザーのクライアント側でメールフィールド（上で設定）は読み取り専用になる</td>
</tr>
</tbody></table>

<h3 id="our-server-will-redirect">私達のサーバーはリダイレクトします Our server will redirect</h3>

<p>ユーザーがあなたのアプリケーションを認証した後、私達は再び彼らをあなたのURLにリダイレクトします。リダイレクトはURLパラメータを含みます：</p>

<table><thead>
<tr>
<th>パラメーター</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>アクセストークンと交換するため（secretとともにあなたが）使用できるコード文字列を承認する</td>
</tr>
</tbody></table>

<h2 id="obtaining-access-tokens">アクセス トークンの取得 Obtaining Access Tokens</h2>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">bitgo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BitGoJS</span><span class="p">.</span><span class="nx">BitGo</span><span class="p">({</span><span class="na">clientId</span><span class="p">:</span><span class="nx">clientId</span><span class="p">,</span> <span class="na">clientSecret</span><span class="p">:</span><span class="nx">clientSecret</span><span class="p">});</span>
<span class="kd">var</span> <span class="nx">authorizationCode</span> <span class="o">=</span> <span class="s1">'440261e26512877b7ebe86e2740da3030d81e88e'</span><span class="p">;</span>
<span class="nx">bitgo</span><span class="p">.</span><span class="nx">authenticateWithAuthCode</span><span class="p">({</span> <span class="na">authCode</span><span class="p">:</span> <span class="nx">authorizationCode</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">"Could not auth!"</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
  <span class="nx">bitgo</span><span class="p">.</span><span class="nx">me</span><span class="p">({},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">"Could not get user!"</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight shell"><code><span class="nv">AUTHORIZATION_CODE</span><span class="o">=</span><span class="s1">'440261e26512877b7ebe86e2740da3030d81e88e'</span>
<span class="nv">CLIENT_ID</span><span class="o">=</span><span class="s1">'FBExchange'</span>
<span class="nv">CLIENT_SECRET</span><span class="o">=</span><span class="s1">'testclientsecret'</span>
curl -X POST https://test.bitgo.com/oauth/token <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d  <span class="s2">"{ </span><span class="se">\"</span><span class="s2">client_id</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$CLIENT_ID</span><span class="se">\"</span><span class="s2">,
       </span><span class="se">\"</span><span class="s2">client_secret</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$CLIENT_SECRET</span><span class="se">\"</span><span class="s2">,
       </span><span class="se">\"</span><span class="s2">grant_type</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">authorization_code</span><span class="se">\"</span><span class="s2">,
       </span><span class="se">\"</span><span class="s2">code</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="nv">$AUTHORIZATION_CODE</span><span class="se">\"</span><span class="s2">
    }"</span>
</code></pre>

<p>ユーザーが認証コードを受け取った時、ユーザーに代わりアクションを実行するため使用したいサービスのバックエンドに送って下さい。</p>

<p>次に認証コードを、apiの残りにおいて使用できるアクセストークンと交換する必要があります。</p>

<ul>
<li>テストエンドポイント： https://test.bitgo.com/oauth/token</li>
<li>プロダクションエンドポイント：https://www.bitgo.com/oauth/token</li>
</ul>

<h3 id="oauth-oauth-token-request-parameters">OAuth トークン要求パラメータ OAuth Token Request Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>client_id</td>
<td>サードパーティのアカウントにアクセスを求めているOAuthアプリケーションの文字列(名前)</td>
</tr>
<tr>
<td>client_secret</td>
<td>BitGoによって発行されたOAuthアプリケーションのサーバに格納されている秘密の文字列</td>
</tr>
<tr>
<td>grant_type</td>
<td>&#39;authorization_code&rsquo; であるべき</td>
</tr>
<tr>
<td>code</td>
<td>上のユーザーログインステップからのリダイレクトで受け取った認証コード</td>
</tr>
</tbody></table>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"token_type"</span><span class="p">:</span><span class="s2">"bearer"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"access_token"</span><span class="p">:</span><span class="s2">"2dba5167e70d4c18679a9775c57b184951a4fa07"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"expires_in"</span><span class="p">:</span><span class="mi">3600</span><span class="p">,</span><span class="w">
    </span><span class="nt">"expires_at"</span><span class="p">:</span><span class="mi">1418059789</span><span class="p">,</span><span class="w">
    </span><span class="nt">"refresh_token"</span><span class="p">:</span><span class="s2">"3f8aa90479b4e3f0ea4544ed302e3bfe91968581"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id_token"</span><span class="p">:</span><span class="s2">"eyJ0eXAiOiJIUzI1NiJ96js46Ngvk-uC10YjYcEa4CqIAe-1hX2hYgXq6my...."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="oauth-oauth-response">OAuth 応答 OAuth Response</h3>

<p>私達のサーバがAPIと使用するためのアクセストークンを返します。</p>

<p>トークンはHTTP&quot;Authorization&quot;ヘッダーにある全てのAPIコールへへ、HTTPヘッダーとして追加されなければなりません。</p>

<p><code class="prettyprint">Authorization: Bearer &lt;あなたのトークンはここ&gt;</code></p>

<table><thead>
<tr>
<th>パラメーター</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>token_type</td>
<td>トークンの種類（例：&#39;bearer&#39;）</td>
</tr>
<tr>
<td>access_token</td>
<td>以降の認証されたAPIリクエストでユーザーに代わって認証ヘッダで使用されるトークン</td>
</tr>
<tr>
<td>expires_in</td>
<td>トークンが有効な秒数</td>
</tr>
<tr>
<td>expires_at</td>
<td>トークンが失効するまでの有効期限、1970年からの秒数</td>
</tr>
<tr>
<td>refresh_token</td>
<td>あなたのセッションが期限切れの場合、もう一つのアクセストークンを取得するのに使用できる</td>
</tr>
<tr>
<td>id_token</td>
<td>スコープとして要求された場合、ユーザープロファイル情報を含むopenid jwt (JSON Web Token) トークン</td>
</tr>
</tbody></table>

<h2 id="openid-json-web-openid-json-web-token">OpenID JSON Web トークン OpenID JSON Web Token</h2>

<p>パートナー認証リクエストがopenidプロファイルスコープを持つ場合、上のアクセストークン要求への応答でJSON Web Token (JWT) base64エンコード形式のid_tokenが返されます。 あなたは、（BitGoからのものであることを証明するため）JSON Webトークンがあなたのクライアントsecxretを使用してHS256アルゴリズムで署名されたことを検証すべきです。</p>

<p>このトークンはユーザープロファイル情報を含みます。ユーザーを詐欺師やフィッシングにさらさないよう、注意して安全にこの情報を格納して下さい。</p>

<blockquote>
<p>復号化されたid_tokenの例(上のアクセストークン応答から)</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+14085551234"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"sub"</span><span class="p">:</span><span class="w"> </span><span class="s2">"54583af457fd213c2d00000532cc8e44e6bdf943559be179e9475cfe"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"phone_number_verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"iss"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://dev-accounts.bitgo.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email_verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"zoneinfo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US/Pacific"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"09d3dc7a41c86ceff09e383acda4840840bf056d"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"exp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1416882424</span><span class="p">,</span><span class="w">
    </span><span class="nt">"iat"</span><span class="p">:</span><span class="w"> </span><span class="mi">1416878824</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tester@something.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"aud"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TESTCLIENTID"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="id-id-token-claims">IDトークンの要求 ID Token Claims</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>形式</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>iat</td>
<td>utc からの秒数</td>
<td>このトークンが作成された時間、1970年からの秒数</td>
</tr>
<tr>
<td>exp</td>
<td>utc からの秒数</td>
<td>トークンの有効期限 (いつまで受け入れるか)、1970 年からの秒数で。</td>
</tr>
<tr>
<td>aud</td>
<td>文字列</td>
<td>クライアント id</td>
</tr>
<tr>
<td>iss</td>
<td>uri 文字列</td>
<td>発行識別子</td>
</tr>
<tr>
<td>sub</td>
<td>文字列</td>
<td>BitGoの一意のユーザーid</td>
</tr>
<tr>
<td>access_token</td>
<td>文字列</td>
<td>認証目的でこのリクエストからあなたが受け取ったアクセストークン</td>
</tr>
<tr>
<td>email</td>
<td>文字列</td>
<td>ユーザーの電子メール</td>
</tr>
<tr>
<td>email_verified</td>
<td>ブーリアン</td>
<td>ユーザーの電子メールが認証されている場合</td>
</tr>
<tr>
<td>phone_number</td>
<td>文字列</td>
<td>ユーザーの電話番号</td>
</tr>
<tr>
<td>phone_number_verified</td>
<td>ブーリアン</td>
<td>電話番号がが認証された場合</td>
</tr>
<tr>
<td>zoneinfo</td>
<td>タイムゾーン</td>
<td>タイムゾーン情報 (例 米国/太平洋)</td>
</tr>
</tbody></table>

<h2 id="refreshing-access-tokens">アクセストークンをリフレッシュする Refreshing Access Tokens</h2>
<pre class="highlight javascript"><code><span class="c1">// var refreshToken = 'undefined' //設定されていない場合、前回の認証要求から保存されたリフレッシュトークンを使用します。</span>
<span class="kd">var</span> <span class="nx">refreshToken</span> <span class="o">=</span> <span class="s1">'3f8aa90479b4e3f0ea4544ed302e3bfe91968581'</span> <span class="c1">// from above auth request</span>
<span class="nx">bitgo</span><span class="p">.</span><span class="nx">refreshToken</span><span class="p">({</span> <span class="na">refreshToken</span><span class="p">:</span> <span class="nx">refreshToken</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">"Could not refresh!"</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight shell"><code><span class="nv">REFRESH_TOKEN</span><span class="o">=</span><span class="s1">'3f8aa90479b4e3f0ea4544ed302e3bfe91968581'</span> <span class="c">#from above request</span>
<span class="nv">CLIENT_ID</span><span class="o">=</span><span class="s1">'FBExchange'</span>
<span class="nv">CLIENT_SECRET</span><span class="o">=</span><span class="s1">'testclientsecret'</span>
curl -X POST https://test.bitgo.com/oauth/token <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d  <span class="s2">"{ </span><span class="se">\"</span><span class="s2">client_id</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$CLIENT_ID</span><span class="se">\"</span><span class="s2">,
       </span><span class="se">\"</span><span class="s2">client_secret</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$CLIENT_SECRET</span><span class="se">\"</span><span class="s2">,
       </span><span class="se">\"</span><span class="s2">grant_type</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">refresh_token</span><span class="se">\"</span><span class="s2">,
       </span><span class="se">\"</span><span class="s2">refresh_token</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="nv">$REFRESH_TOKEN</span><span class="se">\"</span><span class="s2">
    }"</span>
</code></pre>

<p>前のステップで取得されたアクセストークンは通常一時間利用可能です。</p>

<p>ユーザーセッションを延長するには、これも前のステップで送信したリクエストトークンを使用して、もう一つのアクセストークンを要求することができます。</p>

<blockquote>
<p>応答の例</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"token_type"</span><span class="p">:</span><span class="s2">"bearer"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"access_token"</span><span class="p">:</span><span class="s2">"2dba5167e70d4c18679a9775c57b184951a4fa07"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"expires_in"</span><span class="p">:</span><span class="mi">3600</span><span class="p">,</span><span class="w">
    </span><span class="nt">"expires_at"</span><span class="p">:</span><span class="mi">1418059789</span><span class="p">,</span><span class="w">
    </span><span class="nt">"refresh_token"</span><span class="p">:</span><span class="s2">"3f8aa90479b4e3f0ea4544ed302e3bfe91968581"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<ul>
<li>テストエンドポイント： https://test.bitgo.com/oauth/token</li>
<li>プロダクションエンドポイント：https://www.bitgo.com/oauth/token</li>
</ul>

<p>リフレッシュトークンの寿命は作成から二週間で、<em>一回の使用のみ</em>において有効です。毎回一つ使用されるたびに、新たなリフレッシュトークンがあなたに割り当てられます。</p>

<h3 id="oauth-oauth-token-request-parameters">OAuth トークン要求パラメータ OAuth Token Request Parameters</h3>

<table><thead>
<tr>
<th>パラメーター</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>client_id</td>
<td>サードパーティのアカウントにアクセスを求めているOAuthアプリケーションの文字列(名前)</td>
</tr>
<tr>
<td>client_secret</td>
<td>BitGoによって発行されたOAuthアプリケーションのサーバに格納されている秘密の文字列</td>
</tr>
<tr>
<td>grant_type</td>
<td>&#39;refresh_token&#39;であるべき</td>
</tr>
<tr>
<td>refresh_token</td>
<td>認証コードをアクセストークンと交換した時受信したリフレッシュトークン</td>
</tr>
</tbody></table>

<h1 id="examples">例 Examples</h1>

<p>BitGOの方で、SDKを使用した、いくつかの一般的なウォレットの操作方法の例を提供いたしました。比較的重要なものをここで扱います。
<aside class="info">
私達のSDKと例は、ビットコインのテストネットと接続されたBitGoテスト環境がデフォルトとなっています。 さらなる詳細については、<a href="#bitgo-api-endpoints">テスト環境</a>のセクションをご参照下さい。 
</aside> </p>

<p>以下の各例(ともっと！) は私達のSDKレポジトリの<code class="prettyprint">BitGoJS/examples</code> のディレクトリに見つけることができます。 各例に関する問題はメールかGitのイシュー経由でご報告下さい。</p>

<h3 id="id-obtaining-the-wallet-id">ウォレット ID を取得する Obtaining the Wallet ID</h3>

<p>BitGoテストウェブサイトでウォレットを作成する時、ウォレットidが最初の受信アドレスです。またメインメニューからクリックする時のURIでもあります。</p>

<h2 id="get-wallet-balance">ウォレットの残高を取得する Get Wallet Balance</h2>

<blockquote>
<p>コード スニペット</p>
</blockquote>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">bitgo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BitGoJS</span><span class="p">.</span><span class="nx">BitGo</span><span class="p">();</span>

<span class="c1">// First, Authenticate</span>
<span class="nx">bitgo</span><span class="p">.</span><span class="nx">authenticate</span><span class="p">({</span> <span class="na">username</span><span class="p">:</span> <span class="nx">user</span><span class="p">,</span> <span class="na">password</span><span class="p">:</span> <span class="nx">password</span><span class="p">,</span> <span class="na">otp</span><span class="p">:</span> <span class="nx">otp</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Logged in!"</span> <span class="p">);</span>

  <span class="c1">// Get the Balance</span>
  <span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">get</span><span class="p">({</span><span class="na">type</span><span class="p">:</span> <span class="s1">'bitcoin'</span><span class="p">,</span> <span class="na">id</span><span class="p">:</span> <span class="nx">id</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Balance is: "</span> <span class="o">+</span> <span class="p">(</span><span class="nx">wallet</span><span class="p">.</span><span class="nx">balance</span><span class="p">()</span> <span class="o">/</span> <span class="mi">1</span><span class="nx">e8</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">4</span><span class="p">));</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>

<p>$ node getWalletBalance.js tester@bitgo.com superhardseypassphrase 0000000 2N4Xz4itCdKKUREiySS7oBzoXUKnuxP4nRD</p>

<blockquote>
<p>アウトプット例</p>
</blockquote>

<p>Logged in!
    Balance is: 0.6274</p>

<p>このシンプルな例は認証とウォレットを取得する方法を示しています。 ビットコインでの残高はウォレットモデルに見つけることができます。</p>

<h3 id="usage">使い方 Usage</h3>

<p><code class="prettyprint">node getWalletBalance.js &lt;user&gt; &lt;pass&gt; &lt;otp&gt; &lt;walletId&gt;</code></p>

<h3 id="parameters">パラメーター Parameters</h3>

<table><thead>
<tr>
<th>名</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>user</td>
<td>文字列</td>
<td>YES</td>
<td>ユーザー名 (テスト環境でのメールアドレス)</td>
</tr>
<tr>
<td>pass</td>
<td>文字列</td>
<td>YES</td>
<td>BitGo でのパスワード</td>
</tr>
<tr>
<td>otp</td>
<td>数字</td>
<td>YES</td>
<td>ワンタイムパスワード（テスト環境では0000000を使用できます）</td>
</tr>
<tr>
<td>walletId</td>
<td>文字列</td>
<td>YES</td>
<td>ウォレットのid(同時に最初の受信アドレス)</td>
</tr>
</tbody></table>

<h2 id="list-wallet-transactions">ウォレットでのトランザクションの一覧を取得する List Wallet Transactions</h2>

<blockquote>
<p>コード スニペット</p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">bitgo</span><span class="p">.</span><span class="nx">authenticate</span><span class="p">({</span> <span class="na">username</span><span class="p">:</span> <span class="nx">user</span><span class="p">,</span> <span class="na">password</span><span class="p">:</span> <span class="nx">password</span><span class="p">,</span> <span class="na">otp</span><span class="p">:</span> <span class="nx">otp</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Logged in!"</span> <span class="p">);</span>

  <span class="c1">// Get the wallet</span>
  <span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">get</span><span class="p">({</span><span class="na">type</span><span class="p">:</span> <span class="s1">'bitcoin'</span><span class="p">,</span> <span class="na">id</span><span class="p">:</span> <span class="nx">id</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Balance is: "</span> <span class="o">+</span> <span class="p">(</span><span class="nx">wallet</span><span class="p">.</span><span class="nx">balance</span><span class="p">()</span> <span class="o">/</span> <span class="mi">1</span><span class="nx">e8</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">4</span><span class="p">));</span>

    <span class="c1">// Get the transactions</span>
    <span class="nx">wallet</span><span class="p">.</span><span class="nx">transactions</span><span class="p">({},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">index</span> <span class="o">&lt;</span> <span class="nx">result</span><span class="p">.</span><span class="nx">transactions</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">tx</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">transactions</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">entriesIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">entriesIndex</span> <span class="o">&lt;</span> <span class="nx">tx</span><span class="p">.</span><span class="nx">entries</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">entriesIndex</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">tx</span><span class="p">.</span><span class="nx">entries</span><span class="p">[</span><span class="nx">entriesIndex</span><span class="p">].</span><span class="nx">account</span> <span class="o">===</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">id</span><span class="p">())</span> <span class="p">{</span>
            <span class="nx">value</span> <span class="o">+=</span> <span class="nx">tx</span><span class="p">.</span><span class="nx">entries</span><span class="p">[</span><span class="nx">entriesIndex</span><span class="p">].</span><span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="kd">var</span> <span class="nx">verb</span> <span class="o">=</span> <span class="p">(</span><span class="nx">value</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">?</span> <span class="s1">'Received'</span> <span class="p">:</span> <span class="s1">'Sent'</span><span class="p">;</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">tx</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s1">': '</span> <span class="o">+</span> <span class="nx">verb</span> <span class="o">+</span> <span class="s1">' '</span> <span class="o">+</span> <span class="p">(</span><span class="nx">value</span> <span class="o">/</span> <span class="mi">1</span><span class="nx">e8</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'BTC on '</span> <span class="o">+</span> <span class="nx">tx</span><span class="p">.</span><span class="nx">date</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>

<p>$ node listWalletTransactions.js tester@bitgo.com superhardseypassphrase 0000000 2N4Xz4itCdKKUREiySS7oBzoXUKnuxP4nRD</p>

<blockquote>
<p>アウトプット例</p>
</blockquote>

<p>Logged in!
    Balance is: 0.6274
    b9573e0e1d8f22fbfe314760b9abd0b6942132cfb2bd7f9fee9713b545a62689: Received 0.56000000BTC on 2014-11-17T21:20:59.000Z
    b3bd8ac76de2340c1159337acdfcaabf08a9470e8157870bd1d84631a0acc67b: Received 0.00010000BTC on 2014-11-17T21:00:58.000Z
    7f5d6a27ea832b2d0a9b63ecdbccecaadbd582b5be41d5bdeabcce72243366a3: Received 0.00010000BTC on 2014-11-17T19:57:18.000Z
    690b8a83e1685869f6138d9a74776f5f868ffc1121fa22f2086e65400f14ef78: Received 0.00010000BTC on 2014-11-17T19:57:18.000Z</p>

<p>この例はウォレットでのトランザクションのリストを取得する方法を示しています。受信されたトランザクションIDの確認に有用かもしれません。</p>

<h3 id="usage">使い方 Usage</h3>

<p><code class="prettyprint">node listWalletTransactions.js &lt;user&gt; &lt;pass&gt; &lt;otp&gt; &lt;walletId&gt;</code></p>

<h3 id="parameters">パラメーター Parameters</h3>

<table><thead>
<tr>
<th>名</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>user</td>
<td>文字列</td>
<td>YES</td>
<td>ユーザー名 (テスト環境でのメールアドレス)</td>
</tr>
<tr>
<td>pass</td>
<td>文字列</td>
<td>YES</td>
<td>BitGo でのパスワード</td>
</tr>
<tr>
<td>otp</td>
<td>数字</td>
<td>YES</td>
<td>ワンタイムパスワード（テスト環境では0000000を使用できます）</td>
</tr>
<tr>
<td>walletId</td>
<td>ビットコインアドレス(文字列)</td>
<td>YES</td>
<td>ウォレットのid(同時に最初の受信アドレス)</td>
</tr>
</tbody></table>

<h2 id="address-labels">アドレスのラベル Address Labels</h2>

<p>$ node addressLabels.js tester@bitgo.com superhardseypassphrase 0000000</p>

<blockquote>
<p>アウトプット例</p>
</blockquote>

<p>Enter the wallet ID: 2N4Xz4itCdKKUREiySS7oBzoXUKnuxP4nRD
    Which label action do you wish to perform? [list, set, delete]: list
     muYhgJrYZHffyGUmuzETjMcBQZJqFo9Vkg    Secret Stash
     2N4Xz4itCdKKUREiySS7oBzoXUKnuxP4nRD   another label
     2MzjET9tYPPZQtsahFvabhaaPWuDdKn3Dh6   descriptive text
     n1wbb1HeZULZwvtcYMLeFz8J9QD7HkG1pa    watch only address</p>

<p>この例は、各アドレスでのラベルの一覧取得、設定、削除の方法を示しています。</p>

<h3 id="usage">使い方 Usage</h3>

<p><code class="prettyprint">node addressLabels.js &lt;user&gt; &lt;pass&gt; &lt;otp&gt;</code></p>

<h3 id="parameters">パラメーター Parameters</h3>

<table><thead>
<tr>
<th>名</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>user</td>
<td>文字列</td>
<td>YES</td>
<td>ユーザー名 (テスト環境でのメールアドレス)</td>
</tr>
<tr>
<td>pass</td>
<td>文字列</td>
<td>YES</td>
<td>BitGo でのパスワード</td>
</tr>
<tr>
<td>otp</td>
<td>数字</td>
<td>YES</td>
<td>ワンタイムパスワード（テスト環境では0000000を使用できます）</td>
</tr>
</tbody></table>

<h2 id="create-wallet">ウォレットを作成する Create Wallet</h2>

<blockquote>
<p>コード スニペット</p>
</blockquote>
<pre class="highlight javascript"><code>  <span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">createWalletWithKeychains</span><span class="p">({</span><span class="s2">"passphrase"</span><span class="p">:</span> <span class="nx">password</span><span class="p">,</span> <span class="s2">"label"</span><span class="p">:</span> <span class="nx">label</span><span class="p">,</span> <span class="s2">"backupXpubProvider"</span><span class="p">:</span> <span class="s2">"keyternal"</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">"Could not create wallet!"</span><span class="p">);</span> <span class="p">}</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"New Wallet: "</span> <span class="o">+</span> <span class="nx">result</span><span class="p">.</span><span class="nx">wallet</span><span class="p">.</span><span class="nx">id</span><span class="p">());</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">wallet</span><span class="p">.</span><span class="nx">wallet</span><span class="p">);</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"BACK THIS UP: "</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"User keychain encrypted xPrv: "</span> <span class="o">+</span> <span class="nx">result</span><span class="p">.</span><span class="nx">userKeychain</span><span class="p">.</span><span class="nx">encryptedXprv</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Backup keychain xPub: "</span> <span class="o">+</span> <span class="nx">result</span><span class="p">.</span><span class="nx">backupKeychain</span><span class="p">.</span><span class="nx">xpub</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<p>$ node createWallet.js tester@bitgo.com superhardseypassphrase 0000000 &#39;My API wallet&rsquo;</p>

<blockquote>
<p>アウトプット例</p>
</blockquote>

<p>New Wallet: 2NAGz3TDs5HmBU2SEodtWyks9n5KXVCzBTf</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w"> </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NAGz3TDs5HmBU2SEodtWyks9n5KXVCzBTf"</span><span class="p">,</span><span class="w">
 </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"testwallet"</span><span class="p">,</span><span class="w">
 </span><span class="nt">"isActive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
 </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"safehd"</span><span class="p">,</span><span class="w">
 </span><span class="nt">"private"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"keychains"</span><span class="p">:</span><span class="w"> </span><span class="p">[{}]</span><span class="w"> </span><span class="p">},</span><span class="w">
 </span><span class="nt">"permissions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin,spend,view"</span><span class="p">,</span><span class="w">
 </span><span class="nt">"admin"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
 </span><span class="nt">"spendingAccount"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
 </span><span class="nt">"confirmedBalance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
 </span><span class="nt">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
 </span><span class="nt">"pendingApprovals"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>

<p>BACK THIS UP:
    User keychain encrypted xPrv: {&ldquo;iv&rdquo;:&ldquo;v2aVEG5A8VwnI+ewS&hellip;&rdquo;}
    Backup keychain xPub: xpub6GiRC55CRuv2Fx3ihR9EPCr7gauoJcHqvvdSgQkmMmqMQmvQ1KNSBmKPReryBv8E3qJWkHmCx3cWmLGvbDRzCAoV7HUf8A5LUdRhV46u9h5</p>

<p>BitGo でウォレットを作成します。例は、次の手順を実行します：</p>

<ol>
<li>BitGo で認証します。</li>
<li>アカウントをアンロックします</li>
<li>クライアントでユーザーキーチェーンを作成、パスワードで暗号化し、サーバに送信します。</li>
<li>クライアントでバックアップキーチェーンを作成します。</li>
<li>BitGoサーバでBitGoキーチェーンを作成します。</li>
<li>上のキーチェーンに対応するパブリックキーでウォレットを作成します。<aside class="warning"> ユーザーが彼らのユーザーとバックアップのキーを印刷/バックアップを取ることは<strong>非常に重要</strong>です。 やっておかなければ、資金の喪失という結果になり得ます！ </aside> </li>
</ol>

<h3 id="usage">使い方 Usage</h3>

<p><code class="prettyprint">node createWallet.js &lt;user&gt; &lt;pass&gt; &lt;otp&gt; &lt;label&gt;</code></p>

<h3 id="parameters">パラメーター Parameters</h3>

<table><thead>
<tr>
<th>名</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>user</td>
<td>文字列</td>
<td>YES</td>
<td>ユーザー名 (テスト環境でのメールアドレス)</td>
</tr>
<tr>
<td>pass</td>
<td>文字列</td>
<td>YES</td>
<td>BitGo でのパスワード</td>
</tr>
<tr>
<td>otp</td>
<td>数字</td>
<td>YES</td>
<td>ワンタイムパスワード（テスト環境では0000000を使用できます）</td>
</tr>
<tr>
<td>label</td>
<td>文字列</td>
<td>YES</td>
<td>BitGo UIで表示されているウォレット名</td>
</tr>
</tbody></table>

<h2 id="send-bitcoins-to-an-address">アドレスにビットコインを送信する Send Bitcoins to an Address</h2>

<blockquote>
<p>コード スニペット</p>
</blockquote>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">sendBitcoin</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Get the wallet</span>
  <span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">get</span><span class="p">({</span><span class="na">id</span><span class="p">:</span> <span class="nx">walletId</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Send coins</span>
    <span class="nx">wallet</span><span class="p">.</span><span class="nx">sendCoins</span><span class="p">({</span> <span class="na">address</span><span class="p">:</span> <span class="nx">destinationAddress</span><span class="p">,</span> <span class="na">amount</span><span class="p">:</span> <span class="nx">amountSatoshis</span><span class="p">,</span> <span class="na">walletPassphrase</span><span class="p">:</span> <span class="nx">walletPassphrase</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">};</span>

<span class="c1">// Authenticate and unlock account to enable sending</span>
<span class="nx">bitgo</span><span class="p">.</span><span class="nx">authenticate</span><span class="p">({</span> <span class="na">username</span><span class="p">:</span> <span class="nx">user</span><span class="p">,</span> <span class="na">password</span><span class="p">:</span> <span class="nx">password</span><span class="p">,</span> <span class="na">otp</span><span class="p">:</span> <span class="nx">otp</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">bitgo</span><span class="p">.</span><span class="nx">unlock</span><span class="p">({</span><span class="na">otp</span><span class="p">:</span> <span class="nx">otp</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">sendBitcoin</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>

<p>$ node sendBitcoin tester@bitgo.com superhardseypassphrase 0000000 2N91XzUxLrSkfDMaRcwQhe9DauhZMhUoxGr superhardseypassphrase 2N4Xz4itCdKKUREiySS7oBzoXUKnuxP4nRD 10000</p>

<blockquote>
<p>アウトプット例</p>
</blockquote>

<p>{ &ldquo;tx&rdquo;: &ldquo;01000000017bc6aca03146d8d10b875781&hellip;&rdquo;,
      &ldquo;hash&rdquo;: &ldquo;101f1f0f2218b0a0ac9aea1c054fbba7d2e75e09fbeeae7acea0254baa9505b7&rdquo;,
      &ldquo;fee&rdquo;: 10000 }</p>

<p>もう一つのビットコインアドレスにビットコインを送信する。例は、次の手順を使用します：</p>

<ol>
<li>BitGo で認証する。</li>
<li>コインの消費が可能になるようアカウントをアンロックする。</li>
<li>提供されたwalletldでサーバからウォレットを取得します。</li>
<li>ユーザーキーを見つけてそれを復号化し、トランザクションを作成し署名、そしてBitGoに署名のため送信するwallet.sendCoinsメソッドを呼び出します。</li>
</ol>

<h3 id="usage">使い方 Usage</h3>

<p><code class="prettyprint">node sendBitcoin &lt;user&gt; &lt;pass&gt; &lt;otp&gt; &lt;walletId&gt; &lt;walletPassphrase&gt; &lt;destinationAddress&gt; &lt;amountSatoshis&gt;</code></p>

<h3 id="parameters">パラメーター Parameters</h3>

<table><thead>
<tr>
<th>名</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>user</td>
<td>文字列</td>
<td>YES</td>
<td>ユーザー名 (テスト環境でのメールアドレス)</td>
</tr>
<tr>
<td>pass</td>
<td>文字列</td>
<td>YES</td>
<td>BitGo でのパスワード</td>
</tr>
<tr>
<td>otp</td>
<td>数字</td>
<td>YES</td>
<td>ワンタイムパスワード（テスト環境では0000000を使用できます）</td>
</tr>
<tr>
<td>walletId</td>
<td>ビットコインアドレス(文字列)</td>
<td>YES</td>
<td>BitGo UIで表示されているウォレット名</td>
</tr>
<tr>
<td>walletPassphrase</td>
<td>文字列</td>
<td>YES</td>
<td>ユーザーの秘密鍵を暗号化するため使用されるパスフレーズ</td>
</tr>
<tr>
<td>destinationAddress</td>
<td>ビットコインアドレス(文字列)</td>
<td>YES</td>
<td>ウォレットの宛先アドレス</td>
</tr>
<tr>
<td>amountSatoshis</td>
<td>文字列</td>
<td>YES</td>
<td>送信するsatoshiの数字 (例: 0.1ビットコインについて0.1*1e8)</td>
</tr>
</tbody></table>

<h2 id="webhook-webhook-oracle-policy">Webhookオラクルポリシー Webhook Oracle Policy</h2>

<blockquote>
<p>コード スニペット</p>
</blockquote>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">setUpPolicyAndSendBitcoin</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Getting wallet.."</span><span class="p">);</span>
  <span class="nx">bitgo</span><span class="p">.</span><span class="nx">wallets</span><span class="p">().</span><span class="nx">get</span><span class="p">({</span><span class="na">id</span><span class="p">:</span> <span class="nx">walletId</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Error getting wallet!"</span><span class="p">);</span> <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="k">return</span> <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="p">}</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Balance is: "</span> <span class="o">+</span> <span class="p">(</span><span class="nx">wallet</span><span class="p">.</span><span class="nx">balance</span><span class="p">()</span> <span class="o">/</span> <span class="mi">1</span><span class="nx">e8</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">4</span><span class="p">));</span>
    <span class="c1">// Sets the policy</span>
    <span class="kd">var</span> <span class="nx">rule</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="s2">"webhookRule1"</span><span class="p">,</span>
      <span class="na">type</span><span class="p">:</span> <span class="s2">"webhook"</span><span class="p">,</span>
      <span class="na">action</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="s2">"deny"</span> <span class="p">},</span>
      <span class="na">condition</span><span class="p">:</span> <span class="p">{</span> <span class="s2">"url"</span><span class="p">:</span> <span class="nx">url</span> <span class="p">}</span>
    <span class="p">};</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">rule</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Setting webhook policy rule.. "</span><span class="p">);</span>
    <span class="nx">wallet</span><span class="p">.</span><span class="nx">setPolicyRule</span><span class="p">(</span><span class="nx">rule</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">walletAfterPolicyChange</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span> <span class="p">}</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"New policy: "</span><span class="p">);</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">walletAfterPolicyChange</span><span class="p">.</span><span class="nx">admin</span><span class="p">.</span><span class="nx">policy</span><span class="p">);</span>
      <span class="nx">wallet</span><span class="p">.</span><span class="nx">sendCoins</span><span class="p">({</span> <span class="na">address</span><span class="p">:</span> <span class="nx">destinationAddress</span><span class="p">,</span> <span class="na">amount</span><span class="p">:</span> <span class="nx">amountSatoshis</span><span class="p">,</span> <span class="na">walletPassphrase</span><span class="p">:</span> <span class="nx">walletPassphrase</span> <span class="p">},</span>
      <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// removing the rule</span>
        <span class="nx">wallet</span><span class="p">.</span><span class="nx">removePolicyRule</span><span class="p">({</span><span class="na">id</span><span class="p">:</span> <span class="s2">"webhookRule1"</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Removed policy rule"</span><span class="p">);</span> <span class="p">});</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Error sending coins!"</span><span class="p">);</span> <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">});</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">};</span>

<span class="c1">// Authenticate and unlock account to enable sending</span>
<span class="nx">bitgo</span><span class="p">.</span><span class="nx">authenticate</span><span class="p">({</span> <span class="na">username</span><span class="p">:</span> <span class="nx">user</span><span class="p">,</span> <span class="na">password</span><span class="p">:</span> <span class="nx">password</span><span class="p">,</span> <span class="na">otp</span><span class="p">:</span> <span class="nx">otp</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">bitgo</span><span class="p">.</span><span class="nx">unlock</span><span class="p">({</span><span class="na">otp</span><span class="p">:</span> <span class="nx">otp</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">setUpPolicyAndSendBitcoin</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight shell"><code><span class="gp">$ </span>node addPolicyWebhookAndSendCoins bencxr@fragnetics.com nicehardpassword 0000000 2MufYDkh6iwNDtyREBeAXcrRDDAopG1RNc2 https://486d7844.ngrok.com/ walletpasw0rd 2N8ryDAob6Qn8uCsWvkkQDhyeCQTqybGUFe 1380000
</code></pre>

<blockquote>
<p>アウトプット例</p>
</blockquote>

<p>Getting wallet..
    Balance is: 1.2582
    { id: &#39;webhookRule1&rsquo;,
      type: &#39;webhook&rsquo;,
      action: { type: &#39;deny&rsquo; },
      condition: { url: &#39;https://486d7844.ngrok.com/&rsquo; } }
    Setting webhook policy rule..
    New policy:
    { id: &#39;5632aa4039cccac60913ea0ed44276c0&rsquo;,
      rules:
       [ { id: &#39;webhookRule1&rsquo;,
           type: &#39;webhook&rsquo;,
           action: [Object],
           condition: [Object] } ] }
    { status: &#39;accepted&rsquo;,
      tx: &#39;0100000001a89f36c0b714878cdd4cddf5&hellip;&rsquo; }
    Removed policy rule</p>

<blockquote>
<p>Webhookコールバックの例(提供されたURLに送信され、全ての非200応答はポリシー拒否をトリガーします)</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"approvalCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"outputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"outputAddress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2N9kNR8iS46WuwekvQVaTUa74w2fbvAXHQn"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"outputWallet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2MufYDkh6iwNDtyREBeAXcrRDDAopG1RNc2"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">24885327</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"outputAddress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2N8ryDAob6Qn8uCsWvkkQDhyeCQTqybGUFe"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"outputWallet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2N8ryDAob6Qn8uCsWvkkQDhyeCQTqybGUFe"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000000</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"ruleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"webhookRule1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"spendAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10009060</span><span class="p">,</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"webhook"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"unsignedRawTx"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0100000001f8de6273285b13f20b59195c4..."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"walletId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2MufYDkh6iwNDtyREBeAXcrRDDAopG1RNc2"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>この例は、インターネット上のURLエンドポイント(スクリプトまたは他のプログラムの可能性も)を通じあらゆるカスタム外部ロジックを実行する能力を持つウォレットでwebhookポリシーを設定する方法を示します。 これにより、外部の状態をさまざまなユーザーが単一のウォレットを共有するをコントラクトにマップすることが可能になります（URLは「オラクル」として機能します）。</p>

<p>トランザクションが発生すると、提供されたURLがヒットされます。それが200ステータスを返す場合、トランザクションは許可されます。そうでなければ、ポリシールールが発生し、トランザクションは拒否されます。</p>

<ol>
<li>BitGo で認証する。</li>
<li>コインの消費とポリシーの設定が可能になるようアカウントをアンロックする</li>
<li>提供されたwalletldでサーバからウォレットを取得する</li>
<li>提供されたURLがヒットされる原因となるポリシーを設定する</li>
<li>ユーザーキーを見つけてそれを復号化し、トランザクションを作成し署名、そしてBitGoに署名のため送信するwallet.sendCoinsメソッドを呼び出します。</li>
<li>ポリシーを削除し、結果を返します。</li>
</ol>

<p>ローカル環境でテストの際、公開向けのURLを取得するために、まずローカルサーバーをセットアップし(expressまたは任意のhttpサーバで大丈夫です) ngrokのようなツールを実行することによりURLを作成できます。</p>

<h3 id="usage">使い方 Usage</h3>

<p><code class="prettyprint">node addPolicyWebhookAndSendCoins &lt;user&gt; &lt;pass&gt; &lt;otp&gt; &lt;walletId&gt; &lt;url&gt; &lt;walletPassphrase&gt; &lt;destinationAddress&gt; &lt;amountSatoshis&gt;</code></p>

<h3 id="parameters">パラメーター Parameters</h3>

<table><thead>
<tr>
<th>名</th>
<th>種類</th>
<th>必須か</th>
<th>説明</th>
</tr>
</thead><tbody>
<tr>
<td>user</td>
<td>文字列</td>
<td>YES</td>
<td>ユーザー名 (テスト環境でのメールアドレス)</td>
</tr>
<tr>
<td>pass</td>
<td>文字列</td>
<td>YES</td>
<td>bitGo でのパスワード</td>
</tr>
<tr>
<td>otp</td>
<td>数字</td>
<td>YES</td>
<td>ワンタイムパスワード（テスト環境では0000000を使用できます）</td>
</tr>
<tr>
<td>walletId</td>
<td>ビットコインアドレス(文字列)</td>
<td>YES</td>
<td>BitGo UIで表示されているウォレット名</td>
</tr>
<tr>
<td>url</td>
<td>http エンドポイント (文字列)</td>
<td>YES</td>
<td>ポリシーを設定するURL</td>
</tr>
<tr>
<td>walletPassphrase</td>
<td>文字列</td>
<td>YES</td>
<td>ユーザーの秘密鍵を暗号化するのに使用するパスフレーズ</td>
</tr>
<tr>
<td>destinationAddress</td>
<td>ビットコインアドレス(文字列)</td>
<td>YES</td>
<td>ウォレットの宛先アドレス</td>
</tr>
<tr>
<td>amountSatoshis</td>
<td>文字列</td>
<td>YES</td>
<td>送信するsatoshiの数字 (例: 0.1ビットコインについて0.1*1e8)</td>
</tr>
</tbody></table>

<h2 id="recover-wallet">ウォレットを回復する Recover Wallet</h2>

<p>RecoverWalletは BitGoのサービスを利用することなしに、BitGoウォレットから資金を回復できるツールです。 デモンストレーションの目的で、またBitGoのサービスが利用不可の時であってもBitGoウォレットが100%回復可能であることを証明するためにも提供されています。 運用環境向けにツールが使用されることは想定されません。</p>

<p>ウォレット&#39;のキーカードについての情報のみから、このツールは、ユーザー&#39;が選ぶ新しいアカウントへウォレット内のすべての資金を移動するトランザクションを構築します。 これはBitGoのサービスのAPIを使用することなく行われます。</p>

<p>RecoverWalletツールはインタラクティブで、コマンドラインで駆動します。</p>

<h3 id="usage">使い方 Usage</h3>

<p>node recoverwallet.js &ndash;userKey <userkey from keycard> -backupKey <backupkey from keycard> -bitgoKey <bitgo public key from keycard></p>

<h3 id="parameters">パラメーター Parameters</h3>

<table><thead>
<tr>
<th>名</th>
<th>意味</th>
</tr>
</thead><tbody>
<tr>
<td>userKey</td>
<td>ユーザーによって拡張されたウォレットの秘密鍵 (ウォレットキーカードからのBox A)</td>
</tr>
<tr>
<td>backupKey</td>
<td>バックアップによって拡張されたウォレットの秘密鍵 (ウォレットキーカードからのBox B)</td>
</tr>
<tr>
<td>bitgoKey</td>
<td>BitGoによって拡張されたウォレットの公開鍵 (ウォレットキーカードからのBox C)</td>
</tr>
<tr>
<td>testnet</td>
<td>プロダクションビットコインネットワークの代わりにテストネットを使用のフラグ</td>
</tr>
<tr>
<td>nosend</td>
<td>トランザクションを作成するがそれを送信しないフラグ</td>
</tr>
<tr>
<td>password</td>
<td>UserKeyとbackupKeyの復号化に使用するパスワード</td>
</tr>
<tr>
<td>destination</td>
<td>あなたが回復した資金を送信したいビットコインアドレス</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="javascript">javascript</a>
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
